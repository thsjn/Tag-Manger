{
    "exportFormatVersion": 2,
    "exportTime": "2026-01-22 14:23:21",
    "containerVersion": {
        "path": "accounts/6335554172/containers/241502212/versions/0",
        "accountId": "6335554172",
        "containerId": "241502212",
        "containerVersionId": "0",
        "container": {
            "path": "accounts/6335554172/containers/241502212",
            "accountId": "6335554172",
            "containerId": "241502212",
            "name": "Web - Plug & Play",
            "publicId": "GTM-K56VBFNR",
            "usageContext": [
                "WEB"
            ],
            "fingerprint": "1769090835640",
            "tagManagerUrl": "https://tagmanager.google.com/#/container/accounts/6335554172/containers/241502212/workspaces?apiLink=container",
            "features": {
                "supportUserPermissions": true,
                "supportEnvironments": true,
                "supportWorkspaces": true,
                "supportGtagConfigs": false,
                "supportBuiltInVariables": true,
                "supportClients": false,
                "supportFolders": true,
                "supportTags": true,
                "supportTemplates": true,
                "supportTriggers": true,
                "supportVariables": true,
                "supportVersions": true,
                "supportZones": true,
                "supportTransformations": false
            },
            "tagIds": [
                "GTM-K56VBFNR"
            ]
        },
        "tag": [
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "15",
                "name": "02 - GA4 - generate_lead",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_data"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{ga4 - user_provided_data}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "generate_lead"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementIdOverride",
                        "value": "{{const - ga4_measurement_id}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventSettingsVariable",
                        "value": "{{ga4 - shared_event_settings}}"
                    }
                ],
                "fingerprint": "1769090938871",
                "firingTriggerId": [
                    "11"
                ],
                "parentFolderId": "3",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "33",
                "name": "01 - GA4 - page_view",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "page_view"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementIdOverride",
                        "value": "{{const - ga4_measurement_id}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventSettingsVariable",
                        "value": "{{ga4 - shared_event_settings}}"
                    }
                ],
                "fingerprint": "1769090938875",
                "firingTriggerId": [
                    "31"
                ],
                "parentFolderId": "3",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "35",
                "name": "01 - User Data Collector",
                "type": "cvt_241502212_34",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "logType",
                        "value": "debug"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "country",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "lastName",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "scriptUrl",
                        "value": "https://stapecdn.com/udc/v1.js"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "saveIntoStorageKey",
                        "value": "gtm_user_data"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "city",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "postalCode",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "pushToDataLayer",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "autoTrackSpecificForms",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "firstName",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "phone",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "saveIntoStorage",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "autoTrackSpecificClicks",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "saveIntoStorageType",
                        "value": "session"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "overrideExistingUserData",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "overrideRootElement",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "email",
                        "value": "true"
                    }
                ],
                "fingerprint": "1769090938875",
                "firingTriggerId": [
                    "2147479553"
                ],
                "parentFolderId": "12",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "37",
                "name": "06 -HTML Personalizado Name",
                "type": "html",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "html",
                        "value": "<script>\n(function() {\n    // 1. Captura o valor da variável do GTM\n    var nomeCompleto = \"{{01 - JSP - Nome}}\";\n\n    // Verificação de segurança\n    if (nomeCompleto && nomeCompleto !== \"undefined\" && nomeCompleto !== \"null\" && nomeCompleto.trim() !== \"\") {\n        \n        // 2. Separa Nome e Sobrenome\n        var regex = /^(\\S+)\\s*(.*)$/;\n        var match = nomeCompleto.trim().match(regex);\n        var primeiroNome = match ? match[1] : nomeCompleto;\n        var sobrenome = (match && match[2]) ? match[2] : \"\";\n\n        // 3. AÇÃO: Ler dados existentes e atualizar (Concatenar)\n        var storageKey = \"gtm_user_data\";\n        var objDados = {};\n\n        try {\n            // Tenta ler o que já existe no navegador\n            var dadosAtuais = sessionStorage.getItem(storageKey);\n            if (dadosAtuais) {\n                objDados = JSON.parse(dadosAtuais);\n            }\n\n            // Atualiza APENAS o nome e sobrenome, mantendo o resto (email, tel, etc.)\n            objDados.first_name = primeiroNome;\n            objDados.last_name = sobrenome;\n\n            // Salva o objeto atualizado de volta\n            sessionStorage.setItem(storageKey, JSON.stringify(objDados));\n            console.log(\"✅ GTM: Nome mesclado aos dados existentes no Session Storage.\");\n\n        } catch (e) {\n            console.error(\"❌ GTM: Erro ao manipular Session Storage\", e);\n        }\n\n        // 4. AÇÃO: Empurra para o DataLayer com o objeto COMPLETO (existente + novo)\n        window.dataLayer = window.dataLayer || [];\n        window.dataLayer.push({\n            'event': 'user_data_ready',\n            'user_data': {\n                'address': {\n                    'first_name': objDados.first_name,\n                    'last_name': objDados.last_name\n                }\n                // Nota: Se quiser enviar os outros dados (email/tel) que já estavam salvos\n                // para o DataLayer também, você precisaria mapeá-los aqui manualmente\n                // ou enviar o objeto todo, dependendo da estrutura do seu GA4.\n            }\n        });\n    }\n})();\n</script>"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "supportDocumentWrite",
                        "value": "false"
                    }
                ],
                "fingerprint": "1769090938875",
                "firingTriggerId": [
                    "36"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "43",
                "name": "Vinculador de conversões",
                "type": "gclidw",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "enableCrossDomain",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "linkerDomains",
                        "value": "autocerto.com, fertilidade.org, nicochat.com, nuancielo.com.br, simoneandrade.com, xtracker.com.br"
                    }
                ],
                "fingerprint": "1769090938903",
                "firingTriggerId": [
                    "2147479573"
                ],
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "52",
                "name": "03 - Meta - Contact",
                "type": "cvt_KFNBV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "disablePushState",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventId",
                        "value": "{{Unique Event ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventNameStandard",
                        "value": "Contact"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "pixelIds",
                        "value": "{{const - meta_pixel_id}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "objectPropertiesFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "consent",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableDataLayerMapping",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "inheritEventName",
                        "value": "override"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "disableAutoConfig",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "runInitOnce",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableConsentMode",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEdvancedMatching",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dpoLDU",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "standard"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "userDataFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEventEnhancement",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "storeUserDataHashed",
                        "value": "true"
                    }
                ],
                "fingerprint": "1769090938904",
                "firingTriggerId": [
                    "46",
                    "51",
                    "50"
                ],
                "parentFolderId": "48",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "57",
                "name": "04 - Meta - Schedule",
                "type": "cvt_KFNBV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "disablePushState",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventId",
                        "value": "{{Unique Event ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventNameStandard",
                        "value": "Schedule"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "userDataList",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "em"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.email}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "ph"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.phone}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "fn"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.first_name}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "ln"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.last_name}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "pixelIds",
                        "value": "{{const - meta_pixel_id}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "objectPropertiesFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "consent",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableDataLayerMapping",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "inheritEventName",
                        "value": "override"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "disableAutoConfig",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "runInitOnce",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableConsentMode",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEdvancedMatching",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dpoLDU",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "standard"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "userDataFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEventEnhancement",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "storeUserDataHashed",
                        "value": "true"
                    }
                ],
                "fingerprint": "1769090938904",
                "firingTriggerId": [
                    "55"
                ],
                "parentFolderId": "48",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "61",
                "name": "0 - Tag do Google",
                "type": "googtag",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "tagId",
                        "value": "{{00 | Tag - Google}}"
                    },
                    {
                        "type": "LIST",
                        "key": "configSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "send_page_view"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "false"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "server_container_url"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{00 - URL | SERVER STAPE}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "first_party_collection"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "true"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938904",
                "firingTriggerId": [
                    "2147479553"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "63",
                "name": "0 - Google Ads User-provided Data Event",
                "type": "awud",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "userDataVariable",
                        "value": "{{ga4 - user_provided_data}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableConversionLinker",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "conversionId",
                        "value": "{{GADS _ID}}"
                    }
                ],
                "fingerprint": "1769090938904",
                "firingTriggerId": [
                    "2147479553"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "67",
                "name": "03 - DT - contact",
                "type": "cvt_MBTSV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "add_data_layer",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_type",
                        "value": "auto"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_consent_state",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "richsstsse",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "data_tag_load_script_url",
                        "value": "https://stapecdn.com/dtag/v8.js"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common_cookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "protocol_version",
                        "value": "2"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_type",
                        "value": "standard"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_name_standard",
                        "value": "contact"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "gtm_server_domain",
                        "value": "{{const - server_container_url}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_path",
                        "value": "/data"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "useFetchInsteadOfXHR",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "custom_data",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "event_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Unique Event ID}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938933",
                "firingTriggerId": [
                    "46",
                    "51",
                    "50"
                ],
                "parentFolderId": "66",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "70",
                "name": "03 - GA4 - contact",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_data"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{ga4 - user_provided_data}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "contact"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementIdOverride",
                        "value": "{{const - ga4_measurement_id}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventSettingsVariable",
                        "value": "{{ga4 - shared_event_settings}}"
                    }
                ],
                "fingerprint": "1769090938933",
                "firingTriggerId": [
                    "46",
                    "51",
                    "50"
                ],
                "parentFolderId": "3",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "71",
                "name": "01 - Meta - PageView",
                "type": "cvt_KFNBV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "disablePushState",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventId",
                        "value": "{{Unique Event ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventNameStandard",
                        "value": "PageView"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "pixelIds",
                        "value": "{{const - meta_pixel_id}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "objectPropertiesFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "consent",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableDataLayerMapping",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "inheritEventName",
                        "value": "override"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "disableAutoConfig",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "runInitOnce",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableConsentMode",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEdvancedMatching",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dpoLDU",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "standard"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "userDataFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEventEnhancement",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "storeUserDataHashed",
                        "value": "true"
                    }
                ],
                "fingerprint": "1769090938933",
                "firingTriggerId": [
                    "31"
                ],
                "parentFolderId": "48",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "77",
                "name": "04 - DT - schedule",
                "type": "cvt_MBTSV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "add_data_layer",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_type",
                        "value": "auto"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_consent_state",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "richsstsse",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "data_tag_load_script_url",
                        "value": "https://stapecdn.com/dtag/v8.js"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common_cookie",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "user_data",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "first_name"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.first_name}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "last_name"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.last_name}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "email_address"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.email}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "phone_number"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.phone}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "protocol_version",
                        "value": "2"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_type",
                        "value": "standard"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_name_standard",
                        "value": "schedule"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "gtm_server_domain",
                        "value": "{{const - server_container_url}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_path",
                        "value": "/data"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "useFetchInsteadOfXHR",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "custom_data",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "event_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Unique Event ID}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938933",
                "firingTriggerId": [
                    "55"
                ],
                "parentFolderId": "66",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "81",
                "name": "0 - GA4 - _Config",
                "type": "googtag",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "tagId",
                        "value": "{{const - ga4_measurement_id}}"
                    },
                    {
                        "type": "LIST",
                        "key": "configSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "server_container_url"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{const - server_container_url}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "send_page_view"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "false"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938937",
                "firingTriggerId": [
                    "2147479573"
                ],
                "parentFolderId": "3",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "82",
                "name": "04 - GA4 - schedule",
                "type": "gaawe",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "sendEcommerceData",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_data"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{ga4 - user_provided_data}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "schedule"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "measurementIdOverride",
                        "value": "{{const - ga4_measurement_id}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventSettingsVariable",
                        "value": "{{ga4 - shared_event_settings}}"
                    }
                ],
                "fingerprint": "1769090938937",
                "firingTriggerId": [
                    "55"
                ],
                "parentFolderId": "3",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "83",
                "name": "01 - DT - page_view",
                "type": "cvt_MBTSV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "add_data_layer",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_type",
                        "value": "auto"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_consent_state",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "richsstsse",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "data_tag_load_script_url",
                        "value": "https://stapecdn.com/dtag/v8.js"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common_cookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "protocol_version",
                        "value": "2"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_type",
                        "value": "standard"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_name_standard",
                        "value": "page_view"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "gtm_server_domain",
                        "value": "{{const - server_container_url}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_path",
                        "value": "/data"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "useFetchInsteadOfXHR",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "custom_data",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "event_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Unique Event ID}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938937",
                "firingTriggerId": [
                    "31"
                ],
                "parentFolderId": "66",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "84",
                "name": "0 - Clarity",
                "type": "html",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "html",
                        "value": "<script type=\"text/javascript\">\n    (function(c,l,a,r,i,t,y){\n        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n        t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n    })(window, document, \"clarity\", \"script\", \"varieavel\");\n</script>"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "supportDocumentWrite",
                        "value": "false"
                    }
                ],
                "fingerprint": "1769090938937",
                "firingTriggerId": [
                    "2147479553"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "85",
                "name": "02 - Meta - Lead",
                "type": "cvt_KFNBV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "disablePushState",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventId",
                        "value": "{{Unique Event ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventNameStandard",
                        "value": "Lead"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "userDataList",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "em"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.email}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "ph"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.phone}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "fn"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.first_name}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "ln"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.last_name}}"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "pixelIds",
                        "value": "{{const - meta_pixel_id}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "objectPropertiesFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "consent",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableDataLayerMapping",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "inheritEventName",
                        "value": "override"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "disableAutoConfig",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "runInitOnce",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableConsentMode",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEdvancedMatching",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dpoLDU",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "eventName",
                        "value": "standard"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "userDataFromVariable",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "enableEventEnhancement",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "storeUserDataHashed",
                        "value": "true"
                    }
                ],
                "fingerprint": "1769090938937",
                "firingTriggerId": [
                    "11"
                ],
                "parentFolderId": "48",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "88",
                "name": "00 - UTM PERSIST",
                "type": "cvt_241502212_80",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "originalLocationOption",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "urlCookieName",
                        "value": "__gtm_campaign_url"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "triggerParameters",
                        "value": "utm_source,utm_medium,utm_campaign,utm_term,utm_content,utm_id,gclid,fbclid"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "referrerCookieName",
                        "value": "__gtm_referrer"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "storeInCookieOption",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "dataLayerName",
                        "value": "dataLayer"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "dataLayerKey",
                        "value": "originalLocation"
                    }
                ],
                "fingerprint": "1769090938947",
                "firingTriggerId": [
                    "2147479553"
                ],
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "89",
                "name": "0 - Tag do Google AW-0",
                "type": "googtag",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "tagId",
                        "value": "AW-0"
                    }
                ],
                "fingerprint": "1769090938947",
                "firingTriggerId": [
                    "2147479573"
                ],
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "tagId": "94",
                "name": "02 - DT - generate_lead",
                "type": "cvt_MBTSV",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "add_data_layer",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_type",
                        "value": "auto"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_consent_state",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "dataLayerEventPush",
                        "value": "false"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "richsstsse",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "data_tag_load_script_url",
                        "value": "https://stapecdn.com/dtag/v8.js"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common_cookie",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "user_data",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "first_name"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.first_name}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "last_name"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.last_name}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "email_address"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.email}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "phone_number"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{jsv - gtm_user_data.phone}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "user_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Hash - External Id}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "protocol_version",
                        "value": "2"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_type",
                        "value": "standard"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "event_name_standard",
                        "value": "generate_lead"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "gtm_server_domain",
                        "value": "{{const - server_container_url}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "request_path",
                        "value": "/data"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "add_common",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "useFetchInsteadOfXHR",
                        "value": "false"
                    },
                    {
                        "type": "LIST",
                        "key": "custom_data",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "event_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{Unique Event ID}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "gclid"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{URL - gclid}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "fbc"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{fbc}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "fbp"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{fbp}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "utm_content"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{06-UTM - utm_content}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "utm_medium"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{06-UTM - utm_medium}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "name",
                                        "value": "utm_source"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "{{06-UTM - utm_source}}"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "transformation",
                                        "value": "none"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "store",
                                        "value": "none"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938947",
                "firingTriggerId": [
                    "11"
                ],
                "parentFolderId": "66",
                "tagFiringOption": "ONCE_PER_EVENT",
                "monitoringMetadata": {
                    "type": "MAP"
                },
                "consentSettings": {
                    "consentStatus": "NOT_SET"
                }
            }
        ],
        "trigger": [
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "11",
                "name": "XT | user_data_ready",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "user_data_ready"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938871"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "31",
                "name": "dom - page_view",
                "type": "DOM_READY",
                "fingerprint": "1769090938875"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "36",
                "name": "XT | Event _ Form",
                "type": "CUSTOM_EVENT",
                "customEventFilter": [
                    {
                        "type": "EQUALS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{_event}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "form_submit"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938875"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "42",
                "name": "Page URL / Obrigado",
                "type": "DOM_READY",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page Path}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "/Obrigado"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938903"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "46",
                "name": "click - element mailto/tel",
                "type": "CLICK",
                "filter": [
                    {
                        "type": "MATCH_REGEX",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Click Element}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "mailto:|tel:"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938904"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "50",
                "name": "click - whattsapp - Icon",
                "type": "CLICK",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Click URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "whatsapp"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938904"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "51",
                "name": "click - whattsapp",
                "type": "CLICK",
                "filter": [
                    {
                        "type": "CONTAINS",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Click URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "api.whatsapp"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938904"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "55",
                "name": "dom - schedule_event_page",
                "type": "DOM_READY",
                "filter": [
                    {
                        "type": "MATCH_REGEX",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "https://sgtm.example.com/16"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938904"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "64",
                "name": "historyChange - lead_event_page",
                "type": "HISTORY_CHANGE",
                "filter": [
                    {
                        "type": "MATCH_REGEX",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "https://sgtm.example.com/13"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938904"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "68",
                "name": "Click - Element buttonEmailProposta",
                "type": "CLICK",
                "filter": [
                    {
                        "type": "CSS_SELECTOR",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Click Element}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "button.btn.btn-primary#buttonEmailProposta"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938933"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "69",
                "name": "dom - lead_event_page",
                "type": "DOM_READY",
                "filter": [
                    {
                        "type": "MATCH_REGEX",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "https://sgtm.example.com/13"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938933"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "triggerId": "79",
                "name": "historyChange - schedule_event_page",
                "type": "HISTORY_CHANGE",
                "filter": [
                    {
                        "type": "MATCH_REGEX",
                        "parameter": [
                            {
                                "type": "TEMPLATE",
                                "key": "arg0",
                                "value": "{{Page URL}}"
                            },
                            {
                                "type": "TEMPLATE",
                                "key": "arg1",
                                "value": "https://sgtm.example.com/16"
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938933"
            }
        ],
        "variable": [
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "4",
                "name": "const - ga4_measurement_id",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "(G-XXXXXXXX)"
                    }
                ],
                "fingerprint": "1769091016921",
                "parentFolderId": "3",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "7",
                "name": "jsv - sessionStorage.gtm_user_data",
                "type": "j",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "sessionStorage.gtm_user_data"
                    }
                ],
                "fingerprint": "1769090938871",
                "parentFolderId": "6"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "8",
                "name": "jsv - gtm_user_data.phone",
                "type": "cvt_WP5V7",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "path",
                        "value": "phone"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "obj",
                        "value": "{{jsv - sessionStorage.gtm_user_data}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "stringify",
                        "value": "false"
                    }
                ],
                "fingerprint": "1769090938871",
                "parentFolderId": "6"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "9",
                "name": "jsv - gtm_user_data.email",
                "type": "cvt_WP5V7",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "path",
                        "value": "email"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "obj",
                        "value": "{{jsv - sessionStorage.gtm_user_data}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "stringify",
                        "value": "false"
                    }
                ],
                "fingerprint": "1769090938871",
                "parentFolderId": "6"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "10",
                "name": "ga4 - user_provided_data",
                "type": "awec",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "mode",
                        "value": "MANUAL"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "phone_number",
                        "value": "{{jsv - gtm_user_data.phone}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "email",
                        "value": "{{jsv - gtm_user_data.email}}"
                    }
                ],
                "fingerprint": "1769090938871",
                "parentFolderId": "3"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "13",
                "name": "const - server_container_url",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "https://sst.suaempresa.com.br"
                    }
                ],
                "fingerprint": "1769090995847",
                "parentFolderId": "12",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "14",
                "name": "ga4 - shared_event_settings",
                "type": "gtes",
                "parameter": [
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "server_container_url"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{const - server_container_url}}"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938871",
                "parentFolderId": "3"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "16",
                "name": "01 - JSP - Nome",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  var input = document.querySelector('input[name=\"form_fields[nome]\"]');\n  return input ? input.value : undefined;\n}"
                    }
                ],
                "fingerprint": "1769090938871",
                "formatValue": {
                    "caseConversionType": "LOWERCASE"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "17",
                "name": "02 - regEx - Nome",
                "type": "remm",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "input",
                        "value": "{{01 - JSP - Nome}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "fullMatch",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "replaceAfterMatch",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "ignoreCase",
                        "value": "true"
                    },
                    {
                        "type": "LIST",
                        "key": "map",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "key",
                                        "value": "(.*)\\s(.*)$"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "$1"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938871",
                "formatValue": {
                    "caseConversionType": "LOWERCASE"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "18",
                "name": "fbp",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "_fbp"
                    }
                ],
                "fingerprint": "1769090938871",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "19",
                "name": "01 - JSP - E-mail",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  var input = document.querySelector('input[name=\"form_fields[email]\"]');\n  return input ? input.value : undefined;\n}"
                    }
                ],
                "fingerprint": "1769090938871",
                "formatValue": {
                    "caseConversionType": "LOWERCASE"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "22",
                "name": "Event ID",
                "type": "cvt_M63B8",
                "fingerprint": "1769090938875",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "23",
                "name": "Hash - External Id",
                "type": "cvt_241502212_20",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "output64",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "dataStr",
                        "value": "{{Event ID}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "seed",
                        "value": "0"
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "24",
                "name": "fbc",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "_fbc"
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "25",
                "name": "01 - JSP - Celular",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  // Seleciona o campo\n  var input = document.querySelector('input[name=\"form_fields[tel]\"]');\n  \n  // Se o campo não existir ou estiver vazio, retorna undefined\n  if (!input || !input.value) {\n    return undefined;\n  }\n\n  var telefone = input.value;\n\n  // 1. Remove tudo que NÃO for número (parenteses, traços, espaços, +)\n  var apenasNumeros = telefone.replace(/\\D/g, '');\n\n  // 2. Formatação para Meta Ads (DDI + DDD + Numero)\n  // Lógica: Se tiver 10 ou 11 dígitos, assume que é BR e adiciona o 55.\n  if (apenasNumeros.length === 10 || apenasNumeros.length === 11) {\n      return '55' + apenasNumeros;\n  }\n\n  // Se já tiver 12 ou 13 digitos (já tem DDI), retorna como está\n  return apenasNumeros;\n}"
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {
                    "caseConversionType": "LOWERCASE"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "26",
                "name": "02 - regEx - Sobrenome",
                "type": "remm",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "setDefaultValue",
                        "value": "false"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "input",
                        "value": "{{01 - JSP - Nome}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "fullMatch",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "replaceAfterMatch",
                        "value": "true"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "ignoreCase",
                        "value": "true"
                    },
                    {
                        "type": "LIST",
                        "key": "map",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "key",
                                        "value": "(.*)\\s(.*)$"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "value",
                                        "value": "$2"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {
                    "caseConversionType": "LOWERCASE"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "27",
                "name": "Events _ CRM",
                "type": "gtes",
                "parameter": [
                    {
                        "type": "LIST",
                        "key": "eventSettingsTable",
                        "list": [
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.fbc"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{fbc}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.fbp"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{fbp}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.nome"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{02 - regEx - Nome}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.sobrenome"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{02 - regEx - Sobrenome}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.email"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{01 - JSP - E-mail}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.telefone"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{01 - JSP - Celular}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.external_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{Hash - External Id}}"
                                    }
                                ]
                            },
                            {
                                "type": "MAP",
                                "map": [
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameter",
                                        "value": "user_track.event_id"
                                    },
                                    {
                                        "type": "TEMPLATE",
                                        "key": "parameterValue",
                                        "value": "{{Event ID}}"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "fingerprint": "1769090938875"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "28",
                "name": "01 - Cookie Primário UTM",
                "type": "k",
                "parameter": [
                    {
                        "type": "BOOLEAN",
                        "key": "decodeCookie",
                        "value": "true"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "name",
                        "value": "__gtm_campaign_url"
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "29",
                "name": "06-UTM - fbclid",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "fbclid"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "customUrlSource",
                        "value": "{{01 - Cookie Primário UTM}}"
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "30",
                "name": "cont - Conversão de Formulário",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "ID de Conversão"
                    }
                ],
                "fingerprint": "1769091164800",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "32",
                "name": "00 - URL | SERVER STAPE",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "https://api.simoneandrade.com"
                    }
                ],
                "fingerprint": "1769090938875",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "38",
                "name": "00 - GAds | Compra",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "0"
                    }
                ],
                "fingerprint": "1769090938876",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "39",
                "name": "01 -JSP - timetampa for second",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\nreturn Math.round(new Date().getTime() / 1000);\n}"
                    }
                ],
                "fingerprint": "1769090938876",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "41",
                "name": "00 - GAds | ID de Conversão",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "0"
                    }
                ],
                "fingerprint": "1769090938903",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "44",
                "name": "01 -JSP - timetampa day",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  var currentDate = new Date();\n  var date = currentDate.toISOString().slice(0, 10);\n  var time = currentDate.toTimeString().slice(0, 8);\n  return date + ' ' + time;\n}\n"
                    }
                ],
                "fingerprint": "1769090938904",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "45",
                "name": "06-UTM - utm_campaign",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_campaign"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "customUrlSource",
                        "value": "{{01 - Cookie Primário UTM}}"
                    }
                ],
                "fingerprint": "1769090938904",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "47",
                "name": "Unique Event ID",
                "type": "cvt_M63B8",
                "fingerprint": "1769090938904",
                "parentFolderId": "12"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "49",
                "name": "const - meta_pixel_id",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "O ID do seu Pixel da Meta"
                    }
                ],
                "fingerprint": "1769091033107",
                "parentFolderId": "48",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "53",
                "name": "GADS _ID",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "AW-123456789"
                    }
                ],
                "fingerprint": "1769091060470",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "54",
                "name": "jsv - gtm_user_data.first_name",
                "type": "cvt_WP5V7",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "path",
                        "value": "first_name"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "obj",
                        "value": "{{jsv - sessionStorage.gtm_user_data}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "stringify",
                        "value": "false"
                    }
                ],
                "fingerprint": "1769090938904",
                "parentFolderId": "6"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "56",
                "name": "jsv - gtm_user_data.last_name",
                "type": "cvt_WP5V7",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "path",
                        "value": "last_name"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "obj",
                        "value": "{{jsv - sessionStorage.gtm_user_data}}"
                    },
                    {
                        "type": "BOOLEAN",
                        "key": "stringify",
                        "value": "false"
                    }
                ],
                "fingerprint": "1769090938904",
                "parentFolderId": "6"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "58",
                "name": "Undefined",
                "type": "uv",
                "fingerprint": "1769090938904",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "59",
                "name": "URL - gclid",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "gclid"
                    }
                ],
                "fingerprint": "1769090938904",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "60",
                "name": "00 | Tag - Google",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "G-27KH6Q3LBP"
                    }
                ],
                "fingerprint": "1769090938904",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "62",
                "name": "00 - FB - Conjunto de Dados",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "741661275108276"
                    }
                ],
                "fingerprint": "1769090938904",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "72",
                "name": "01 - JSP - Celular GADS",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "+{{01 - JSP - Celular}}"
                    }
                ],
                "fingerprint": "1769090938933",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "73",
                "name": "00 - GAds Data User",
                "type": "awec",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "mode",
                        "value": "MANUAL"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "phone_number",
                        "value": "{{01 - JSP - Celular GADS}}"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "email",
                        "value": "{{01 - JSP - E-mail}}"
                    }
                ],
                "fingerprint": "1769090938933",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "74",
                "name": "utm_source",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_source"
                    }
                ],
                "fingerprint": "1769090938933",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "75",
                "name": "utm_medium",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_medium"
                    }
                ],
                "fingerprint": "1769090938933",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "76",
                "name": "const - Conversão de Whatsapp",
                "type": "c",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "value",
                        "value": "ID de Conversão"
                    }
                ],
                "fingerprint": "1769091209501",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "78",
                "name": "06-UTM - utm_source",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_source"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "customUrlSource",
                        "value": "{{01 - Cookie Primário UTM}}"
                    }
                ],
                "fingerprint": "1769090938933",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "87",
                "name": "utm_content",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_content"
                    }
                ],
                "fingerprint": "1769090938947",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "90",
                "name": "CJS - Input Nome",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n    var inputNome = document.getElementById(\"nome\");\n    // Retorna o valor se o campo existir, ou undefined se não encontrar\n    return inputNome ? inputNome.value : undefined;\n}"
                    }
                ],
                "fingerprint": "1769090938947",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "91",
                "name": "06-UTM - utm_content",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_content"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "customUrlSource",
                        "value": "{{01 - Cookie Primário UTM}}"
                    }
                ],
                "fingerprint": "1769090938947",
                "formatValue": {}
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "92",
                "name": "05 - JSP | CAP - E-mail",
                "type": "jsm",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "javascript",
                        "value": "function() {\n  var EMAIL;\n  \n  if (document.getElementsByName(\"form_fields[email]\")[0]) {\n    EMAIL = document.getElementsByName(\"form_fields[email]\")[0].value;\n  } else if (document.getElementsByName(\"email\")[0]) {\n    EMAIL = document.getElementsByName(\"email\")[0].value;\n  }\n  \n  return EMAIL;\n}"
                    }
                ],
                "fingerprint": "1769090938947",
                "formatValue": {
                    "caseConversionType": "LOWERCASE"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "variableId": "93",
                "name": "06-UTM - utm_medium",
                "type": "u",
                "parameter": [
                    {
                        "type": "TEMPLATE",
                        "key": "component",
                        "value": "QUERY"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "queryKey",
                        "value": "utm_medium"
                    },
                    {
                        "type": "TEMPLATE",
                        "key": "customUrlSource",
                        "value": "{{01 - Cookie Primário UTM}}"
                    }
                ],
                "fingerprint": "1769090938947",
                "formatValue": {}
            }
        ],
        "folder": [
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "folderId": "3",
                "name": "[Stape] GA4",
                "fingerprint": "1769090938868"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "folderId": "6",
                "name": "[Stape] Data",
                "fingerprint": "1769090938871"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "folderId": "12",
                "name": "[Stape] Auxiliary",
                "fingerprint": "1769090938871"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "folderId": "48",
                "name": "[Stape] Meta",
                "fingerprint": "1769090938904"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "folderId": "66",
                "name": "[Stape] Data Tags",
                "fingerprint": "1769090938932"
            }
        ],
        "builtInVariable": [
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "PAGE_URL",
                "name": "Page URL"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "PAGE_HOSTNAME",
                "name": "Page Hostname"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "PAGE_PATH",
                "name": "Page Path"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "REFERRER",
                "name": "Referrer"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "EVENT",
                "name": "Event"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "CLICK_ELEMENT",
                "name": "Click Element"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "CLICK_CLASSES",
                "name": "Click Classes"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "CLICK_ID",
                "name": "Click ID"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "CLICK_URL",
                "name": "Click URL"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "CLICK_TEXT",
                "name": "Click Text"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "FORM_ELEMENT",
                "name": "Form Element"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "FORM_CLASSES",
                "name": "Form Classes"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "type": "FORM_ID",
                "name": "Form ID"
            }
        ],
        "fingerprint": "1769091801105",
        "tagManagerUrl": "https://tagmanager.google.com/#/versions/accounts/6335554172/containers/241502212/versions/0?apiLink=version",
        "customTemplate": [
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "5",
                "name": "Extract From JSON",
                "fingerprint": "1769090938868",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"MACRO\",\n  \"id\": \"cvt_WP5V7\",\n  \"version\": 1,\n  \"categories\": [\n    \"UTILITY\"\n  ],\n  \"displayName\": \"Extract From JSON\",\n  \"description\": \"Extract element from JSON object or valid JSON string by path (using dot-notation). Useful for parsing consent cookie values and other settings without using Custom JS variables\",\n  \"containerContexts\": [\n    \"WEB\"\n  ],\n  \"brand\": {\n    \"displayName\": \"mbaersch\",\n    \"id\": \"github.com_mbaersch\"\n  }\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"obj\",\n    \"displayName\": \"JSON Input\",\n    \"simpleValueType\": true,\n    \"help\": \"Variable containing JSON object or valid JSON string\",\n    \"valueValidators\": [\n      {\n        \"type\": \"NON_EMPTY\"\n      }\n    ],\n    \"alwaysInSummary\": true\n  },\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"path\",\n    \"displayName\": \"Path to Element\",\n    \"simpleValueType\": true,\n    \"help\": \"Examples: products[0].price, propertyName, property.subProperty\",\n    \"alwaysInSummary\": true,\n    \"valueValidators\": [\n      {\n        \"type\": \"NON_EMPTY\"\n      }\n    ]\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"stringify\",\n    \"checkboxText\": \"Convert Object Results to String\",\n    \"simpleValueType\": true\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst JSON = require('JSON');\n\nvar path = data.path || \"\";\nvar obj = data.obj || {};\n\nif (typeof(obj) === \"string\") obj = JSON.parse(obj); \n \nvar res = path.split('.').reduce(function(o, k) {\n  var ind = k.indexOf('[');\n  var ind2 = k.indexOf(']');\n  if (ind >=0 && ind2 > ind) {\n    var kOrg = k;\n    k = kOrg.substring(0,ind);\n    var key = kOrg.substring(ind+1, ind2);\n    if (k != \"\")\n      return o && o[k][key];\n    else \n      return o && o[key];\n  } else return o && o[k];\n}, obj);\n\nif ((typeof(res) === \"object\") && data.stringify) res = JSON.stringify(res);\n\nreturn res;\n\n\n___TESTS___\n\nscenarios:\n- name: testExtractionAsString1\n  code: |-\n    let variableResult = runCode(mockData);\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isEqualTo(\"objv2Value\");\n- name: testExtractionAsObject\n  code: |-\n    mockData.stringify = false;\n    mockData.path = 'someObject';\n\n    let variableResult = runCode(mockData);\n    //expected result object\n    let rs = {\"objv1\": \"objv1Value\", \"objv2\": \"objv2Value\"};\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isEqualTo(rs);\n- name: testExtractionAsString2\n  code: |-\n    mockData.path = 'someObject';\n\n    let variableResult = runCode(mockData);\n    //expected result string\n    let rs = '{\"objv1\":\"objv1Value\",\"objv2\":\"objv2Value\"}';\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isEqualTo(rs);\n- name: testExtractionFromArray\n  code: |-\n    mockData.path = 'someArray[0].prop1';\n\n    let variableResult = runCode(mockData);\n    //expected result string\n    let rs = \"prop0_1Value\";\n\n    // Verify that the variable returns a result.\n    assertThat(variableResult).isEqualTo(rs);\nsetup: |-\n  var mockData = {\n    obj: '{\"something\": \"someValue\", \"someObject\": {\"objv1\": \"objv1Value\", \"objv2\": \"objv2Value\"}, \"somethingElse\": false, \"someArray\":[{\"prop1\": \"prop0_1Value\", \"prop2\": \"prop0_2Value\"},{\"prop1\": \"prop1_1Value\", \"prop2\": \"prop1_2Value\"}]}',\n    path: \"someObject.objv2\",\n    stringify: true\n  };\n\n\n___NOTES___\n\nCreated on 8.10.2021, 19:24:07\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "mbaersch",
                    "repository": "extract-json-web",
                    "version": "87bf28f4057ed8de56aa6d72c9d9be55b84b3e77",
                    "signature": "ee7671730e37d77d85a3135ea34e8a3756adabe2adb8da57f6f16e04be94321e",
                    "galleryTemplateId": "WP5V7"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "20",
                "name": "cyrb53 Hasher",
                "fingerprint": "1769090938871",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"MACRO\",\n  \"id\": \"cvt_temp_public_id\",\n  \"version\": 1,\n  \"securityGroups\": [],\n  \"displayName\": \"cyrb53 Hasher\",\n  \"description\": \"hash strings using a cyrb53 implementation (standard ascii characters only)\",\n  \"containerContexts\": [\n    \"WEB\"\n  ],\n  \"brand\": {\n    \"displayName\": \"mbaersch\",\n    \"id\": \"github.com_mbaersch\"\n  }\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"dataStr\",\n    \"displayName\": \"Data String\",\n    \"simpleValueType\": true\n  },\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"seed\",\n    \"displayName\": \"Seed (optional)\",\n    \"simpleValueType\": true,\n    \"valueValidators\": [\n      {\n        \"type\": \"NON_EMPTY\"\n      },\n      {\n        \"type\": \"NON_NEGATIVE_NUMBER\"\n      }\n    ],\n    \"defaultValue\": 0\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"output64\",\n    \"checkboxText\": \"64-bit Output\",\n    \"simpleValueType\": true,\n    \"defaultValue\": true\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\n//no String.prototype.charCodeAt in Sandbox :(\nfunction charCodeAt(str) {\n  const asciiString = ' !\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n  const asciiOffset = 32;\n  return asciiString.indexOf(str) + asciiOffset;\n}\n\n  \n//polyfills for other missing String / Math standard methods...\nfunction imul(a, b) {\n  var aHi = (a >>> 16) & 65535;\n  var aLo = a & 65535;\n  var bHi = (b >>> 16) & 65535;\n  var bLo = b & 65535;\n  return ((aLo * bLo) + (((aHi * bLo + aLo * bHi) << 16) >>> 0) | 0);\n}\n\nfunction padStart(str,targetLength,padString) {\n  targetLength = targetLength>>0; \n  padString = padString || ' ';\n  if (str.length > targetLength) {\n    return str;\n  } else {\n    targetLength = targetLength-str.length;\n    if (targetLength > padString.length) {\n      padString += padString.repeat(targetLength/padString.length); \n    }\n    return padString.slice(0,targetLength) + str;\n  }\n}\n\n//cyrb53, adjusted for the limited JavaScript Sandbox capabilites  \n//find original function at https://stackoverflow.com/a/52171480\nfunction cyrb53(str, seed, fullOutput) {\n  seed = seed || 0;\n  let h1 = 3735928559 ^ seed, h2 = 1103547991 ^ seed;\n  for (let i = 0, ch; i < str.length; i++) {\n    ch = charCodeAt(str[i]);\n    h1 = imul(h1 ^ ch, 2654435761);\n    h2 = imul(h2 ^ ch, 1597334677);\n  }\n  h1 = imul(h1 ^ (h1>>>16), 2246822507) ^ imul(h2 ^ (h2>>>13), 3266489909);\n  h2 = imul(h2 ^ (h2>>>16), 2246822507) ^ imul(h1 ^ (h1>>>13), 3266489909);\n  \n  if (fullOutput == true)\n    return padStart((h2>>>0).toString(16), 8,'0') + padStart((h1>>>0).toString(16), 8,'0');\n  else \n    return 4294967296 * (2097151 & h2) + (h1>>>0);\n}\n\nreturn cyrb53(data.dataStr, data.seed, data.output64);\n\n\n___TESTS___\n\nscenarios:\n- name: check example values from Stack Overflow answer\n  code: |-\n    let variableResult = runCode({dataStr: 'a', seed: 0, output64: true});\n    assertThat(variableResult).isEqualTo('501c2ba782c97901');\n\n    variableResult = runCode({dataStr: 'b', seed: 0, output64: true});\n    assertThat(variableResult).isEqualTo('459eda5bc254d2bf');\n\n    variableResult = runCode({dataStr: 'revenge', seed: 0, output64: true});\n    assertThat(variableResult).isEqualTo('fbce64cc3b748385');\n\n    variableResult = runCode({dataStr: 'revenue', seed: 0, output64: true});\n    assertThat(variableResult).isEqualTo('fb1d85148d13f93a');\n\n    variableResult = runCode({dataStr: 'revenue', seed: 1, output64: true});\n    assertThat(variableResult).isEqualTo('76fee5e6598ccd5c');\n\n    variableResult = runCode({dataStr: 'revenue', seed: 2, output64: true});\n    assertThat(variableResult).isEqualTo('1f672e2831253862');\n\n    variableResult = runCode({dataStr: 'revenue', seed: 3, output64: true});\n    assertThat(variableResult).isEqualTo('2b10de31708e6ab7');\nsetup: ''\n\n\n___NOTES___\n\nCreated on 30.12.2021, 13:03:46\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "mbaersch",
                    "repository": "cyrb53-hasher-web",
                    "version": "d57443af1697688a4b8618862dce1b44d3b6311d",
                    "signature": "72a9b5bbb3e2b21c6ce26aaf6f919d4791b6ba36090fe082c7e32b14c1ca852c"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "21",
                "name": "Unique Event ID",
                "fingerprint": "1769090938872",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"MACRO\",\n  \"id\": \"cvt_M63B8\",\n  \"version\": 1,\n  \"displayName\": \"Unique Event ID\",\n  \"description\": \"Generates unique event id\",\n  \"categories\": [\n    \"UTILITY\"\n  ],\n  \"containerContexts\": [\n    \"WEB\"\n  ],\n  \"brand\": {\n    \"displayName\": \"stape-io\",\n    \"id\": \"github.com_stape-io\"\n  }\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst copyFromDataLayer = require('copyFromDataLayer');\nconst setInWindow = require('setInWindow');\nconst copyFromWindow = require('copyFromWindow');\nconst getTimestampMillis = require('getTimestampMillis');\nconst generateRandom = require('generateRandom');\n\n\nreturn getBrowserId() + '_' + getPageLoadId() + getGtmUniqueEventId();\n\nfunction getGtmUniqueEventId() {\n    let gtmId = copyFromDataLayer('gtm.uniqueEventId')  || 0;\n    return gtmId >= 0 ? gtmId : '00';\n}\n\nfunction getBrowserId() {\n    let gtmBrowserId =  copyFromWindow('gtmBrowserId');\n\n    if (!gtmBrowserId) {\n        gtmBrowserId = getTimestampMillis() + generateRandom(100000, 999999);\n        setInWindow('gtmBrowserId', gtmBrowserId, false);\n    }\n\n    return gtmBrowserId;\n}\n\nfunction getPageLoadId() {\n  let eventId = copyFromWindow('gtmPageLoadId');\n\n  if (!eventId) {\n    eventId = getTimestampMillis() + generateRandom(100000, 999999);\n    setInWindow('gtmPageLoadId', eventId, false);\n  }\n\n  return eventId;\n}\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedKeys\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"specific\"\n          }\n        },\n        {\n          \"key\": \"keyPatterns\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"gtm.uniqueEventId\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"gtmPageLoadId\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"gtmBrowserId\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios: []\n\n\n___NOTES___\n\nCreated on 11/03/2021, 11:05:32\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "stape-io",
                    "repository": "unique-event-id-variable",
                    "version": "76498f16f1954b0286640d19eb6a1ddf2909e183",
                    "signature": "fe53a57c443dd898aa8ad7095fc9a32114fafa6af0eb66b1671338f69d9530be",
                    "galleryTemplateId": "M63B8"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "34",
                "name": "User Data Collector From Page",
                "fingerprint": "1769090938875",
                "templateData": "___INFO___\n\n{\n  \"type\": \"TAG\",\n  \"id\": \"cvt_temp_public_id\",\n  \"version\": 1,\n  \"securityGroups\": [],\n  \"displayName\": \"User Data Collector From Page\",\n  \"categories\": [\n    \"UTILITY\",\n    \"ADVERTISING\",\n    \"ANALYTICS\",\n    \"PERSONALIZATION\"\n  ],\n  \"brand\": {\n    \"id\": \"brand_dummy\",\n    \"displayName\": \"stape.io\",\n    \"thumbnail\": \"data:image/png;base64,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\"\n  },\n  \"description\": \"This tag automatically reads user PII (email, phone, name) from a webpage\\u0027s DOM. It intelligently identifies form fields, normalizes data, and can push results to a dataLayer or browser storage.\",\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"userDataGroup\",\n    \"displayName\": \"User Data to be Collected\",\n    \"groupStyle\": \"NO_ZIPPY\",\n    \"subParams\": [\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"email\",\n        \"checkboxText\": \"Email\",\n        \"simpleValueType\": true,\n        \"defaultValue\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"phone\",\n        \"checkboxText\": \"Phone\",\n        \"simpleValueType\": true,\n        \"defaultValue\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"city\",\n        \"checkboxText\": \"City\",\n        \"simpleValueType\": true,\n        \"defaultValue\": false\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"country\",\n        \"checkboxText\": \"Country\",\n        \"simpleValueType\": true,\n        \"defaultValue\": false\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"postalCode\",\n        \"checkboxText\": \"Postal Code\",\n        \"simpleValueType\": true,\n        \"defaultValue\": false\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"firstName\",\n        \"checkboxText\": \"First Name\",\n        \"simpleValueType\": true,\n        \"defaultValue\": false\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"lastName\",\n        \"checkboxText\": \"Last Name\",\n        \"simpleValueType\": true,\n        \"defaultValue\": false\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"extractionSettingsGroup\",\n    \"displayName\": \"Configuration\",\n    \"groupStyle\": \"ZIPPY_OPEN\",\n    \"subParams\": [\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"saveIntoStorage\",\n        \"checkboxText\": \"Save user_data information into the browser Storage\",\n        \"simpleValueType\": true,\n        \"subParams\": [\n          {\n            \"type\": \"GROUP\",\n            \"name\": \"saveIntoStorageGroup\",\n            \"subParams\": [\n              {\n                \"type\": \"SELECT\",\n                \"name\": \"saveIntoStorageType\",\n                \"displayName\": \"Storage Type\",\n                \"macrosInSelect\": true,\n                \"selectItems\": [\n                  {\n                    \"value\": \"session\",\n                    \"displayValue\": \"Session Storage\"\n                  },\n                  {\n                    \"value\": \"local\",\n                    \"displayValue\": \"Local Storage\"\n                  }\n                ],\n                \"simpleValueType\": true,\n                \"help\": \"Choose if the \\u003ci\\u003euser_data\\u003c/i\\u003e information will be stored in the \\u003ca href\\u003d\\\"https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\\\"\\u003eSession Storage\\u003c/a\\u003e or \\u003ca href\\u003d\\\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\\\"\\u003eLocal Storage\\u003c/a\\u003e.\",\n                \"defaultValue\": \"session\"\n              },\n              {\n                \"type\": \"TEXT\",\n                \"name\": \"saveIntoStorageKey\",\n                \"displayName\": \"Storage Key\",\n                \"simpleValueType\": true,\n                \"help\": \"The key that wiIl contain the data in the Storage.\\n\\u003cbr/\\u003e\\nIf not set, \\u003ci\\u003egtm_user_data\\u003c/i\\u003e will be used.\",\n                \"defaultValue\": \"gtm_user_data\"\n              }\n            ],\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"saveIntoStorage\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ]\n          }\n        ],\n        \"help\": \"If enabled, it will save the captured \\u003ci\\u003euser_data\\u003c/i\\u003e information to Session or Local Storage.\",\n        \"defaultValue\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"pushToDataLayer\",\n        \"checkboxText\": \"Push an event to the dataLayer with user_data information\",\n        \"simpleValueType\": true,\n        \"subParams\": [\n          {\n            \"type\": \"GROUP\",\n            \"name\": \"pushToDataLayerGroup\",\n            \"groupStyle\": \"NO_ZIPPY\",\n            \"subParams\": [\n              {\n                \"type\": \"TEXT\",\n                \"name\": \"pushToDataLayerEventName\",\n                \"displayName\": \"Data Layer Event Name\",\n                \"simpleValueType\": true,\n                \"help\": \"If not set, \\u003ci\\u003euser_data_detected\\u003c/i\\u003e will be used.\",\n                \"defaultValue\": \"user_data_detected\"\n              },\n              {\n                \"type\": \"TEXT\",\n                \"name\": \"pushToDataLayerDataLayerName\",\n                \"displayName\": \"Data Layer Array Name\",\n                \"simpleValueType\": true,\n                \"help\": \"If not set, \\u003ci\\u003edataLayer\\u003c/i\\u003e will be used.\",\n                \"defaultValue\": \"dataLayer\"\n              }\n            ],\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"pushToDataLayer\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ]\n          }\n        ],\n        \"help\": \"If enabled, the following event will be pushed to the data layer:\\n\\u003cbr/\\u003e\\n{\\n\\u003cbr/\\u003e\\n\\u0026nbsp;\\u0026nbsp;event: \\u003ci\\u003e{{eventName}}\\u003c/i\\u003e,\\n\\u003cbr/\\u003e\\n\\u0026nbsp;\\u0026nbsp;user_data: \\u003ci\\u003e{{userData object}}\\u003c/i\\u003e, \\n\\u003cbr/\\u003e\\n\\u0026nbsp;\\u0026nbsp;_clear: true\\n\\u003cbr/\\u003e\\n}\\n\\u003cbr/\\u003e\\n\\u003cbr/\\u003e\\nIt\\u0027s useful if you want to capture \\u003ci\\u003euser_data\\u003c/i\\u003e information after a specific data layer event occurs.\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"autoTrackSpecificClicks\",\n        \"checkboxText\": \"Automatically track clicks at specific type\\u003d\\\"submit\\\" button and input HTML elements\",\n        \"simpleValueType\": true,\n        \"subParams\": [\n          {\n            \"type\": \"GROUP\",\n            \"name\": \"autoTrackSpecificClicksGroup\",\n            \"subParams\": [\n              {\n                \"type\": \"TEXT\",\n                \"name\": \"autoTrackSpecificClicksSelector\",\n                \"displayName\": \"Auto Track Submit Clicks Override CSS Selector\",\n                \"simpleValueType\": true,\n                \"help\": \"If set, the click listener will listen for click at elements that match the specified CSS selector.\\n\\u003cbr/\\u003e\\nIf left blank, it will listen for clicks on type\\u003d\\\"submit\\\" \\u0026lt;button\\u0026gt; and \\u0026lt;input\\u0026gt; HTML elements.\\n\\u003cbr/\\u003e\\n\\u003cbr/\\u003e\\nDefault CSS Selector: \\u003ci\\u003ebutton[type\\u003d\\\"submit\\\"], input[type\\u003d\\\"submit\\\"]\\u003c/i\\u003e\"\n              }\n            ],\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"autoTrackSpecificClicks\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ]\n          }\n        ],\n        \"help\": \"If enabled, by default it will track clicks at all type\\u003d\\\"submit\\\" \\u0026lt;button\\u0026gt; and \\u0026lt;input\\u0026gt; HTML elements and try to detect \\u003ci\\u003euser_data\\u003c/i\\u003e information.\",\n        \"defaultValue\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"autoTrackSpecificForms\",\n        \"checkboxText\": \"Automatically track submit events on form HTML elements\",\n        \"simpleValueType\": true,\n        \"subParams\": [\n          {\n            \"type\": \"GROUP\",\n            \"name\": \"autoTrackSpecificFormsGroup\",\n            \"subParams\": [\n              {\n                \"type\": \"TEXT\",\n                \"name\": \"autoTrackSpecificFormsSelector\",\n                \"displayName\": \"Auto Track Submit Events Override CSS Selector\",\n                \"simpleValueType\": true,\n                \"help\": \"If set, the click listener will listen for \\\"submit\\\" events at elements that match the specified CSS selector.\\n\\u003cbr/\\u003e\\nIf left blank, it will listen for clicks on \\u0026lt;form\\u0026gt; HTML elements.\\n\\u003cbr/\\u003e\\n\\u003cbr/\\u003e\\nDefault CSS Selector: \\u003ci\\u003eform\\u003c/i\\u003e\"\n              }\n            ],\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"autoTrackSpecificForms\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ]\n          }\n        ],\n        \"help\": \"If enabled, by default it will track submit events at all \\u0026lt;form\\u0026gt; HTML elements and try to detect \\u003ci\\u003euser_data\\u003c/i\\u003e information.\",\n        \"defaultValue\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"overrideRootElement\",\n        \"checkboxText\": \"Override the root HTML element to scan within\",\n        \"simpleValueType\": true,\n        \"help\": \"By default, it uses the \\u003ci\\u003edocument\\u003c/i\\u003e HTML element.\",\n        \"subParams\": [\n          {\n            \"type\": \"GROUP\",\n            \"name\": \"overrideRootElementGroup\",\n            \"groupStyle\": \"NO_ZIPPY\",\n            \"subParams\": [\n              {\n                \"type\": \"TEXT\",\n                \"name\": \"overrideRootElementElement\",\n                \"displayName\": \"Overriden root HTML element\",\n                \"simpleValueType\": true,\n                \"help\": \"Input a variable that returns the desired HTML element.\",\n                \"valueValidators\": [\n                  {\n                    \"type\": \"NON_EMPTY\"\n                  }\n                ]\n              }\n            ],\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"overrideRootElement\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"overrideExistingUserData\",\n        \"checkboxText\": \"Override the already captured user data with the newly captured values\",\n        \"simpleValueType\": true,\n        \"help\": \"If enabled, the existing \\u003ci\\u003euser_data\\u003c/i\\u003e information will be overridden with the newly captured information (if valid).\\n\\u003cbr/\\u003e\\nOtherwise, it will be merged with the already existing one with the new \\u003ci\\u003euser_data\\u003c/i\\u003e information taking precedence.\"\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"moreSettingsGroup\",\n    \"displayName\": \"More Settings\",\n    \"groupStyle\": \"ZIPPY_OPEN_ON_PARAM\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"scriptUrl\",\n        \"displayName\": \"Script URL\",\n        \"simpleValueType\": true,\n        \"defaultValue\": \"https://stapecdn.com/udc/${script-version}.js\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          },\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"^(https://).+(\\\\.js)$\"\n            ]\n          }\n        ],\n        \"help\": \"The URL load script from.\\n\\u003cbr/\\u003e\\nBy default it will be loaded from \\u003ci\\u003ehttps://stapecdn.com/udc/${script-version}.js\\u003c/i\\u003e.\\n\\u003cbr/\\u003e\\nIf the \\u003ci\\u003e${script-version}\\u003c/i\\u003e is left as is, the tag will always try to load the latest version. Otherwise, you can specify a specific version in its place, such as: \\u003ci\\u003ev1\\u003ci\\u003e.\"\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"logsGroup\",\n    \"displayName\": \"Logs Settings\",\n    \"groupStyle\": \"ZIPPY_OPEN_ON_PARAM\",\n    \"subParams\": [\n      {\n        \"type\": \"RADIO\",\n        \"name\": \"logType\",\n        \"radioItems\": [\n          {\n            \"value\": \"no\",\n            \"displayValue\": \"Do not log\"\n          },\n          {\n            \"value\": \"debug\",\n            \"displayValue\": \"Log to console during debug and preview\"\n          },\n          {\n            \"value\": \"always\",\n            \"displayValue\": \"Always log to console\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"defaultValue\": \"debug\"\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\n/// <reference path=\"./web-gtm-sandboxed-apis.d.ts\" />\n\nconst callInWindow = require('callInWindow');\nconst copyFromWindow = require('copyFromWindow');\nconst getContainerVersion = require('getContainerVersion');\nconst getType = require('getType');\nconst injectScript = require('injectScript');\nconst JSON = require('JSON');\nconst logToConsole = require('logToConsole');\nconst setInWindow = require('setInWindow');\n\n/*==============================================================================\n==============================================================================*/\n\nconst scriptUrl = getScriptUrl(data);\nconst scriptGlobalFlagName = 'gtm_userDataCollectorScriptLoaded';\nconst scriptLoaded = copyFromWindow(scriptGlobalFlagName);\n\nconst settings = getScriptSettings(data);\n\nif (!scriptLoaded || !scriptLoaded[scriptUrl]) {\n  log({\n    Name: 'UserDataCollector',\n    Type: 'Message',\n    Message: 'Loading User Data Collector script.'\n  });\n\n  injectScript(\n    scriptUrl,\n    () => {\n      log({\n        Name: 'UserDataCollector',\n        Type: 'Message',\n        Message: 'User Data Collector script loaded succesfully.'\n      });\n      const flagValue = scriptLoaded || {};\n      flagValue[scriptUrl] = true;\n      setInWindow(scriptGlobalFlagName, flagValue);\n\n      log({\n        Name: 'UserDataCollector',\n        Type: 'Message',\n        Message: 'User Data Collector script is already loaded. Running user data collection.'\n      });\n\n      runUserDataCollection(settings);\n    },\n    () => {\n      log({\n        Name: 'UserDataCollector',\n        Type: 'Message',\n        Message: 'User Data Collector script failed to load.'\n      });\n\n      data.gtmOnFailure();\n    },\n    scriptUrl\n  );\n} else {\n  log({\n    Name: 'UserDataCollector',\n    Type: 'Message',\n    Message: 'User Data Collector script is already loaded. Running user data collection.'\n  });\n\n  runUserDataCollection(settings);\n}\n\n/*==============================================================================\n  Vendor related functions\n==============================================================================*/\n\nfunction getScriptUrl(data) {\n  const scriptVersion = 'v1';\n  const scriptUrl =\n    getType(data.scriptUrl) === 'string'\n      ? data.scriptUrl.replace('${script-version}', scriptVersion)\n      : 'https://stapecdn.com/udc/' + scriptVersion + '.js';\n  return scriptUrl;\n}\n\nfunction getScriptSettings(data) {\n  const settings = {};\n\n  settings.extract = {};\n  if (data.email) settings.extract.email = data.email;\n  if (data.phone) settings.extract.phone = data.phone;\n  if (data.city) settings.extract.city = data.city;\n  if (data.country) settings.extract.country = data.country;\n  if (data.postalCode) settings.extract.postalCode = data.postalCode;\n  if (data.firstName) settings.extract.firstName = data.firstName;\n  if (data.lastName) settings.extract.lastName = data.lastName;\n\n  if (data.overrideRootElement && data.overrideRootElementElement) {\n    settings.root = data.overrideRootElementElement;\n  }\n\n  if (data.pushToDataLayer) {\n    settings.pushToDataLayer = {\n      enabled: true\n    };\n    if (getType(data.pushToDataLayerEventName) === 'string') {\n      settings.pushToDataLayer.event = data.pushToDataLayerEventName;\n    }\n    if (getType(data.pushToDataLayerDataLayerName) === 'string') {\n      settings.pushToDataLayer.dataLayerName = data.pushToDataLayerDataLayerName;\n    }\n  }\n\n  if (data.autoTrackSpecificClicks) {\n    settings.autoTrackSpecificClicks = {\n      enabled: true\n    };\n    if (getType(data.autoTrackSpecificClicksSelector) === 'string') {\n      settings.autoTrackSpecificClicks.buttonClickSelector = data.autoTrackSpecificClicksSelector;\n    }\n  }\n\n  if (data.autoTrackSpecificForms) {\n    settings.autoTrackSpecificForms = {\n      enabled: true\n    };\n    if (getType(data.autoTrackSpecificFormsSelector) === 'string') {\n      settings.autoTrackSpecificForms.formSelector = data.autoTrackSpecificFormsSelector;\n    }\n  }\n\n  if (data.saveIntoStorage) {\n    settings.saveIntoStorage = {\n      enabled: true\n    };\n    if (data.saveIntoStorageType) settings.saveIntoStorage.type = data.saveIntoStorageType;\n    if (getType(data.saveIntoStorageKey) === 'string') {\n      settings.saveIntoStorage.key = data.saveIntoStorageKey;\n    }\n  }\n\n  if (data.overrideExistingUserData) {\n    settings.overrideExistingUserData = data.overrideExistingUserData;\n  }\n\n  return settings;\n}\n\nfunction runUserDataCollection(settings) {\n  const userData = callInWindow('collectUserDataAuto', settings);\n  log({\n    Name: 'UserDataCollector',\n    Type: 'Message',\n    Message: 'Collected User Data: ' + JSON.stringify(userData)\n  });\n\n  data.gtmOnSuccess();\n}\n\n/*==============================================================================\n  Helpers\n==============================================================================*/\n\nfunction log(dataToLog) {\n  if (!determinateIsLoggingEnabled()) return;\n  logToConsole(dataToLog);\n}\n\nfunction determinateIsLoggingEnabled() {\n  const containerVersion = getContainerVersion();\n  const isDebug = !!(\n    containerVersion &&\n    (containerVersion.debugMode || containerVersion.previewMode)\n  );\n\n  if (!data.logType) {\n    return isDebug;\n  }\n\n  if (data.logType === 'no') {\n    return false;\n  }\n\n  if (data.logType === 'debug') {\n    return isDebug;\n  }\n\n  return data.logType === 'always';\n}\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"gtm_userDataCollectorScriptLoaded\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"collectUserDataAuto\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"all\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_container_data\",\n        \"versionId\": \"1\"\n      },\n      \"param\": []\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"inject_script\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urls\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"https://stapecdn.com/*\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"https://cdn.stape.io/*\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: Script is NOT loaded, the template tries to load it but an error occurs, failure\n    handler should be called, extractor function should NOT be called\n  code: |-\n    setMockData();\n\n    mock('copyFromWindow', (key) => {\n      if (key === scriptGlobalFlagName) {\n        return undefined;\n      }\n    });\n\n    mock('injectScript', (scriptUrl, successHandler, failureHandler, cacheToken) => {\n      assertThat(scriptUrl).isEqualTo(mockData.scriptUrl);\n      assertThat(successHandler).isFunction();\n      assertThat(failureHandler).isFunction();\n      assertThat(cacheToken).isEqualTo(mockData.scriptUrl);\n      failureHandler();\n    });\n\n    runCode(mockData);\n\n    assertApi('setInWindow').wasNotCalled();\n    assertApi('callInWindow').wasNotCalled();\n    assertApi('gtmOnFailure').wasCalled();\n    assertApi('gtmOnSuccess').wasNotCalled();\n- name: Script is NOT loaded, the template should load it successfully, extractor\n    function should be called\n  code: |-\n    setMockData({\n      autoTrackSpecificClicks: { enabled: true, autoTrackSpecificClicksSelector: 'a.submit' }\n    });\n\n    mock('copyFromWindow', (key) => {\n      if (key === scriptGlobalFlagName) {\n        return undefined;\n      }\n    });\n\n    mock('injectScript', (scriptUrl, successHandler, failureHandler, cacheToken) => {\n      assertThat(scriptUrl).isEqualTo(mockData.scriptUrl);\n      assertThat(successHandler).isFunction();\n      assertThat(failureHandler).isFunction();\n      assertThat(cacheToken).isEqualTo(mockData.scriptUrl);\n      successHandler();\n    });\n\n    mock('callInWindow', () => {\n      const name = arguments[0];\n      if (name === extractorFunctionName) {\n        const settings = arguments[1];\n        assertThat(settings).isEqualTo(expectedFormattedSettings);\n        return {\n          email: 'email',\n          phone: 'phone',\n          city: 'city',\n          postal_code: 'postal_code',\n          country: 'country',\n          first_name: 'first_name',\n          last_name: 'last_name'\n        };\n      }\n      fail(extractorFunctionName + ' should have been called.');\n    });\n\n    runCode(mockData);\n\n    const flagValue = {};\n    flagValue[mockData.scriptUrl] = true;\n    assertApi('setInWindow').wasCalledWith(scriptGlobalFlagName, flagValue);\n\n    assertApi('gtmOnFailure').wasNotCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Script is loaded, the template should not attempt to load it, extractor function\n    should be called\n  code: |-\n    setMockData();\n\n    mock('copyFromWindow', (key) => {\n      if (key === scriptGlobalFlagName) {\n        const flagValue = {};\n        flagValue[mockData.scriptUrl] = true;\n        return flagValue;\n      }\n    });\n\n    mock('callInWindow', () => {\n      const name = arguments[0];\n      if (name === extractorFunctionName) {\n        const settings = arguments[1];\n        assertThat(settings).isEqualTo(expectedFormattedSettings);\n        return {\n          email: 'email',\n          phone: 'phone',\n          city: 'city',\n          postal_code: 'postal_code',\n          country: 'country',\n          first_name: 'first_name',\n          last_name: 'last_name'\n        };\n      }\n      fail(extractorFunctionName + ' should have been called.');\n    });\n\n    runCode(mockData);\n\n    assertApi('injectScript').wasNotCalled();\n    assertApi('setInWindow').wasNotCalled();\n    assertApi('gtmOnFailure').wasNotCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: '[Logs] Should log to console'\n  code: \"const originalMockData = setMockData();\\n\\n[\\n  // if the 'Always log to\\\n    \\ console' option is selected\\n  { mockData: { logType: 'always' }, expectedDebugMode:\\\n    \\ true },\\n  // if the 'Log during debug and preview' option is selected AND is\\\n    \\ on preview mode\\n  { mockData: { logType: 'debug' }, expectedDebugMode: true\\\n    \\ },\\n].forEach(scenario => {\\n  const copyMockData = JSON.parse(JSON.stringify(originalMockData));\\n\\\n    \\  mergeObj(copyMockData, scenario.mockData);\\n  \\n  mock('getContainerVersion',\\\n    \\ () => {\\n    return {\\n      debugMode: scenario.expectedDebugMode\\n    };\\n\\\n    \\  }); \\n\\n  runCode(copyMockData);\\n  \\n  assertApi('logToConsole').wasCalled();\\n\\\n    \\  assertApi('gtmOnSuccess').wasCalled();\\n  assertApi('gtmOnFailure').wasNotCalled();\\n\\\n    });\"\n- name: '[Logs] Should NOT log to console'\n  code: \"const originalMockData = setMockData();\\n\\n[\\n  // if the 'Log during debug\\\n    \\ and preview' option is selected AND is NOT on preview mode\\n  { mockData: {\\\n    \\ logType: 'debug' }, expectedDebugMode: false },\\n  // if the 'Do not log' option\\\n    \\ is selected\\n  { mockData: { logType: 'no' }, expectedDebugMode: undefined },\\n\\\n    ].forEach(scenario => {\\n  const copyMockData = JSON.parse(JSON.stringify(originalMockData));\\n\\\n    \\  mergeObj(copyMockData, scenario.mockData);\\n  \\n  mock('getContainerVersion',\\\n    \\ () => {\\n    return {\\n      debugMode: scenario.expectedDebugMode\\n    };\\n\\\n    \\  });\\n  \\n  runCode(copyMockData);\\n\\n  assertApi('logToConsole').wasNotCalled();\\n\\\n    \\  assertApi('gtmOnSuccess').wasCalled();\\n  assertApi('gtmOnFailure').wasNotCalled();\\n\\\n    });\"\nsetup: \"const JSON = require('JSON');\\nconst Object = require('Object');\\n\\nfunction\\\n  \\ mergeObj(target, source) {\\n  for (const key in source) {\\n    if (source.hasOwnProperty(key))\\\n  \\ target[key] = source[key];\\n  }\\n  return target;\\n}\\n\\nconst scriptGlobalFlagName\\\n  \\ = 'gtm_userDataCollectorScriptLoaded';\\nconst extractorFunctionName = 'collectUserDataAuto';\\n\\\n  const expectedFormattedSettings = {\\n  extract: { email: true, phone: true, city:\\\n  \\ true, country: true, postalCode: true, firstName: true, lastName: true },\\n  root:\\\n  \\ 'test',\\n  pushToDataLayer: {\\n    enabled: true,\\n    event: 'user_data_detected',\\n\\\n  \\    dataLayerName: 'dataLayer'\\n  },\\n  autoTrackSpecificClicks: { enabled: true,\\\n  \\ buttonClickSelector: 'a.submit' },\\n  autoTrackSpecificForms: { enabled: true,\\\n  \\ formSelector: 'form' },\\n  saveIntoStorage: { enabled: true, type: 'session',\\\n  \\ key: 'gtm_user_data' },\\n  overrideExistingUserData: true\\n};\\n\\nconst mockData\\\n  \\ = {};\\n\\nconst setMockData = (objToBeMerged) => {\\n  const base = {\\n    email:\\\n  \\ true,\\n    phone: true,\\n    city: true,\\n    postalCode: true,\\n    country:\\\n  \\ true,\\n    firstName: true,\\n    lastName: true,\\n    pushToDataLayer: true,\\n\\\n  \\    pushToDataLayerDataLayerName: 'dataLayer',\\n    pushToDataLayerEventName: 'user_data_detected',\\n\\\n  \\    saveIntoStorage: true,\\n    saveIntoStorageType: 'session',\\n    saveIntoStorageKey:\\\n  \\ 'gtm_user_data',\\n    autoTrackSpecificClicks: true,\\n    autoTrackSpecificClicksSelector:\\\n  \\ 'a.submit',\\n    autoTrackSpecificForms: true,\\n    autoTrackSpecificFormsSelector:\\\n  \\ 'form',\\n    overrideRootElement: true,\\n    overrideRootElementElement: 'test',\\n\\\n  \\    overrideExistingUserData: true,\\n    scriptUrl: 'https://stapecdn.com/udc/v1.js',\\n\\\n  \\    logType: 'debug'\\n  };\\n  \\n  mergeObj(base, objToBeMerged || {});\\n  mergeObj(mockData,\\\n  \\ base);\\n  return mockData;\\n};\\n\\nmock('copyFromWindow', (key) => {\\n  if (key\\\n  \\ === scriptGlobalFlagName) {\\n    return { };\\n  }\\n});\\n\\nmock('injectScript',\\\n  \\ (scriptUrl, successHandler, failureHandler, cacheToken) => {\\n  successHandler();\\n\\\n  });\\n\\nmock('callInWindow', () => {\\n  const name = arguments[0];\\n  if (name ===\\\n  \\ extractorFunctionName) {\\n    return {\\n      email: 'email',\\n      phone: 'phone',\\n\\\n  \\      city: 'city',\\n      postal_code: 'postal_code',\\n      country: 'country',\\n\\\n  \\      first_name: 'first_name',\\n      last_name: 'last_name'\\n    };\\n  }\\n});\"\n\n\n___NOTES___\n\nCreated on 26.2.2024 14.09.01\n\n\n"
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "40",
                "name": "Facebook Pixel by Stape",
                "fingerprint": "1769090938876",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"TAG\",\n  \"id\": \"cvt_KFNBV\",\n  \"version\": 1,\n  \"displayName\": \"Facebook Pixel by Stape\",\n  \"categories\": [\n    \"ADVERTISING\",\n    \"ANALYTICS\",\n    \"CONVERSIONS\",\n    \"MARKETING\",\n    \"REMARKETING\"\n  ],\n  \"brand\": {\n    \"id\": \"github.com_stape-io\",\n    \"displayName\": \"stape-io\",\n    \"thumbnail\": \"data:image/png;base64,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MYEFAJCYwAIASExgAQAkJrAAABITWAAAiQksAIDEBBYAQGICCwAgMYEFAJDYZAAwMucXi/jM/1iOO6/rxB1Hu3HrNd3YPxOxazpiotOJNlteKWJ+OWKu/D145lwRT54p4v8+3Y/zC0VA2wgsgBFaKAPjC7+//MLn+8q4OrqvG0f3Rhwpn4/srT7vxLXl46ZD5eNgd/XjXeW79XT5mJkq37i79QmxomyjXhlOCysRi+V/1mIv4szFIo7NFvHU2X48Vz6fvlDE8fMRJ+b65aOIk+fLH98LaDWBBTBGc4vVox/fO1V91l/3x1RRdXCmEwd3d+LArogDu7txeE/EofLzQ+XzwfLzQ7vLWCu/b890p4y2TuwtJ2Izq1HWid3l81T1mIio0qxbTsomJ9b+2b1+Ef3yX1s+xXL5vPR8JC2uBlOx+uu7uFSsTt4ulh+fK6dNZ+eLODcfcboMqTNlPFVBVU2hqm+bLX9cbyUgewILoOaqydDxMnaOz106SusHUG+W3AEAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBITGABACQmsAAAEhNYAACJCSwAgMQEFgBAYgILACAxgQUAkJjAAgBI7M8AEVZ9YYB+7i0AAAAASUVORK5CYII\\u003d\"\n  },\n  \"description\": \"Integrates the Facebook/Meta Pixel into the page and allows easy event tracking.\",\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"baseConfigurationGroup\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"pixelIds\",\n        \"displayName\": \"Facebook Pixel ID(s)\",\n        \"simpleValueType\": true,\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          },\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"^[0-9,]+$\"\n            ]\n          }\n        ],\n        \"help\": \"Set to a valid Facebook Pixel ID.\",\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"SELECT\",\n        \"name\": \"inheritEventName\",\n        \"displayName\": \"Event Name Setup Method\",\n        \"selectItems\": [\n          {\n            \"value\": \"inherit\",\n            \"displayValue\": \"Inherit from DataLayer\"\n          },\n          {\n            \"value\": \"override\",\n            \"displayValue\": \"Override\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"subParams\": [\n          {\n            \"type\": \"RADIO\",\n            \"name\": \"eventName\",\n            \"radioItems\": [\n              {\n                \"value\": \"standard\",\n                \"displayValue\": \"Standard\",\n                \"subParams\": [\n                  {\n                    \"type\": \"SELECT\",\n                    \"name\": \"eventNameStandard\",\n                    \"macrosInSelect\": false,\n                    \"selectItems\": [\n                      {\n                        \"value\": \"PageView\",\n                        \"displayValue\": \"PageView\"\n                      },\n                      {\n                        \"value\": \"AddPaymentInfo\",\n                        \"displayValue\": \"AddPaymentInfo\"\n                      },\n                      {\n                        \"value\": \"AddToCart\",\n                        \"displayValue\": \"AddToCart\"\n                      },\n                      {\n                        \"value\": \"AddToWishlist\",\n                        \"displayValue\": \"AddToWishlist\"\n                      },\n                      {\n                        \"value\": \"CompleteRegistration\",\n                        \"displayValue\": \"CompleteRegistration\"\n                      },\n                      {\n                        \"value\": \"Contact\",\n                        \"displayValue\": \"Contact\"\n                      },\n                      {\n                        \"value\": \"CustomizeProduct\",\n                        \"displayValue\": \"CustomizeProduct\"\n                      },\n                      {\n                        \"value\": \"Donate\",\n                        \"displayValue\": \"Donate\"\n                      },\n                      {\n                        \"value\": \"FindLocation\",\n                        \"displayValue\": \"FindLocation\"\n                      },\n                      {\n                        \"value\": \"InitiateCheckout\",\n                        \"displayValue\": \"InitiateCheckout\"\n                      },\n                      {\n                        \"value\": \"Lead\",\n                        \"displayValue\": \"Lead\"\n                      },\n                      {\n                        \"value\": \"Purchase\",\n                        \"displayValue\": \"Purchase\"\n                      },\n                      {\n                        \"value\": \"Schedule\",\n                        \"displayValue\": \"Schedule\"\n                      },\n                      {\n                        \"value\": \"Search\",\n                        \"displayValue\": \"Search\"\n                      },\n                      {\n                        \"value\": \"StartTrial\",\n                        \"displayValue\": \"StartTrial\"\n                      },\n                      {\n                        \"value\": \"SubmitApplication\",\n                        \"displayValue\": \"SubmitApplication\"\n                      },\n                      {\n                        \"value\": \"Subscribe\",\n                        \"displayValue\": \"Subscribe\"\n                      },\n                      {\n                        \"value\": \"ViewContent\",\n                        \"displayValue\": \"ViewContent\"\n                      }\n                    ],\n                    \"simpleValueType\": true,\n                    \"displayName\": \"Event Name\",\n                    \"defaultValue\": \"PageView\"\n                  }\n                ]\n              },\n              {\n                \"value\": \"custom\",\n                \"displayValue\": \"Custom\",\n                \"subParams\": [\n                  {\n                    \"type\": \"TEXT\",\n                    \"name\": \"eventNameCustom\",\n                    \"simpleValueType\": true,\n                    \"displayName\": \"Event Name\",\n                    \"valueValidators\": [\n                      {\n                        \"type\": \"NON_EMPTY\"\n                      }\n                    ]\n                  }\n                ]\n              }\n            ],\n            \"simpleValueType\": true,\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"inheritEventName\",\n                \"paramValue\": \"override\",\n                \"type\": \"EQUALS\"\n              }\n            ],\n            \"displayName\": \"Event Type\"\n          }\n        ],\n        \"defaultValue\": \"override\",\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"enableDataLayerMapping\",\n        \"checkboxText\": \"Enable automatic User Data and Event Parameters mapping from the Data Layer\",\n        \"simpleValueType\": true,\n        \"help\": \"If you check this, then the Facebook tag will populate standard Object Properties and User Data automatically from the DataLayer. The tag parses Universal Analytics,  \\u003ca target\\u003d\\\"_blank\\\" href\\u003d\\\"https://developers.google.com/analytics/devguides/collection/ga4/ecommerce\\\"\\u003eGA4\\u003c/a\\u003e and \\u003ca target\\u003d\\\"_blank\\\" href\\u003d\\\"https://developers.google.com/tag-platform/tag-manager/server-side/common-event-data\\\"\\u003eCommon Event Data\\u003c/a\\u003e formats.\",\n        \"defaultValue\": true,\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"enableCurrentDataLayerOnly\",\n        \"checkboxText\": \"Use data only from the most recent Data Layer event where the data can be found (ignore recursive merges)\",\n        \"simpleValueType\": true,\n        \"help\": \"If enabled, the tag will take data only from the most recent Data Layer event where the data can be found. \\n\\u003cbr/\\u003e\\u003cbr/\\u003e\\nIn other words, the tag will ignore recursive merges for Data Layer variables and take only the most recent value of the data. \\u003ca href\\u003d\\\"https://www.simoahava.com/gtm-tips/data-layer-variable-versions-explained/\\\"\\u003eLearn more\\u003c/a\\u003e.\\n\\u003cbr/\\u003e\\nThat\\u0027s how it worked in the old Facebook pixel tag.\",\n        \"defaultValue\": false,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"enableDataLayerMapping\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"alwaysInSummary\": true\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"enableEdvancedMatching\",\n        \"checkboxText\": \"Enable Advanced Matching\",\n        \"simpleValueType\": true,\n        \"help\": \"Enable sending of user personal information such as email addresses, names, etc. to Meta.\\n\\u003cbr/\\u003e\\nMore information can be found \\u003ca target\\u003d\\\"_blank\\\" href\\u003d\\\"https://developers.facebook.com/docs/meta-pixel/advanced/advanced-matching/\\\"\\u003ehere\\u003c/a\\u003e.\",\n        \"subParams\": [\n          {\n            \"type\": \"GROUP\",\n            \"name\": \"advancedMatchingGroup\",\n            \"subParams\": [\n              {\n                \"type\": \"CHECKBOX\",\n                \"name\": \"enableEventEnhancement\",\n                \"checkboxText\": \"Enable Event Enhancement\",\n                \"simpleValueType\": true,\n                \"help\": \"Enable the use of \\u003ci\\u003elocalStorage\\u003c/i\\u003e to store data for enhanced event tracking.\\n\\u003cbr/\\u003e\\u003cbr/\\u003e\\nNote: If the \\u003ci\\u003eEnable automatic data population from the Data Layer\\u003c/i\\u003e option is selected, all User Data it finds in the Data Layer will be stored, not just the fields explicitly defined in the User Data section.\",\n                \"subParams\": [\n                  {\n                    \"type\": \"CHECKBOX\",\n                    \"name\": \"storeUserDataHashed\",\n                    \"checkboxText\": \"Store User Data hashed\",\n                    \"simpleValueType\": true,\n                    \"help\": \"The User Data will be stored hashed in \\u003ci\\u003elocalStorage\\u003c/i\\u003e.\",\n                    \"enablingConditions\": [\n                      {\n                        \"paramName\": \"enableEventEnhancement\",\n                        \"paramValue\": true,\n                        \"type\": \"EQUALS\"\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"type\": \"CHECKBOX\",\n                \"name\": \"runInitOnce\",\n                \"checkboxText\": \"Run the \\u0027init\\u0027 command only once\",\n                \"simpleValueType\": true,\n                \"help\": \"When Advanced Matching is enabled, the tag runs the \\u003ci\\u003einit\\u003c/i\\u003e command with each event to send user information that becomes available after page load.\\n\\u003cbr/\\u003e\\u003cbr/\\u003e\\nThis causes the following message in the Console from the fbevents.js file:\\n\\u003ci\\u003e[Meta Pixel] - Duplicate Pixel ID: {Pixel ID}.\\u003c/i\\u003e\\n\\u003cbr/\\u003e\\u003cbr/\\u003e\\nEnable this option to skip repeated \\u003ci\\u003einit\\u003c/i\\u003e calls and suppress the Console message. Note that Advanced Matching data found after the first call won’t be sent.\"\n              }\n            ],\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"enableEdvancedMatching\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ]\n          }\n        ],\n        \"defaultValue\": true,\n        \"alwaysInSummary\": true\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"complianceGroup\",\n    \"displayName\": \"Compliance\",\n    \"groupStyle\": \"ZIPPY_OPEN\",\n    \"subParams\": [\n      {\n        \"type\": \"SELECT\",\n        \"name\": \"consent\",\n        \"displayName\": \"Consent Granted\",\n        \"macrosInSelect\": true,\n        \"selectItems\": [\n          {\n            \"value\": true,\n            \"displayValue\": \"True\"\n          },\n          {\n            \"value\": false,\n            \"displayValue\": \"False\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"help\": \"Setting Consent Granted to \\u003cstrong\\u003efalse\\u003c/strong\\u003e will prevent the pixel from sending hits until tag fired with Consent Granted \\u003cstrong\\u003etrue\\u003c/strong\\u003e. More info \\u003ca href\\u003d\\\"hhttps://developers.facebook.com/docs/meta-pixel/implementation/gdpr\\\"\\u003eby this link\\u003c/a\\u003e.\",\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"enableConsentMode\",\n            \"paramValue\": false,\n            \"type\": \"EQUALS\"\n          }\n        ]\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"enableConsentMode\",\n        \"checkboxText\": \"Enable GTM consent mode support\",\n        \"simpleValueType\": true,\n        \"help\": \"If enabled, the tag will check for ad_storage, and if it not granted, it will set the Facebook pixel consent to revoke. After the consent is granted, it will automatically execute fbq(\\u0027consent\\u0027, \\u0027grant\\u0027);\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"dpoLDU\",\n        \"checkboxText\": \"Limited Data Use (LDU)\",\n        \"simpleValueType\": true,\n        \"help\": \"Limited Data Use is a data processing option that gives you more control over how your data is used in Meta’s systems. More info \\u003ca target\\u003d\\\"_blank\\\" href\\u003d\\\"https://developers.facebook.com/docs/meta-pixel/implementation/data-processing-options\\\"\\u003eby this link\\u003c/a\\u003e.\"\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dpoCountry\",\n        \"displayName\": \"Country\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 0,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"dpoLDU\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueValidators\": [\n          {\n            \"type\": \"NUMBER\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dpoState\",\n        \"displayName\": \"State\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 0,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"dpoLDU\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueValidators\": [\n          {\n            \"type\": \"NUMBER\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"User Data\",\n    \"name\": \"userDataListGroup\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"type\": \"GROUP\",\n    \"subParams\": [\n      {\n        \"type\": \"LABEL\",\n        \"name\": \"userDataLabel\",\n        \"displayName\": \"User Data Properties that you can send to Meta can be found at \\u003ca target\\u003d\\\"_blank\\\" href\\u003d\\\"https://developers.facebook.com/docs/meta-pixel/advanced/advanced-matching\\\"\\u003ethis link\\u003c/a\\u003e.\\u003cbr\\u003e\\u003cbr\\u003e\"\n      },\n      {\n        \"type\": \"SELECT\",\n        \"name\": \"userDataFromVariable\",\n        \"displayName\": \"Load Properties From Variable\",\n        \"macrosInSelect\": true,\n        \"selectItems\": [\n          {\n            \"value\": false,\n            \"displayValue\": \"False\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"help\": \"You can use a standard User-Provided Data variable or create a variable that returns a JavaScript object with the desired user data properties. This object will merge with additional properties from the table below, with any conflicts resolved in favor of the table entries.\"\n      },\n      {\n        \"name\": \"userDataList\",\n        \"simpleTableColumns\": [\n          {\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ],\n            \"defaultValue\": \"em\",\n            \"displayName\": \"Property Name\",\n            \"name\": \"name\",\n            \"isUnique\": true,\n            \"type\": \"SELECT\",\n            \"selectItems\": [\n              {\n                \"value\": \"em\",\n                \"displayValue\": \"Email\"\n              },\n              {\n                \"value\": \"ph\",\n                \"displayValue\": \"Phone\"\n              },\n              {\n                \"value\": \"ge\",\n                \"displayValue\": \"Gender\"\n              },\n              {\n                \"value\": \"db\",\n                \"displayValue\": \"Date of Birth\"\n              },\n              {\n                \"value\": \"ln\",\n                \"displayValue\": \"Last Name\"\n              },\n              {\n                \"value\": \"fn\",\n                \"displayValue\": \"First Name\"\n              },\n              {\n                \"value\": \"ct\",\n                \"displayValue\": \"City\"\n              },\n              {\n                \"value\": \"st\",\n                \"displayValue\": \"State\"\n              },\n              {\n                \"value\": \"zp\",\n                \"displayValue\": \"Zip\"\n              },\n              {\n                \"value\": \"country\",\n                \"displayValue\": \"Country\"\n              },\n              {\n                \"value\": \"external_id\",\n                \"displayValue\": \"External ID\"\n              }\n            ]\n          },\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Property Value\",\n            \"name\": \"value\",\n            \"type\": \"TEXT\"\n          }\n        ],\n        \"type\": \"SIMPLE_TABLE\",\n        \"newRowButtonText\": \"Add property\"\n      }\n    ],\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"enableEdvancedMatching\",\n        \"paramValue\": true,\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Object Properties\",\n    \"name\": \"objectPropertiesGroup\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"type\": \"GROUP\",\n    \"subParams\": [\n      {\n        \"type\": \"LABEL\",\n        \"name\": \"objectPropertiesLabel\",\n        \"displayName\": \"Standard Object Properties that you can send to Meta can be found at \\u003ca target\\u003d\\\"_blank\\\" href\\u003d\\\"https://developers.facebook.com/docs/meta-pixel/reference#object-properties\\\"\\u003ethis link\\u003c/a\\u003e.\\u003cbr\\u003e\\u003cbr\\u003e\"\n      },\n      {\n        \"type\": \"SELECT\",\n        \"name\": \"objectPropertiesFromVariable\",\n        \"displayName\": \"Load Properties From Variable\",\n        \"macrosInSelect\": true,\n        \"selectItems\": [\n          {\n            \"value\": false,\n            \"displayValue\": \"False\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"help\": \"You can create a variable that returns a JavaScript object with the desired properties. This object will merge with additional properties from the table below, with any conflicts resolved in favor of the table entries.\"\n      },\n      {\n        \"name\": \"objectPropertiesList\",\n        \"simpleTableColumns\": [\n          {\n            \"valueValidators\": [],\n            \"defaultValue\": \"\",\n            \"displayName\": \"Property Name\",\n            \"name\": \"name\",\n            \"isUnique\": true,\n            \"type\": \"TEXT\"\n          },\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Property Value\",\n            \"name\": \"value\",\n            \"type\": \"TEXT\"\n          }\n        ],\n        \"type\": \"SIMPLE_TABLE\",\n        \"newRowButtonText\": \"Add property\"\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"serverGroup\",\n    \"displayName\": \"Server Side Tracking\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"eventId\",\n        \"displayName\": \"Event ID\",\n        \"simpleValueType\": true,\n        \"help\": \"Set the Event ID parameter in case you are tracking the same event server-side as well. The Event ID can be used to deduplicate the same event if sent from multiple sources. See more \\u003ca href\\u003d\\\"https://developers.facebook.com/docs/marketing-api/conversions-api/deduplicate-pixel-and-server-events/\\\"\\u003ehere\\u003c/a\\u003e.\"\n      },\n      {\n        \"type\": \"GROUP\",\n        \"name\": \"advancedSettingsGroup\",\n        \"displayName\": \"Advanced Settings\",\n        \"groupStyle\": \"ZIPPY_OPEN_ON_PARAM\",\n        \"subParams\": [\n          {\n            \"type\": \"CHECKBOX\",\n            \"name\": \"dataLayerEventPush\",\n            \"checkboxText\": \"Push event to DataLayer with this eventId\",\n            \"simpleValueType\": true,\n            \"help\": \"Helpful for easier events deduplication.\",\n            \"defaultValue\": false\n          },\n          {\n            \"type\": \"TEXT\",\n            \"name\": \"dataLayerEventName\",\n            \"displayName\": \"DataLayer Event Name\",\n            \"simpleValueType\": true,\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"dataLayerEventPush\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ],\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ],\n            \"valueHint\": \"page_view_unique\"\n          },\n          {\n            \"type\": \"TEXT\",\n            \"name\": \"dataLayerVariableName\",\n            \"displayName\": \"DataLayer Object Name\",\n            \"simpleValueType\": true,\n            \"enablingConditions\": [\n              {\n                \"paramName\": \"dataLayerEventPush\",\n                \"paramValue\": true,\n                \"type\": \"EQUALS\"\n              }\n            ],\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ],\n            \"defaultValue\": \"dataLayer\",\n            \"help\": \"Use dataLayer by default. Modify only if you renamed dataLayer object name.\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"otherSettingsGroup\",\n    \"displayName\": \"Other Settings\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"subParams\": [\n      {\n        \"help\": \"Facebook automatically collects metadata and user interactions (e.g., clicks). Check this box to disable this functionality.\",\n        \"simpleValueType\": true,\n        \"name\": \"disableAutoConfig\",\n        \"checkboxText\": \"Disable Automatic Configuration\",\n        \"type\": \"CHECKBOX\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"disablePushState\",\n        \"checkboxText\": \"Disable History Event Tracking\",\n        \"simpleValueType\": true,\n        \"help\": \"The Facebook Pixel automatically tracks history events (pushState and replaceState) as PageViews. Check this box to disable this automatic tracking.\"\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst addConsentListener = require('addConsentListener');\nconst aliasInWindow = require('aliasInWindow');\nconst callInWindow = require('callInWindow');\nconst copyFromDataLayer = require('copyFromDataLayer');\nconst copyFromWindow = require('copyFromWindow');\nconst createQueue = require('createQueue');\nconst getType = require('getType');\nconst injectScript = require('injectScript');\nconst isConsentGranted = require('isConsentGranted');\nconst JSON = require('JSON');\nconst localStorage = require('localStorage');\nconst makeNumber = require('makeNumber');\nconst makeString = require('makeString');\nconst makeTableMap = require('makeTableMap');\nconst math = require('Math');\nconst Object = require('Object');\nconst setInWindow = require('setInWindow');\nconst sha256 = require('sha256');\n\n/*==============================================================================\n==============================================================================*/\n\nconst partnerName = 'stape-gtm-1.1.0';\nconst queueName = 'fbq';\nconst queue = getQueue(queueName);\nconst initIds = copyFromWindow('_meta_gtm_ids') || [];\nconst ecommerceDataLayer = copyFromDataLayer('ecommerce', 1);\nconst dataLayerVersion = data.enableCurrentDataLayerOnly ? 1 : 2;\n\nsetConsent();\nsendEvent();\nsendDataLayerPush();\n\ninjectScript('https://connect.facebook.net/en_US/fbevents.js', data.gtmOnSuccess, data.gtmOnFailure, 'metaPixel');\n\n/*==============================================================================\n  Vendor related functions\n==============================================================================*/\n\nfunction getQueue(queueName) {\n  const q = copyFromWindow(queueName);\n  if (q) {\n    return q;\n  }\n\n  setInWindow(queueName, function () {\n    const callMethod = copyFromWindow(queueName + '.callMethod.apply');\n    if (callMethod) {\n      callInWindow(queueName + '.callMethod.apply', null, arguments);\n    } else {\n      callInWindow(queueName + '.queue.push', arguments);\n    }\n  });\n\n  aliasInWindow('_' + queueName, queueName);\n  createQueue(queueName + '.queue');\n\n  return copyFromWindow(queueName);\n}\n\nfunction setConsent() {\n  if (data.dpoLDU) {\n    queue('dataProcessingOptions', ['LDU'], makeNumber(data.dpoCountry), makeNumber(data.dpoState));\n  }\n\n  if (data.enableConsentMode) {\n    if (!isConsentGranted('ad_storage')) {\n      queue('consent', 'revoke');\n\n      let wasCalled = false;\n\n      addConsentListener('ad_storage', (consentType, granted) => {\n        if (wasCalled || consentType !== 'ad_storage' || !granted) return;\n        wasCalled = true;\n\n        queue('consent', 'grant');\n      });\n\n      return;\n    }\n\n    queue('consent', 'grant');\n\n    return;\n  }\n\n  queue('consent', data.consent === false ? 'revoke' : 'grant');\n}\n\nfunction setSettings(pixelId) {\n  if (data.disableAutoConfig) {\n    queue('set', 'autoConfig', false, pixelId);\n  }\n\n  if (data.disablePushState) {\n    setInWindow(queueName + '.disablePushState', true);\n  }\n}\n\nfunction sendEvent() {\n  const pixelIds = data.pixelIds;\n  const eventName = getEventName();\n  const command = getCommand(eventName);\n  const eventData = getEventData(eventName);\n  const userData = getUserData();\n\n  pixelIds.split(',').forEach((pixelId) => {\n    const isNotInitialized = initIds.indexOf(pixelId) === -1;\n\n    if (isNotInitialized) {\n      initIds.push(pixelId);\n      setInWindow('_meta_gtm_ids', initIds, true);\n      setSettings();\n    }\n\n    if (isNotInitialized || (data.enableEdvancedMatching && !data.runInitOnce)) queue('init', pixelId, userData);\n    queue('set', 'agent', partnerName, pixelId);\n    queue(command, pixelId, eventName, eventData, data.eventId ? { eventID: data.eventId } : undefined);\n  });\n}\n\nfunction getEventName() {\n  if (data.inheritEventName === 'inherit') {\n    let eventName = copyFromDataLayer('event');\n\n    if (!eventName) {\n      if (ecommerceDataLayer.detail) eventName = 'ViewContent';\n      else if (ecommerceDataLayer.add) eventName = 'AddToCart';\n      else if (ecommerceDataLayer.checkout) eventName = 'InitiateCheckout';\n      else if (ecommerceDataLayer.purchase) eventName = 'Purchase';\n    }\n\n    const mapFacebookEventName = {\n      page_view: 'PageView',\n      'gtm.dom': 'PageView',\n      add_payment_info: 'AddPaymentInfo',\n      add_to_cart: 'AddToCart',\n      add_to_wishlist: 'AddToWishlist',\n      sign_up: 'CompleteRegistration',\n      begin_checkout: 'InitiateCheckout',\n      generate_lead: 'Lead',\n      purchase: 'Purchase',\n      search: 'Search',\n      view_item: 'ViewContent',\n\n      contact: 'Contact',\n      customize_product: 'CustomizeProduct',\n      donate: 'Donate',\n      find_location: 'FindLocation',\n      schedule: 'Schedule',\n      start_trial: 'StartTrial',\n      submit_application: 'SubmitApplication',\n      subscribe: 'Subscribe',\n\n      page_view_stape: 'PageView',\n      add_payment_info_stape: 'AddPaymentInfo',\n      add_to_cart_stape: 'AddToCart',\n      sign_up_stape: 'CompleteRegistration',\n      begin_checkout_stape: 'InitiateCheckout',\n      purchase_stape: 'Purchase',\n      view_item_stape: 'ViewContent',\n\n      'gtm4wp.addProductToCartEEC': 'AddToCart',\n      'gtm4wp.productClickEEC': 'ViewContent',\n      'gtm4wp.checkoutOptionEEC': 'InitiateCheckout',\n      'gtm4wp.checkoutStepEEC': 'AddPaymentInfo',\n      'gtm4wp.orderCompletedEEC': 'Purchase'\n    };\n\n    if (!mapFacebookEventName[eventName]) {\n      return eventName;\n    }\n\n    return mapFacebookEventName[eventName];\n  }\n\n  return data.eventName === 'standard' ? data.eventNameStandard : data.eventNameCustom;\n}\n\nfunction getCommand(eventName) {\n  return [\n    'AddPaymentInfo',\n    'AddToCart',\n    'AddToWishlist',\n    'CompleteRegistration',\n    'Contact',\n    'CustomizeProduct',\n    'Donate',\n    'FindLocation',\n    'InitiateCheckout',\n    'Lead',\n    'PageView',\n    'Purchase',\n    'Schedule',\n    'Search',\n    'StartTrial',\n    'SubmitApplication',\n    'Subscribe',\n    'ViewContent'\n  ].indexOf(eventName) === -1\n    ? 'trackSingleCustom'\n    : 'trackSingle';\n}\n\nfunction getUserData() {\n  if (!data.enableEdvancedMatching) {\n    return;\n  }\n\n  let userData = {};\n\n  if (data.enableEventEnhancement) {\n    userData = getEventEnhancement(userData);\n  }\n\n  if (data.enableDataLayerMapping) {\n    let userDataFromDataLayer = getDL('user_data');\n\n    if (getType(userDataFromDataLayer) === 'object') {\n      parseUserData(userData, userDataFromDataLayer, true);\n    }\n  }\n\n  if (getType(data.userDataFromVariable) === 'object') {\n    parseUserData(userData, data.userDataFromVariable, false);\n  }\n\n  if (data.userDataList && data.userDataList.length) {\n    userData = mergeObjects(userData, makeTableMap(data.userDataList, 'name', 'value'));\n  }\n\n  if (objIsEmptyOrContainsOnlyFalsyValues(userData)) {\n    return;\n  }\n\n  if (data.enableEventEnhancement) {\n    storeEventEnhancement(userData);\n  }\n\n  return userData;\n}\n\nfunction getEventData(eventName) {\n  let objectProperties = {};\n\n  if (data.enableDataLayerMapping) {\n    const ecommerce = getDL('ecommerce');\n\n    if (ecommerce) {\n      objectProperties = getUAEventData(eventName, objectProperties, ecommerce);\n    }\n    if (!objectProperties.content_type) {\n      objectProperties = getGA4EventData(eventName, objectProperties, ecommerce);\n    }\n  }\n\n  if (getType(data.objectPropertiesFromVariable) === 'object') {\n    mergeObjects(objectProperties, data.objectPropertiesFromVariable);\n  }\n\n  if (data.objectPropertiesList && data.objectPropertiesList.length) {\n    objectProperties = mergeObjects(objectProperties, makeTableMap(data.objectPropertiesList, 'name', 'value'));\n  }\n\n  return objectProperties;\n}\n\nfunction getEventEnhancement() {\n  if (localStorage) {\n    const gtmeec = localStorage.getItem('gtmeec');\n\n    if (gtmeec) {\n      const gtmeecParsed = JSON.parse(gtmeec);\n\n      if (getType(gtmeecParsed) === 'object') {\n        return gtmeecParsed;\n      }\n    }\n  }\n\n  return {};\n}\n\nfunction normalizeBasedOnSchemaKey(schemaKey, identifier) {\n  if (schemaKey === 'ph') return normalizePhoneNumber(identifier);\n  else if (schemaKey === 'ct' || schemaKey === 'st' || schemaKey === 'zp') {\n    return removeWhiteSpace(identifier);\n  } else return identifier;\n}\n\nfunction hashUserDataFields(userData, storeUserDataInLocalStorage) {\n  const canUseHashSync = getType(copyFromWindow('dataTag256')) === 'function';\n  const hashAsyncHelpers = {\n    pendingHashs: 0,\n    maybeFinish: (userDataHashed) => {\n      if (hashAsyncHelpers.pendingHashs === 0) storeUserDataInLocalStorage(userDataHashed);\n    }\n  };\n\n  const userDataHashed = {};\n\n  const fieldNames = Object.keys(userData);\n  fieldNames.forEach((fieldName) => {\n    const value = userData[fieldName];\n\n    if (value === undefined || value === null || value === '') return;\n    if (isHashed(value)) {\n      userDataHashed[fieldName] = value;\n      return;\n    }\n\n    const normalizedValue = makeString(normalizeBasedOnSchemaKey(fieldName, value)).toLowerCase().trim();\n    if (canUseHashSync) userDataHashed[fieldName] = callInWindow('dataTag256', normalizedValue, 'HEX');\n    else {\n      hashAsyncHelpers.pendingHashs++;\n      sha256(\n        normalizedValue,\n        (digest) => {\n          userDataHashed[fieldName] = digest;\n          hashAsyncHelpers.pendingHashs--;\n          hashAsyncHelpers.maybeFinish(userDataHashed);\n        },\n        () => {\n          hashAsyncHelpers.pendingHashs--;\n        },\n        { outputEncoding: 'hex' }\n      );\n    }\n  });\n\n  if (canUseHashSync) {\n    storeUserDataInLocalStorage(userDataHashed);\n    return userDataHashed;\n  } else {\n    hashAsyncHelpers.maybeFinish(userDataHashed);\n    return;\n  }\n}\n\nfunction storeUserDataInLocalStorage(userData) {\n  if (!objHasProps(userData)) return;\n  const gtmeec = JSON.stringify(userData);\n  localStorage.setItem('gtmeec', gtmeec);\n}\n\nfunction storeEventEnhancement(userData) {\n  if (localStorage && objHasProps(userData)) {\n    if (!data.storeUserDataHashed) storeUserDataInLocalStorage(userData);\n    else hashUserDataFields(userData, storeUserDataInLocalStorage);\n  }\n}\n\nfunction sendDataLayerPush() {\n  if (data.dataLayerEventPush) {\n    const dataLayerQueueName = data.dataLayerVariableName || 'dataLayer';\n    const dataLayerPush = createQueue(dataLayerQueueName);\n\n    dataLayerPush({ eventId: data.eventId, event: data.dataLayerEventName || 'DefaultTagEvent' });\n  }\n}\n\nfunction parseUserData(userData, userDataFrom, useDL) {\n  let email = userDataFrom.email || userDataFrom.sha256_email_address || userDataFrom.email_address || userDataFrom.em;\n  const emailType = getType(email);\n  if (emailType === 'array' || emailType === 'object') email = email[0];\n  if (email) userData.em = email;\n\n  let phone = userDataFrom.phone || userDataFrom.sha256_phone_number || userDataFrom.phone_number || userDataFrom.ph;\n  const phoneType = getType(phone);\n  if (phoneType === 'array' || phoneType === 'object') phone = phone[0];\n  if (phone) userData.ph = phone;\n\n  if (userDataFrom.firstName) userData.fn = userDataFrom.firstName;\n  else if (userDataFrom.nameFirst) userData.fn = userDataFrom.nameFirst;\n  else if (userDataFrom.first_name) userData.fn = userDataFrom.first_name;\n  else if (userDataFrom.fn) userData.fn = userDataFrom.fn;\n  else if (userDataFrom.address && userDataFrom.address.sha256_first_name) userData.fn = userDataFrom.address.sha256_first_name;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].sha256_first_name) userData.fn = userDataFrom.address[0].sha256_first_name;\n  else if (userDataFrom.address && userDataFrom.address.first_name) userData.fn = userDataFrom.address.first_name;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].first_name) userData.fn = userDataFrom.address[0].first_name;\n\n  if (userDataFrom.lastName) userData.ln = userDataFrom.lastName;\n  else if (userDataFrom.nameLast) userData.ln = userDataFrom.nameLast;\n  else if (userDataFrom.last_name) userData.ln = userDataFrom.last_name;\n  else if (userDataFrom.ln) userData.ln = userDataFrom.ln;\n  else if (userDataFrom.address && userDataFrom.address.sha256_last_name) userData.ln = userDataFrom.address.sha256_last_name;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].sha256_last_name) userData.ln = userDataFrom.address[0].sha256_last_name;\n  else if (userDataFrom.address && userDataFrom.address.last_name) userData.ln = userDataFrom.address.last_name;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].last_name) userData.ln = userDataFrom.address[0].last_name;\n\n  if (userDataFrom.ge) userData.ge = userDataFrom.ge;\n  if (userDataFrom.db) userData.db = userDataFrom.db;\n\n  if (userDataFrom.city) userData.ct = userDataFrom.city;\n  else if (userDataFrom.ct) userData.ct = userDataFrom.ct;\n  else if (userDataFrom.address && userDataFrom.address.city) userData.ct = userDataFrom.address.city;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].city) userData.ct = userDataFrom.address[0].city;\n\n  if (userDataFrom.state) userData.st = userDataFrom.state;\n  else if (userDataFrom.region) userData.st = userDataFrom.region;\n  else if (userDataFrom.st) userData.st = userDataFrom.st;\n  else if (userDataFrom.address && userDataFrom.address.state) userData.st = userDataFrom.address.state;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].state) userData.st = userDataFrom.address[0].state;\n  else if (userDataFrom.address && userDataFrom.address.region) userData.st = userDataFrom.address.region;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].region) userData.st = userDataFrom.address[0].region;\n\n  if (userDataFrom.zip) userData.zp = userDataFrom.zip;\n  else if (userDataFrom.postal_code) userData.zp = userDataFrom.postal_code;\n  else if (userDataFrom.zp) userData.zp = userDataFrom.zp;\n  else if (userDataFrom.address && userDataFrom.address.postal_code) userData.zp = userDataFrom.address.postal_code;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].postal_code) userData.zp = userDataFrom.address[0].postal_code;\n  else if (userDataFrom.address && userDataFrom.address.zip) userData.zp = userDataFrom.address.zip;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].zip) userData.zp = userDataFrom.address[0].zip;\n\n  if (userDataFrom.country) userData.country = userDataFrom.country;\n  else if (userDataFrom.address && userDataFrom.address.country) userData.country = userDataFrom.address.country;\n  else if (userDataFrom.address && userDataFrom.address[0] && userDataFrom.address[0].country) userData.country = userDataFrom.address[0].country;\n\n  if (userDataFrom.external_id) userData.external_id = userDataFrom.external_id;\n  else if (userDataFrom.user_id) userData.external_id = userDataFrom.user_id;\n  else if (userDataFrom.userId) userData.external_id = userDataFrom.userId;\n  else if (useDL && getDL('external_id')) userData.external_id = getDL('external_id');\n  else if (useDL && getDL('user_id')) userData.external_id = getDL('user_id');\n  else if (useDL && getDL('userId')) userData.external_id = getDL('userId');\n\n  return userData;\n}\n\nfunction getUAEventData(eventName, objectProperties, ecommerce) {\n  const eventActionMap = {\n    ViewContent: 'detail',\n    AddToCart: 'add',\n    InitiateCheckout: 'checkout',\n    Purchase: 'purchase'\n  };\n\n  if (eventActionMap[eventName]) {\n    const action = eventActionMap[eventName];\n\n    if (ecommerce[action] && ecommerce[action].products && getType(ecommerce[action].products) === 'array') {\n      objectProperties = {\n        content_type: 'product',\n        contents: ecommerce[action].products.map((prod) => ({\n          id: prod.id,\n          quantity: makeNumber(prod.quantity) || 1,\n          item_price: makeNumber(prod.price)\n        })),\n        content_ids: ecommerce[action].products.map((prod) => prod.id),\n        value: ecommerce[action].products.reduce((acc, cur) => {\n          const curVal = math.round(makeNumber(cur.price || 0) * (cur.quantity || 1) * 100) / 100;\n          return acc + curVal;\n        }, 0.0),\n        currency: ecommerce.currencyCode || 'USD'\n      };\n\n      if (['InitiateCheckout', 'Purchase'].indexOf(eventName) > -1)\n        objectProperties.num_items = ecommerce[action].products.reduce((acc, cur) => {\n          return acc + makeNumber(cur.quantity || 1);\n        }, 0);\n    }\n  }\n\n  return objectProperties;\n}\n\nfunction getGA4EventData(eventName, objectProperties, ecommerce) {\n  let items = getDL('items');\n  if (!items && ecommerce && ecommerce.items) {\n    items = ecommerce.items;\n  }\n  let currencyFromItems = '';\n  let valueFromItems = 0;\n\n  if (items && items[0]) {\n    objectProperties.contents = [];\n    objectProperties.content_ids = [];\n    objectProperties.content_type = 'product';\n    if (['InitiateCheckout', 'Purchase'].indexOf(eventName) > -1) {\n      objectProperties.num_items = 0;\n    }\n    currencyFromItems = items[0].currency;\n\n    if (!items[1]) {\n      if (items[0].item_name) objectProperties.content_name = items[0].item_name;\n      if (items[0].item_category) objectProperties.content_category = items[0].item_category;\n      if (items[0].price) objectProperties.value = items[0].quantity ? items[0].quantity * items[0].price : items[0].price;\n    }\n\n    items.forEach((d, i) => {\n      const content = {};\n      if (d.item_id) content.id = d.item_id;\n      content.quantity = makeNumber(d.quantity) || 1;\n\n      if (d.price) {\n        let item_price = makeNumber(d.price);\n        valueFromItems += d.quantity ? d.quantity * item_price : item_price;\n        content.item_price = item_price;\n      }\n\n      objectProperties.contents.push(content);\n      objectProperties.content_ids.push(content.id);\n      if (['InitiateCheckout', 'Purchase'].indexOf(eventName) > -1) {\n        objectProperties.num_items = objectProperties.num_items + content.quantity || 1;\n      }\n    });\n  }\n\n  if (getDL('value')) objectProperties.value = getDL('value');\n\n  if (getDL('currency')) objectProperties.currency = getDL('currency');\n  else if (currencyFromItems) objectProperties.currency = currencyFromItems;\n\n  if (getDL('search_term')) objectProperties.search_string = getDL('search_term');\n\n  if (eventName === 'Purchase') {\n    if (!objectProperties.currency) objectProperties.currency = 'USD';\n    if (!objectProperties.value) objectProperties.value = valueFromItems ? valueFromItems : 0;\n  }\n\n  return objectProperties;\n}\n\nfunction getDL(name) {\n  return copyFromDataLayer(name, dataLayerVersion);\n}\n\n/*==============================================================================\n  Helpers\n==============================================================================*/\n\nfunction mergeObjects(obj1, obj2) {\n  Object.keys(obj2).forEach((key) => {\n    obj1[key] = obj2[key];\n  });\n\n  return obj1;\n}\n\nfunction objHasProps(obj) {\n  return getType(obj) === 'object' && Object.keys(obj).length > 0;\n}\n\nfunction objIsEmptyOrContainsOnlyFalsyValues(obj) {\n  if (getType(obj) !== 'object') return;\n  const objValues = Object.values(obj);\n  if (objValues.length === 0 || objValues.every((v) => !v)) return true;\n}\n\nfunction isHashed(value) {\n  if (!value) return false;\n  return makeString(value).match('^[A-Fa-f0-9]{64}$') !== null;\n}\n\nfunction normalizePhoneNumber(phoneNumber) {\n  if (!phoneNumber) return phoneNumber;\n  return phoneNumber.split('+').join('').split(' ').join('').split('-').join('').split('(').join('').split(')').join('');\n}\n\nfunction removeWhiteSpace(input) {\n  if (!input) return input;\n  return input.split(' ').join('');\n}\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"_meta_gtm_ids\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"_fbq\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.callMethod.apply\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.queue.push\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.queue\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.disablePushState\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataLayer\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataTag256\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedKeys\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"inject_script\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urls\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"https://connect.facebook.net/en_US/fbevents.js\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_local_storage\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"gtmeec\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_consent\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"consentTypes\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"ad_storage\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: Event ID\n  code: \"mockData.eventId = 'eventId';\\n\\nmock('copyFromWindow', key => {\\n  if (key\\\n    \\ === 'fbq') return function() {\\n    if (arguments[0] === 'trackSingle') {\\n\\\n    \\      assertThat(arguments[4], 'eventId not set').isEqualTo({eventID: mockData.eventId});\\n\\\n    \\    }\\n  };\\n});\\n     \\nrunCode(mockData);\\nassertApi('gtmOnSuccess').wasCalled();\"\nsetup: |-\n  const mockData = {\n    pixelIds: '123456789,987654321',\n    consent: true,\n    eventId: 'test'\n  };\n\n\n  let success, failure;\n  mock('injectScript', (url, onsuccess, onfailure) => {\n    success = onsuccess;\n    failure = onfailure;\n    onsuccess();\n  });\n\n  mock('copyFromWindow', key => {\n    if (key === 'fbq') return () => {};\n    if (key === 'dataLayer') return () => {};\n  });\n\n\n___NOTES___\n\nCreated on 08/15/2025, 08:58:45 AM\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "stape-io",
                    "repository": "fb-tag",
                    "version": "ce6118a25adf6e17a94e29b2038238b1c499c907",
                    "signature": "cef887e65c0f820df4969a75182a55b909955bfdc35da8628c4f39b3e2f02fec",
                    "galleryTemplateId": "KFNBV"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "65",
                "name": "Data Tag",
                "fingerprint": "1769090938904",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"TAG\",\n  \"id\": \"cvt_MBTSV\",\n  \"version\": 1,\n  \"displayName\": \"Data Tag\",\n  \"categories\": [\n    \"ANALYTICS\",\n    \"CONVERSIONS\"\n  ],\n  \"brand\": {\n    \"id\": \"github.com_stape-io\",\n    \"displayName\": \"stape-io\",\n    \"thumbnail\": \"data:image/png;base64,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\\u003d\"\n  },\n  \"description\": \"Use this tag for sending data to the Server Container.\",\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"RADIO\",\n    \"name\": \"event_type\",\n    \"displayName\": \"Event Name\",\n    \"radioItems\": [\n      {\n        \"value\": \"standard\",\n        \"displayValue\": \"Standard\",\n        \"subParams\": [\n          {\n            \"type\": \"SELECT\",\n            \"name\": \"event_name_standard\",\n            \"selectItems\": [\n              {\n                \"value\": \"page_view\",\n                \"displayValue\": \"Page View\"\n              },\n              {\n                \"value\": \"add_payment_info\",\n                \"displayValue\": \"Add Payment Info\"\n              },\n              {\n                \"value\": \"add_to_cart\",\n                \"displayValue\": \"Add To Cart\"\n              },\n              {\n                \"value\": \"add_to_wishlist\",\n                \"displayValue\": \"Add To Wishlist\"\n              },\n              {\n                \"value\": \"begin_checkout\",\n                \"displayValue\": \"Begin Checkout\"\n              },\n              {\n                \"value\": \"contact\",\n                \"displayValue\": \"Contact\"\n              },\n              {\n                \"value\": \"customize_product\",\n                \"displayValue\": \"Customize Product\"\n              },\n              {\n                \"value\": \"donate\",\n                \"displayValue\": \"Donate\"\n              },\n              {\n                \"value\": \"exception\",\n                \"displayValue\": \"Exception\"\n              },\n              {\n                \"value\": \"find_location\",\n                \"displayValue\": \"Find Location\"\n              },\n              {\n                \"value\": \"generate_lead\",\n                \"displayValue\": \"Generate Lead\"\n              },\n              {\n                \"value\": \"join_group\",\n                \"displayValue\": \"Join Group\"\n              },\n              {\n                \"value\": \"login\",\n                \"displayValue\": \"Login\"\n              },\n              {\n                \"value\": \"purchase\",\n                \"displayValue\": \"Purchase\"\n              },\n              {\n                \"value\": \"refund\",\n                \"displayValue\": \"Refund\"\n              },\n              {\n                \"value\": \"schedule\",\n                \"displayValue\": \"Schedule\"\n              },\n              {\n                \"value\": \"search\",\n                \"displayValue\": \"Search\"\n              },\n              {\n                \"value\": \"select_content\",\n                \"displayValue\": \"Select Content\"\n              },\n              {\n                \"value\": \"share\",\n                \"displayValue\": \"Share\"\n              },\n              {\n                \"value\": \"sign_up\",\n                \"displayValue\": \"Sign Up\"\n              },\n              {\n                \"value\": \"start_trial\",\n                \"displayValue\": \"Start Trial\"\n              },\n              {\n                \"value\": \"submit_application\",\n                \"displayValue\": \"Submit Application\"\n              },\n              {\n                \"value\": \"subscribe\",\n                \"displayValue\": \"Subscribe\"\n              },\n              {\n                \"value\": \"view_item\",\n                \"displayValue\": \"View Item\"\n              },\n              {\n                \"value\": \"view_item_list\",\n                \"displayValue\": \"View Item List\"\n              },\n              {\n                \"value\": \"view_search_results\",\n                \"displayValue\": \"View Search Results\"\n              }\n            ],\n            \"simpleValueType\": true,\n            \"defaultValue\": \"page_view\",\n            \"alwaysInSummary\": true\n          }\n        ]\n      },\n      {\n        \"value\": \"custom\",\n        \"displayValue\": \"Custom\",\n        \"subParams\": [\n          {\n            \"type\": \"TEXT\",\n            \"name\": \"event_name_custom\",\n            \"simpleValueType\": true\n          }\n        ]\n      }\n    ],\n    \"simpleValueType\": true\n  },\n  {\n    \"type\": \"TEXT\",\n    \"name\": \"gtm_server_domain\",\n    \"displayName\": \"GTM Server Side URL\",\n    \"simpleValueType\": true,\n    \"help\": \"Domain to where the tag will send requests.\\u003cbr\\u003eFor example: \\u003ci\\u003ehttps://gtm.example.com\\u003c/i\\u003e\",\n    \"valueValidators\": [\n      {\n        \"type\": \"NON_EMPTY\"\n      }\n    ],\n    \"alwaysInSummary\": true\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"add_data_layer\",\n    \"checkboxText\": \"Send all from DataLayer\",\n    \"simpleValueType\": true,\n    \"help\": \"Adds all Data Layer values to the request.\"\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"add_common\",\n    \"checkboxText\": \"Send common data\",\n    \"simpleValueType\": true,\n    \"help\": \"Adds to request:\\n\\u003cul\\u003e\\n\\u003cli\\u003epage_location\\u003c/li\\u003e\\n\\u003cli\\u003epage_path\\u003c/li\\u003e\\n\\u003cli\\u003epage_hostname\\u003c/li\\u003e\\n\\u003cli\\u003epage_referrer\\u003c/li\\u003e\\n\\u003cli\\u003epage_title\\u003c/li\\u003e\\n\\u003cli\\u003epage_encoding\\u003c/li\\u003e\\n\\u003cli\\u003escreen_resolution\\u003c/li\\u003e\\n\\u003cli\\u003eviewport_size\\u003c/li\\u003e\\n\\u003c/ul\\u003e\",\n    \"defaultValue\": true\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"add_consent_state\",\n    \"checkboxText\": \"Add consent state\",\n    \"simpleValueType\": true,\n    \"help\": \"Adds \\u003cb\\u003econsent_state\\u003c/b\\u003e object to request.\\u003cbr/\\u003e\\nIncluding following properties:\\u003cbr/\\u003e \\nad_storage\\u003cbr/\\u003e\\nad_user_data\\u003cbr/\\u003e\\nad_personalization\\u003cbr/\\u003e\\nanalytics_storage\\u003cbr/\\u003e\\nfunctionality_storage\\u003cbr/\\u003e\\npersonalization_storage\\u003cbr/\\u003e\\nsecurity_storage\"\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"add_common_cookie\",\n    \"checkboxText\": \"Add Common Cookie\",\n    \"simpleValueType\": true,\n    \"help\": \"The tag will send common cookies in \\u003cI\\u003eeventData\\u003c/i\\u003e to avoid some e-commerce platform limitations. Supported Stape\\u0027s tags: \\u003cbr /\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/facebook-tag\\\" target\\u003d\\\"_blank\\\"\\u003eFacebook Conversion API\\u003c/a\\u003e\\u003cbr /\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/tiktok-tag\\\" target\\u003d\\\"_blank\\\"\\u003eTikTok Events API\\u003c/a\\u003e\\u003cbr /\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/pinterest-capi-tag\\\" target\\u003d\\\"_blank\\\"\\u003ePinterest Conversion API\\u003c/a\\u003e\\u003cbr /\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/snapchat-tag\\\" target\\u003d\\\"_blank\\\"\\u003eSnapchat Conversion API\\u003c/a\\u003e\\u003cbr /\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/taboola-tag\\\" target\\u003d\\\"_blank\\\"\\u003eTaboola\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/awin-tag\\\" target\\u003d\\\"_blank\\\"\\u003eAwin\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/rakuten-tag\\\" target\\u003d\\\"_blank\\\"\\u003eRakuten\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/klaviyo-tag\\\" target\\u003d\\\"_blank\\\"\\u003eKlaviyo\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/outbrain-tag\\\" target\\u003d\\\"_blank\\\"\\u003eOutbrain\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/webgains-tag\\\" target\\u003d\\\"_blank\\\"\\u003eWebgains\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/postscript-tag\\\" target\\u003d\\\"_blank\\\"\\u003ePostscript\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/microsoft-capi-tag\\\" target\\u003d\\\"_blank\\\"\\u003eMicrosoft UET Conversion API\\u003c/a\\u003e\\u003c/br\\u003e\\n\\u003ca href\\u003d\\\"https://tagmanager.google.com/gallery/#/owners/stape-io/templates/google-conversion-events-tag\\\" target\\u003d\\\"_blank\\\"\\u003eGoogle Conversion Events (Data Manager)\\u003c/a\\u003e\\u003c/br\\u003e\"\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"custom\",\n    \"displayName\": \"Event Data\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"subParams\": [\n      {\n        \"type\": \"SIMPLE_TABLE\",\n        \"name\": \"custom_data\",\n        \"displayName\": \"\",\n        \"simpleTableColumns\": [\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"TEXT\",\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ]\n          },\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"TEXT\"\n          },\n          {\n            \"defaultValue\": \"none\",\n            \"displayName\": \"Transformation\",\n            \"name\": \"transformation\",\n            \"type\": \"SELECT\",\n            \"selectItems\": [\n              {\n                \"value\": \"none\",\n                \"displayValue\": \"None\"\n              },\n              {\n                \"value\": \"trim\",\n                \"displayValue\": \"Trim\"\n              },\n              {\n                \"value\": \"to_lower_case\",\n                \"displayValue\": \"To lower case\"\n              },\n              {\n                \"value\": \"md5\",\n                \"displayValue\": \"MD5 hash\"\n              },\n              {\n                \"value\": \"base64\",\n                \"displayValue\": \"Base64\"\n              },\n              {\n                \"value\": \"sha256base64\",\n                \"displayValue\": \"SHA-256 digest (Base64 encoded)\"\n              },\n              {\n                \"value\": \"sha256hex\",\n                \"displayValue\": \"SHA-256 digest (HEX encoded)\"\n              }\n            ],\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ]\n          },\n          {\n            \"defaultValue\": \"none\",\n            \"displayName\": \"Store\",\n            \"name\": \"store\",\n            \"type\": \"SELECT\",\n            \"selectItems\": [\n              {\n                \"value\": \"none\",\n                \"displayValue\": \"None\"\n              },\n              {\n                \"value\": \"all\",\n                \"displayValue\": \"Everywhere\"\n              },\n              {\n                \"value\": \"localStorage\",\n                \"displayValue\": \"Local Storage\"\n              },\n              {\n                \"value\": \"cookies\",\n                \"displayValue\": \"Cookies\"\n              }\n            ],\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"user\",\n    \"displayName\": \"User Data\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"subParams\": [\n      {\n        \"type\": \"SIMPLE_TABLE\",\n        \"name\": \"user_data\",\n        \"displayName\": \"\",\n        \"simpleTableColumns\": [\n          {\n            \"defaultValue\": \"email_address\",\n            \"displayName\": \"Name\",\n            \"name\": \"name\",\n            \"type\": \"SELECT\",\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ],\n            \"isUnique\": true,\n            \"selectItems\": [\n              {\n                \"value\": \"email_address\",\n                \"displayValue\": \"Email Address\"\n              },\n              {\n                \"value\": \"phone_number\",\n                \"displayValue\": \"Phone Number\"\n              },\n              {\n                \"value\": \"first_name\",\n                \"displayValue\": \"First Name\"\n              },\n              {\n                \"value\": \"last_name\",\n                \"displayValue\": \"Last Name\"\n              },\n              {\n                \"value\": \"gender\",\n                \"displayValue\": \"Gender\"\n              },\n              {\n                \"value\": \"db\",\n                \"displayValue\": \"Date of Birth\"\n              },\n              {\n                \"value\": \"street\",\n                \"displayValue\": \"Street\"\n              },\n              {\n                \"value\": \"city\",\n                \"displayValue\": \"City\"\n              },\n              {\n                \"value\": \"region\",\n                \"displayValue\": \"Region\"\n              },\n              {\n                \"value\": \"postal_code\",\n                \"displayValue\": \"Postal Code\"\n              },\n              {\n                \"value\": \"country\",\n                \"displayValue\": \"Country\"\n              },\n              {\n                \"value\": \"user_id\",\n                \"displayValue\": \"User ID\"\n              }\n            ]\n          },\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Value\",\n            \"name\": \"value\",\n            \"type\": \"TEXT\"\n          },\n          {\n            \"defaultValue\": \"none\",\n            \"displayName\": \"Transformation\",\n            \"name\": \"transformation\",\n            \"type\": \"SELECT\",\n            \"selectItems\": [\n              {\n                \"value\": \"none\",\n                \"displayValue\": \"None\"\n              },\n              {\n                \"value\": \"trim\",\n                \"displayValue\": \"Trim\"\n              },\n              {\n                \"value\": \"to_lower_case\",\n                \"displayValue\": \"To lower case\"\n              },\n              {\n                \"value\": \"md5\",\n                \"displayValue\": \"MD5 hash\"\n              },\n              {\n                \"value\": \"base64\",\n                \"displayValue\": \"Base64\"\n              },\n              {\n                \"value\": \"sha256base64\",\n                \"displayValue\": \"SHA-256 digest (Base64 encoded)\"\n              },\n              {\n                \"value\": \"sha256hex\",\n                \"displayValue\": \"SHA-256 digest (HEX encoded)\"\n              }\n            ],\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ]\n          },\n          {\n            \"defaultValue\": \"none\",\n            \"displayName\": \"Store\",\n            \"name\": \"store\",\n            \"type\": \"SELECT\",\n            \"selectItems\": [\n              {\n                \"value\": \"none\",\n                \"displayValue\": \"None\"\n              },\n              {\n                \"value\": \"all\",\n                \"displayValue\": \"Everywhere\"\n              },\n              {\n                \"value\": \"localStorage\",\n                \"displayValue\": \"Local Storage\"\n              },\n              {\n                \"value\": \"cookies\",\n                \"displayValue\": \"Cookies\"\n              }\n            ],\n            \"valueValidators\": [\n              {\n                \"type\": \"NON_EMPTY\"\n              }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"settings\",\n    \"displayName\": \"Settings\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"subParams\": [\n      {\n        \"type\": \"SELECT\",\n        \"name\": \"request_type\",\n        \"displayName\": \"Request type\",\n        \"macrosInSelect\": false,\n        \"selectItems\": [\n          {\n            \"value\": \"auto\",\n            \"displayValue\": \"Auto\"\n          },\n          {\n            \"value\": \"post\",\n            \"displayValue\": \"POST\"\n          },\n          {\n            \"value\": \"get\",\n            \"displayValue\": \"GET\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"defaultValue\": \"auto\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ],\n        \"help\": \"We highly recommend using \\u003cb\\u003eAuto\\u003c/b\\u003e. Change this only if you know what you are doing.\"\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"request_path\",\n        \"displayName\": \"Path\",\n        \"simpleValueType\": true,\n        \"defaultValue\": \"/data\",\n        \"help\": \"The path used for sending requests to the GTM Server Side container. If you use the Data client on GTM Server Side, the Path should be \\u003cb\\u003e/data\\u003c/b\\u003e.\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          },\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"^/.*\"\n            ],\n            \"errorMessage\": \"The path must start with /.\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"protocol_version\",\n        \"displayName\": \"Protocol version\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 2,\n        \"help\": \"Protocol version that used for sending a request to Data client on GTM Server Side.\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"data_tag_load_script_url\",\n        \"displayName\": \"Data Tag Script URL\",\n        \"simpleValueType\": true,\n        \"help\": \"URL where to load Data tag script from, by default it will be loaded from \\u003cI\\u003ehttps://stapecdn.com/dtag/${data-script-version}.js\\u003c/i\\u003e. This can be parameterized with \\u003ci\\u003e${data-script-version}\\u003c/i\\u003e in order to load the correct version for this tag.\",\n        \"valueValidators\": [\n          {\n            \"type\": \"REGEX\",\n            \"args\": [\n              \"^(https://).*(\\\\.js)$\"\n            ]\n          }\n        ],\n        \"alwaysInSummary\": false,\n        \"defaultValue\": \"https://stapecdn.com/dtag/v8.js\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"addGaParameters\",\n        \"checkboxText\": \"Add GA4 specific parameters\",\n        \"simpleValueType\": true,\n        \"help\": \"Adds specific parameters for the server GA4 tag.\",\n        \"defaultValue\": false,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"request_type\",\n            \"paramValue\": \"post\",\n            \"type\": \"EQUALS\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"gaId\",\n        \"displayName\": \"Measurement ID\",\n        \"simpleValueType\": true,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"addGaParameters\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueHint\": \"G-ABCD123456\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ],\n        \"help\": \"Enter the Measurement ID of your GA4 property.\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"dataLayerEventPush\",\n        \"checkboxText\": \"Push event to DataLayer after tag receives a response\",\n        \"simpleValueType\": true,\n        \"help\": \"Helpful in obtaining data from the server.\",\n        \"defaultValue\": false\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dataLayerEventName\",\n        \"displayName\": \"DataLayer Event Name\",\n        \"simpleValueType\": true,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"dataLayerEventPush\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ],\n        \"valueHint\": \"page_view_response\"\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dataLayerVariableName\",\n        \"displayName\": \"DataLayer Object Name\",\n        \"simpleValueType\": true,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"dataLayerEventPush\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ],\n        \"defaultValue\": \"dataLayer\",\n        \"help\": \"Use \\u003ci\\u003edataLayer\\u003c/i\\u003e by default. Modify only if you renamed dataLayer object name.\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"richsstsse\",\n        \"checkboxText\": \"Support rich command protocol\",\n        \"simpleValueType\": true,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"request_type\",\n            \"paramValue\": \"get\",\n            \"type\": \"NOT_EQUALS\"\n          }\n        ],\n        \"help\": \"Useful if you have server-side tags, that (partially) depend on the \\u003cI\\u003esendPixelFromBrowser()\\u003c/i\\u003e API for 3rd party cookies (e.g. Google Ads Conversion, Google Ads Remarketing).\",\n        \"defaultValue\": false\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"waitForCookies\",\n        \"checkboxText\": \"Wait for cookies before event is pushed\",\n        \"simpleValueType\": true,\n        \"defaultValue\": false,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"richsstsse\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"help\": \"Wait for all cookies to be set before event is pushed to DataLayer. Helpful if a server-side tag sets cookies that a web tag relies on.\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"useFetchInsteadOfXHR\",\n        \"checkboxText\": \"Use fetch instead of XMLHttpRequest (for POST requests only)\",\n        \"simpleValueType\": true,\n        \"help\": \"Using \\u003ci\\u003efetch\\u003c/i\\u003e with \\u003ci\\u003ekeepalive\\u003c/i\\u003e option which allow the request to outlive the page. \\u003ca href\\u003d\\\"https://developer.mozilla.org/en-US/docs/Web/API/fetch#keepalive\\\"\\u003eRead more\\u003c/a\\u003e.\",\n        \"defaultValue\": true\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst copyFromDataLayer = require('copyFromDataLayer');\nconst JSON = require('JSON');\nconst getUrl = require('getUrl');\nconst getReferrerUrl = require('getReferrerUrl');\nconst readTitle = require('readTitle');\nconst injectScript = require('injectScript');\nconst callInWindow = require('callInWindow');\nconst makeNumber = require('makeNumber');\nconst readCharacterSet = require('readCharacterSet');\nconst localStorage = require('localStorage');\nconst sendPixel = require('sendPixel');\nconst encodeUriComponent = require('encodeUriComponent');\nconst toBase64 = require('toBase64');\nconst makeString = require('makeString');\nconst setCookie = require('setCookie');\nconst getCookieValues = require('getCookieValues');\nconst getContainerVersion = require('getContainerVersion');\nconst isConsentGranted = require('isConsentGranted');\nconst getTimestampMillis = require('getTimestampMillis');\nconst generateRandom = require('generateRandom');\nconst copyFromWindow = require('copyFromWindow');\nconst setInWindow = require('setInWindow');\n\nlet pageLocation = getUrl();\n\nif (\n  pageLocation &&\n  pageLocation.lastIndexOf('https://gtm-msr.appspot.com/', 0) === 0\n) {\n  data.gtmOnSuccess();\n\n  return;\n}\n\nconst userAndCustomData = getUserAndCustomDataArray();\nlet requestType = determinateRequestType();\n\nconst normalizedServerUrl = normalizeServerUrl();\n\nif (requestType === 'post') {\n  const dataScriptVersion = 'v8';\n  const dataTagScriptUrl =\n    typeof data.data_tag_load_script_url !== 'undefined'\n      ? data.data_tag_load_script_url.replace(\n          '${data-script-version}',\n          dataScriptVersion\n        )\n      : 'https://stapecdn.com/dtag/' + dataScriptVersion + '.js';\n  injectScript(\n    dataTagScriptUrl,\n    sendPostRequest,\n    data.gtmOnFailure,\n    dataTagScriptUrl\n  );\n} else {\n  sendGetRequest();\n}\n\nfunction sendPostRequest() {\n  let eventData = {};\n\n  eventData = addCommonDataForPostRequest(data, eventData);\n  eventData = addRequiredDataForPostRequest(data, eventData);\n  eventData = addGaRequiredData(data, eventData);\n\n  callInWindow(\n    'dataTagSendData',\n    eventData,\n    normalizedServerUrl.gtmServerDomain,\n    normalizedServerUrl.requestPath +\n      '?v=' +\n      eventData.v +\n      '&event=' +\n      encodeUriComponent(eventData.event_name) +\n      (data.richsstsse ? '&richsstsse' : ''),\n    data.dataLayerEventName,\n    data.dataLayerVariableName,\n    data.waitForCookies,\n    data.useFetchInsteadOfXHR\n  );\n\n  data.gtmOnSuccess();\n}\n\nfunction sendGetRequest() {\n  sendPixel(\n    addDataForGetRequest(data, buildEndpoint()),\n    data.gtmOnSuccess,\n    data.gtmOnFailure\n  );\n}\n\nfunction normalizeServerUrl() {\n  let gtmServerDomain = data.gtm_server_domain;\n  let requestPath = data.request_path;\n\n  // Add 'https://' if gtmServerDomain doesn't start with it\n  if (gtmServerDomain.indexOf('http://') !== 0 && gtmServerDomain.indexOf('https://') !== 0) {\n    gtmServerDomain = 'https://' + gtmServerDomain;\n  }\n\n  // Removes trailing slash from gtmServerDomain if it ends with it\n  if (gtmServerDomain.charAt(gtmServerDomain.length - 1) === '/') {\n    gtmServerDomain = gtmServerDomain.slice(0, -1);\n  }\n\n  // Adds slash to first position of requestPath if doesn't start with it\n  if (requestPath.charAt(0) !== '/') {\n    requestPath = '/' + requestPath;\n  }\n\n  return {\n    gtmServerDomain: gtmServerDomain,\n    requestPath: requestPath\n  };\n}\n\nfunction buildEndpoint() {\n  return normalizedServerUrl.gtmServerDomain + normalizedServerUrl.requestPath;\n}\n\nfunction addRequiredDataForPostRequest(data, eventData) {\n  eventData.event_name = getEventName(data);\n  eventData.v = makeNumber(data.protocol_version);\n\n  let customData = getCustomData(data, true);\n\n  for (let key in customData) {\n    eventData[customData[key].name] = customData[key].value;\n  }\n\n  eventData = addTempClientId(eventData);\n\n  return eventData;\n}\n\nfunction addGaRequiredData(data, eventData) {\n  if (data.addGaParameters && data.gaId) {\n    eventData['x-ga-measurement_id'] = data.gaId;\n    eventData['x-ga-page_id'] = copyFromDataLayer('gtm.start');\n    eventData['x-ga-mp2-richsstsse'] = '';\n    eventData['x-ga-mp2-seg'] = 1;\n    eventData['x-ga-request_count'] = 1;\n    eventData['x-ga-protocol_version'] = 2;\n    eventData.v = 2;\n  }\n\n  return eventData;\n}\n\nfunction addDataForGetRequest(data, url) {\n  let eventData = {};\n  url +=\n    '?v=' +\n    data.protocol_version +\n    '&event=' +\n    encodeUriComponent(getEventName(data));\n\n  if (data.add_common) {\n    eventData = addCommonData(data, eventData);\n  }\n\n  if (data.add_consent_state) {\n    eventData = addConsentStateData(eventData);\n  }\n\n  if (data.add_common_cookie) {\n    eventData = addCommonCookie(eventData);\n  }\n\n  let customData = getCustomData(data, false);\n\n  if (customData.length) {\n    for (let customDataKey in customData) {\n      eventData[customData[customDataKey].name] =\n        customData[customDataKey].value;\n    }\n  }\n\n  eventData = addTempClientId(eventData);\n\n  if (data.request_type === 'auto') {\n    return (\n      url + '&dtdc=' + encodeUriComponent(toBase64(JSON.stringify(eventData)))\n    );\n  }\n\n  for (let eventDataKey in eventData) {\n    url +=\n      '&' +\n      eventDataKey +\n      '=' +\n      (eventData[eventDataKey]\n        ? encodeUriComponent(eventData[eventDataKey])\n        : '');\n  }\n\n  return url;\n}\n\nfunction addCommonDataForPostRequest(data, eventData) {\n  if (data.add_common || data.add_data_layer) {\n    const dataTagData = callInWindow(\n      'dataTagGetData',\n      getContainerVersion()['containerId']\n    );\n\n    if (data.add_data_layer && dataTagData.dataModel) {\n      for (let dataKey in dataTagData.dataModel) {\n        eventData[dataKey] = dataTagData.dataModel[dataKey];\n      }\n    }\n\n    if (data.add_common) {\n      eventData = addCommonData(data, eventData);\n      eventData.screen_resolution =\n        dataTagData.screen.width + 'x' + dataTagData.screen.height;\n      eventData.viewport_size =\n        dataTagData.innerWidth + 'x' + dataTagData.innerHeight;\n    }\n  }\n  if (data.add_consent_state) {\n    eventData = addConsentStateData(eventData);\n  }\n\n  if (data.add_common_cookie) {\n    eventData = addCommonCookie(eventData);\n  }\n\n  return eventData;\n}\n\nfunction addCommonData(data, eventData) {\n  eventData.page_location = getUrl();\n  eventData.page_hostname = getUrl('host');\n  eventData.page_referrer = getReferrerUrl();\n  eventData.page_title = readTitle();\n  eventData.page_encoding = readCharacterSet();\n\n  return eventData;\n}\n\nfunction addConsentStateData(eventData) {\n  eventData.consent_state = {\n    ad_storage: isConsentGranted('ad_storage'),\n    ad_user_data: isConsentGranted('ad_user_data'),\n    ad_personalization: isConsentGranted('ad_personalization'),\n    analytics_storage: isConsentGranted('analytics_storage'),\n    functionality_storage: isConsentGranted('functionality_storage'),\n    personalization_storage: isConsentGranted('personalization_storage'),\n    security_storage: isConsentGranted('security_storage'),\n  };\n  return eventData;\n}\n\nfunction addTempClientId(eventData) {\n  const tempClientIdStorageKey = 'gtm_dataTagTempClientId';\n  const tempClientId = copyFromWindow(tempClientIdStorageKey) || \n    'dcid.1.' +\n    getTimestampMillis() +\n    '.' +\n    generateRandom(100000000, 999999999);\n  \n  eventData._dcid_temp = tempClientId;\n  setInWindow(tempClientIdStorageKey, eventData._dcid_temp);\n\n  return eventData;\n}\n\nfunction getEventName(data) {\n  const eventName = 'page_view';\n\n  if (data.event_type === 'standard') {\n    return data.event_name_standard ? data.event_name_standard : eventName;\n  }\n\n  if (data.event_type === 'custom') {\n    return data.event_name_custom ? data.event_name_custom : eventName;\n  }\n\n  return eventName;\n}\n\nfunction getCustomData(data, dtagLoaded) {\n  let dataToStore = [];\n  let customData = userAndCustomData;\n\n  for (let dataKey in customData) {\n    let dataValue = customData[dataKey].value;\n    let dataTransformation = customData[dataKey].transformation;\n\n    if (dataValue) {\n      if (dataTransformation === 'trim') {\n        dataValue = makeString(dataValue);\n        dataValue = dataValue.trim();\n      }\n\n      if (dataTransformation === 'to_lower_case') {\n        dataValue = makeString(dataValue);\n        dataValue = dataValue.trim().toLowerCase();\n      }\n\n      if (dataTransformation === 'base64') {\n        dataValue = makeString(dataValue);\n        dataValue = toBase64(dataValue);\n      }\n\n      if (dtagLoaded && dataTransformation === 'md5') {\n        dataValue = makeString(dataValue);\n        dataValue = callInWindow('dataTagMD5', dataValue.trim().toLowerCase());\n      }\n\n      if (dtagLoaded && dataTransformation === 'sha256base64') {\n        dataValue = makeString(dataValue);\n        dataValue = callInWindow(\n          'dataTag256',\n          dataValue.trim().toLowerCase(),\n          'B64'\n        );\n      }\n\n      if (dtagLoaded && dataTransformation === 'sha256hex') {\n        dataValue = makeString(dataValue);\n        dataValue = callInWindow(\n          'dataTag256',\n          dataValue.trim().toLowerCase(),\n          'HEX'\n        );\n      }\n\n      if (customData[dataKey].store && customData[dataKey].store !== 'none') {\n        dataToStore.push({\n          store: customData[dataKey].store,\n          name: customData[dataKey].name,\n          value: dataValue,\n        });\n      }\n\n      customData[dataKey].value = dataValue;\n    }\n  }\n\n  if (dataToStore.length !== 0) {\n    storeData(dataToStore);\n  }\n\n  return customData;\n}\n\nfunction storeData(dataToStore) {\n  let dataToStoreCookieResult = {};\n  let dataToStoreLocalStorageResult = {};\n  let dataToStoreCookie = getCookieValues('stape')[0];\n\n  if (dataToStoreCookie) {\n    dataToStoreCookie = JSON.parse(dataToStoreCookie);\n\n    if (dataToStoreCookie) {\n      for (let attrName in dataToStoreCookie) {\n        if (dataToStoreCookie[attrName])\n          dataToStoreCookieResult[attrName] = dataToStoreCookie[attrName];\n      }\n    }\n  }\n\n  if (localStorage) {\n    let dataToStoreLocalStorage = localStorage.getItem('stape');\n\n    if (dataToStoreLocalStorage) {\n      dataToStoreLocalStorage = JSON.parse(dataToStoreLocalStorage);\n\n      if (dataToStoreLocalStorage) {\n        for (let attrName in dataToStoreLocalStorage) {\n          if (dataToStoreLocalStorage[attrName])\n            dataToStoreLocalStorageResult[attrName] =\n              dataToStoreLocalStorage[attrName];\n        }\n      }\n    }\n  }\n\n  for (let attrName in dataToStore) {\n    if (dataToStore[attrName].value) {\n      if (\n        dataToStore[attrName].store === 'all' ||\n        dataToStore[attrName].store === 'localStorage'\n      ) {\n        dataToStoreLocalStorageResult[dataToStore[attrName].name] =\n          dataToStore[attrName].value;\n      }\n\n      if (\n        dataToStore[attrName].store === 'all' ||\n        dataToStore[attrName].store === 'cookies'\n      ) {\n        dataToStoreCookieResult[dataToStore[attrName].name] =\n          dataToStore[attrName].value;\n      }\n    }\n  }\n\n  if (localStorage && getObjectLength(dataToStoreLocalStorageResult) !== 0) {\n    localStorage.setItem(\n      'stape',\n      JSON.stringify(dataToStoreLocalStorageResult)\n    );\n  }\n\n  if (getObjectLength(dataToStoreCookieResult) !== 0) {\n    setCookie('stape', JSON.stringify(dataToStoreCookieResult), {\n      secure: true,\n      domain: 'auto',\n      path: '/',\n    });\n  }\n}\n\nfunction getObjectLength(object) {\n  let length = 0;\n\n  for (let key in object) {\n    if (object.hasOwnProperty(key)) {\n      ++length;\n    }\n  }\n  return length;\n}\n\nfunction determinateRequestType() {\n  if (data.request_type !== 'auto') {\n    return data.request_type;\n  }\n\n  if (data.add_data_layer) {\n    return 'post';\n  }\n\n  if (data.dataLayerEventPush) {\n    return 'post';\n  }\n\n  if (data.richsstsse) {\n    return 'post';\n  }\n\n  const isHashingEnabled = userAndCustomData.some(\n    (item) =>\n      item.transformation === 'md5' ||\n      item.transformation === 'sha256base64' ||\n      item.transformation === 'sha256hex'\n  );\n\n  if (isHashingEnabled) return 'post';\n\n  const userAndCustomDataLength = makeNumber(\n    JSON.stringify(userAndCustomData).length\n  );\n  return userAndCustomDataLength > 1500 ? 'post' : 'get';\n}\n\nfunction getUserAndCustomDataArray() {\n  let userAndCustomDataArray = [];\n\n  if (data.custom_data && data.custom_data.length) {\n    userAndCustomDataArray = data.custom_data;\n  }\n\n  if (data.user_data && data.user_data.length) {\n    for (let userDataKey in data.user_data) {\n      userAndCustomDataArray.push(data.user_data[userDataKey]);\n    }\n  }\n  return userAndCustomDataArray;\n}\n\nfunction addCommonCookie(eventData) {\n  const cookieNames = [\n    // FB cookies\n    '_fbc',\n    '_fbp',\n    '_gtmeec',\n    // TikTok cookies\n    'ttclid',\n    '_ttp',\n    // Pinterest cookies\n    '_epik',\n    // Snapchat cookies\n    '_scid',\n    '_scclid',\n    // Taboola cookies\n    'taboola_cid',\n    // Awin cookies\n    'awin_awc',\n    'awin_sn_awc',\n    'awin_source',\n    // Rakuten cookies\n    'rakuten_site_id',\n    'rakuten_time_entered',\n    'rakuten_ran_mid',\n    'rakuten_ran_eaid',\n    'rakuten_ran_site_id',\n    // Klaviyo cookies\n    'stape_klaviyo_email',\n    'stape_klaviyo_kx',\n    'stape_klaviyo_viewed_items',\n    // Outbrain cookies\n    'outbrain_cid',\n    // Webgains cookies\n    'wg_cid',\n    // Postscript cookies\n    'ps_id',\n    // Microsoft UET CAPI cookies\n    'uet_msclkid', '_uetmsclkid',\n    'uet_vid', '_uetvid',\n    // Google cookies\n    '_dm_session_attributes',\n    'FPGCLAW', '_gcl_aw',\n    'FPGCLAG', '_gcl_ag',\n    'FPGCLGB', '_gcl_gb'\n  ];\n  let commonCookie = null;\n\n  for (var i = 0; i < cookieNames.length; i++) {\n    const name = cookieNames[i];\n    var cookie = getCookieValues(name)[0];\n    if (cookie) {\n      commonCookie = commonCookie || {};\n      commonCookie[name] = cookie;\n    }\n  }\n  if (commonCookie) {\n    eventData.common_cookie = commonCookie;\n  }\n  return eventData;\n}\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataLayer\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataTagSendData\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataTagGetData\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataTagData\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataTagMD5\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataTag256\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"gtm_dataTagTempClientId\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_referrer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urlParts\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        },\n        {\n          \"key\": \"queriesAllowed\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedKeys\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"specific\"\n          }\n        },\n        {\n          \"key\": \"keyPatterns\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"gtm.uniqueEventId\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"gtm.start\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_title\",\n        \"versionId\": \"1\"\n      },\n      \"param\": []\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_url\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urlParts\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        },\n        {\n          \"key\": \"queriesAllowed\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"inject_script\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urls\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"https://stapecdn.com/dtag/*\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_local_storage\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"stape\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_character_set\",\n        \"versionId\": \"1\"\n      },\n      \"param\": []\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"send_pixel\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedUrls\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_cookies\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"cookieAccess\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"specific\"\n          }\n        },\n        {\n          \"key\": \"cookieNames\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"stape\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_fbc\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_fbp\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_gtmeec\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"ttclid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_ttp\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_epik\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_scid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_scclid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"taboola_cid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"awin_awc\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"awin_sn_awc\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"awin_source\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"rakuten_site_id\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"rakuten_time_entered\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"rakuten_ran_mid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"rakuten_ran_eaid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"rakuten_ran_site_id\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"stape_klaviyo_email\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"stape_klaviyo_kx\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"stape_klaviyo_viewed_items\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"outbrain_cid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"wg_cid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"ps_id\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"uet_msclkid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_uetmsclkid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"uet_vid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_uetvid\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_dm_session_attributes\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"FPGCLAW\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_gcl_aw\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"FPGCLAG\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_gcl_ag\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"FPGCLGB\"\n              },\n              {\n                \"type\": 1,\n                \"string\": \"_gcl_gb\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"set_cookies\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedCookies\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"name\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"domain\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"path\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"secure\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"session\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"stape\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"*\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"*\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"any\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"any\"\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_container_data\",\n        \"versionId\": \"1\"\n      },\n      \"param\": []\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_consent\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"consentTypes\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"ad_storage\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"ad_user_data\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"ad_personalization\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"analytics_storage\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"functionality_storage\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"personalization_storage\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"consentType\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"security_storage\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: GTM Server Side URL and Request Path for GET requests are normalized\n  code: \"mockData.request_type = 'get';\\nmockData.event_type = 'standard';\\nmockData.event_name_standard\\\n    \\ = 'page_view';\\n\\n[\\n  { gtm_server_domain: 'example.com', request_path: '/foo',\\\n    \\ expectedServerUrl: 'https://example.com/foo' },\\n  { gtm_server_domain: 'example.com/',\\\n    \\ request_path: '/foo', expectedServerUrl: 'https://example.com/foo' },\\n  { gtm_server_domain:\\\n    \\ 'https://example.com', request_path: '/foo', expectedServerUrl: 'https://example.com/foo'\\\n    \\ },\\n  { gtm_server_domain: 'https://example.com/', request_path: '/foo', expectedServerUrl:\\\n    \\ 'https://example.com/foo' },\\n  { gtm_server_domain: 'example.com', request_path:\\\n    \\ 'foo/', expectedServerUrl: 'https://example.com/foo' },\\n  { gtm_server_domain:\\\n    \\ 'example.com/', request_path: 'foo/', expectedServerUrl: 'https://example.com/foo'\\\n    \\ },\\n  { gtm_server_domain: 'https://example.com', request_path: 'foo/', expectedServerUrl:\\\n    \\ 'https://example.com/foo' },\\n  { gtm_server_domain: 'https://example.com/',\\\n    \\ request_path: 'foo/', expectedServerUrl: 'https://example.com/foo' },\\n  { gtm_server_domain:\\\n    \\ 'http://example.com', request_path: '/foo', expectedServerUrl: 'http://example.com/foo'\\\n    \\ },\\n  { gtm_server_domain: 'http://example.com/', request_path: '/foo', expectedServerUrl:\\\n    \\ 'http://example.com/foo' },\\n  { gtm_server_domain: 'http://example.com', request_path:\\\n    \\ 'foo/', expectedServerUrl: 'http://example.com/foo' },\\n  { gtm_server_domain:\\\n    \\ 'http://example.com/', request_path: 'foo/', expectedServerUrl: 'http://example.com/foo'\\\n    \\ },\\n].forEach((testCase, testNumber) => {\\n  mockData.gtm_server_domain = testCase.gtm_server_domain;\\n\\\n    \\  mockData.request_path = testCase.request_path;\\n  \\n  mock('sendPixel', function(url,\\\n    \\ onSuccess, onFailure) {\\n    // logToConsole('#' + testNumber + ' - sendPixel\\\n    \\ called with URL:', url);\\n    assertThat(url).contains(testCase.expectedServerUrl);\\n\\\n    \\  });\\n\\n  runCode(mockData);\\n});\"\n- name: GTM Server Side URL and Request Path for POST requests are normalized\n  code: \"mockData.request_type = 'post';\\nmockData.event_type = 'standard';\\nmockData.event_name_standard\\\n    \\ = 'cc';\\n\\nmock('injectScript', function(url, onSuccess, onFailure, cacheToken)\\\n    \\ {\\n  onSuccess();\\n});\\n\\nconst expectedRequestPathParams = '?v=' + mockData.protocol_version;\\n\\\n    \\n[\\n  { gtm_server_domain: 'example.com', request_path: '/foo', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'example.com/', request_path: '/foo', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'https://example.com', request_path: '/foo', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'https://example.com/', request_path: '/foo', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'example.com', request_path: 'foo/', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo/' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'example.com/', request_path: 'foo/', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo/' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'https://example.com', request_path: 'foo/', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo/' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'https://example.com/', request_path: 'foo/', expectedGtmServerDomain:\\\n    \\ 'https://example.com', expectedRequestPath: '/foo/' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'http://example.com', request_path: '/foo', expectedGtmServerDomain:\\\n    \\ 'http://example.com', expectedRequestPath: '/foo' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'http://example.com/', request_path: '/foo', expectedGtmServerDomain:\\\n    \\ 'http://example.com', expectedRequestPath: '/foo' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'http://example.com', request_path: 'foo/', expectedGtmServerDomain:\\\n    \\ 'http://example.com', expectedRequestPath: '/foo/' + expectedRequestPathParams\\\n    \\ },\\n  { gtm_server_domain: 'http://example.com/', request_path: 'foo/', expectedGtmServerDomain:\\\n    \\ 'http://example.com', expectedRequestPath: '/foo/' + expectedRequestPathParams\\\n    \\ },\\n].forEach((testCase, testNumber) => {\\n  mockData.gtm_server_domain = testCase.gtm_server_domain;\\n\\\n    \\  mockData.request_path = testCase.request_path;\\n  \\n  mock('callInWindow',\\\n    \\ function(functionName, eventData, gtmServerDomain, requestPath, dataLayerEventName,\\\n    \\ dataLayerVariableName, waitForCookies, useFetchInsteadOfXHR) {\\n    /*\\n   \\\n    \\ logToConsole('#' + testNumber + ' - callInWindow called with:', {\\n      functionName:\\\n    \\ functionName,\\n      gtmServerDomain: gtmServerDomain,\\n      requestPath: requestPath,\\n\\\n    \\    });\\n    */\\n    \\n    assertThat(gtmServerDomain).isEqualTo(testCase.expectedGtmServerDomain);\\n\\\n    \\    const requestPathStartsWith = requestPath.indexOf(testCase.expectedRequestPath)\\\n    \\ === 0;\\n    assertThat(requestPathStartsWith).isTrue();\\n  });\\n\\n  runCode(mockData);\\n\\\n    });\"\nsetup: |-\n  const mockData = {\n    protocol_version: '2'\n  };\n\n\n___NOTES___\n\nCreated on 21/03/2021, 11:26:46\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "stape-io",
                    "repository": "data-tag",
                    "version": "7b7305d40e9666c737f3f9a5550b427c5e28b726",
                    "signature": "99088065af11ac178d2bbb64aa600d771cc65639717934e8b01486ea804fc9de",
                    "galleryTemplateId": "MBTSV"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "80",
                "name": "Persist Campaign Data",
                "fingerprint": "1769090938933",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"type\": \"TAG\",\n  \"id\": \"cvt_temp_public_id\",\n  \"version\": 1,\n  \"securityGroups\": [],\n  \"displayName\": \"Persist Campaign Data\",\n  \"categories\": [\n    \"ANALYTICS\",\n    \"UTILITY\"\n  ],\n  \"brand\": {\n    \"id\": \"github.com_gtm-templates-simo-ahava\",\n    \"displayName\": \"gtm-templates-simo-ahava\",\n    \"thumbnail\": \"data:image/png;base64,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\\u003d\\u003d\"\n  },\n  \"description\": \"This template preserves the landing page URL and referrer string in a browser cookie, and pushes the original location into \\u003ccode\\u003edataLayer\\u003c/code\\u003e.\",\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"storeInCookieOption\",\n    \"checkboxText\": \"Store campaign data in a browser cookie\",\n    \"simpleValueType\": true,\n    \"help\": \"Select this option to save the page URL in a browser cookie \\u003cstrong\\u003eif\\u003c/strong\\u003e it has campaign defining parameters (utm_*, gclid). The referrer string is also saved in a cookie \\u003cstrong\\u003eif\\u003c/strong\\u003e its hostname differs from the current one.\"\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"originalLocationOption\",\n    \"checkboxText\": \"Push original location in dataLayer\",\n    \"simpleValueType\": true,\n    \"help\": \"Select this option to push the current URL into \\u003ccode\\u003edataLayer\\u003c/code\\u003e. This is useful on single-page apps with \\u003ca href\\u003d\\\"https://www.simoahava.com/gtm-tips/fix-rogue-referral-problem-single-page-sites/\\\"\\u003erogue referral\\u003c/a\\u003e issues. To be effective, this tag should only fire on the initial page load and not on subsequent SPA page events.\"\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"storeInCookie\",\n    \"displayName\": \"Store campaign data in a cookie\",\n    \"groupStyle\": \"ZIPPY_OPEN\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"triggerParameters\",\n        \"displayName\": \"URL parameters that trigger the storage\",\n        \"simpleValueType\": true,\n        \"help\": \"Comma-separated list of parameters that trigger storage. If the URL has any one of these, then the browser cookie will be updated with the current URL.\",\n        \"defaultValue\": \"utm_source,utm_medium,utm_campaign,utm_term,utm_content,utm_id,gclid\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"urlCookieName\",\n        \"displayName\": \"Campaign URL cookie name\",\n        \"simpleValueType\": true,\n        \"help\": \"Cookie name where to save the URL with the campaign parameters. The cookie will be a \\u003cstrong\\u003esession cookie\\u003c/strong\\u003e written on the parent domain and root path. \\u003cstrong\\u003eIf you change the cookie name, remember to update the template permissions!\\u003c/strong\\u003e\",\n        \"defaultValue\": \"__gtm_campaign_url\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"referrerCookieName\",\n        \"displayName\": \"Referrer cookie name\",\n        \"simpleValueType\": true,\n        \"help\": \"Cookie name where to save the referrer string when the referrer hostname differs from the current hostname. The cookie will be a \\u003cstrong\\u003esession cookie\\u003c/strong\\u003e written on the parent domain and root path. \\u003cstrong\\u003eIf you change the cookie name, remember to update the template permissions!\\u003c/strong\\u003e\",\n        \"defaultValue\": \"__gtm_referrer\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      }\n    ],\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"storeInCookieOption\",\n        \"paramValue\": true,\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"pushToDataLayer\",\n    \"displayName\": \"Data Layer options for original location\",\n    \"groupStyle\": \"ZIPPY_OPEN\",\n    \"subParams\": [\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dataLayerName\",\n        \"displayName\": \"Name of the dataLayer array\",\n        \"simpleValueType\": true,\n        \"defaultValue\": \"dataLayer\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dataLayerKey\",\n        \"displayName\": \"Key name in dataLayer for the original location\",\n        \"simpleValueType\": true,\n        \"defaultValue\": \"originalLocation\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      }\n    ],\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"originalLocationOption\",\n        \"paramValue\": true,\n        \"type\": \"EQUALS\"\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst getUrl = require('getUrl');\nconst getReferrerUrl = require('getReferrerUrl');\nconst createQueue = require('createQueue');\nconst setCookie = require('setCookie');\nconst queryPermission = require('queryPermission');\nconst log = require('logToConsole');\n\nlet fail = false;\n\nif (data.storeInCookieOption) {\n  // Check if URL has any of the params listed\n  const paramsToFind = data.triggerParameters.split(',');\n  const queryString = getUrl('query');\n  const queryParams = queryString.length ? queryString.split('&') : [];\n  if (queryParams.filter(pair => paramsToFind.indexOf(pair.split('=')[0]) > -1).length) {\n    if (queryPermission('set_cookies', data.urlCookieName)) {\n      setCookie(data.urlCookieName, getUrl(), {\n        domain: 'auto',\n        path: '/'\n      });\n    } else {\n      log('Invalid permissions for writing ' + data.urlCookieName + ' cookie!');\n      fail = true;\n    }\n  }\n  \n  // Check if referrer host does not contain current hostname\n  const referrerHost = getReferrerUrl('host');\n  if (referrerHost.indexOf(getUrl('host')) === -1 && referrerHost !== '') {\n    if (queryPermission('set_cookies', data.referrerCookieName)) {\n      setCookie(data.referrerCookieName, getReferrerUrl(), {\n        domain: 'auto',\n        path: '/'\n      });\n    } else {\n      log('Invalid permissions for writing ' + data.referrerCookieName + ' cookie!');\n      fail = true;\n    }\n  }\n}\n\nif (data.originalLocationOption) {\n  // Push the current URL into dataLayer with the given key\n  if (queryPermission('access_globals', 'readwrite', data.dataLayerName)) {\n    const dataLayerPush = createQueue(data.dataLayerName);\n    const obj = {event: 'originalLocation'};\n    obj[data.dataLayerKey] = getUrl();\n    dataLayerPush(obj);\n  } else {\n    log('Invalid permissions for creating ' + data.dataLayerName + ' queue!');\n    fail = true;\n  }\n}\n\nif (fail) { data.gtmOnFailure(); } else { data.gtmOnSuccess(); }\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"dataLayer\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_referrer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urlParts\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        },\n        {\n          \"key\": \"queriesAllowed\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"set_cookies\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"allowedCookies\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"name\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"domain\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"path\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"secure\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"session\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"__gtm_campaign_url\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"*\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"*\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"any\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"any\"\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"name\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"domain\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"path\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"secure\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"session\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"__gtm_referrer\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"*\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"*\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"any\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"any\"\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"get_url\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urlParts\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        },\n        {\n          \"key\": \"queriesAllowed\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"any\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"debug\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: Do not write cookies if no trigger parameters in URL and if referrer host\n    contains current host\n  code: |-\n    mock('getUrl', component => {\n      if (component === 'query') return '?invalidparam=true';\n      if (component === 'host') return workingUrl.host;\n      return workingUrl.full;\n    });\n\n    mock('getReferrerUrl', component => {\n      return component === 'host' ? workingUrl.host : mockReferrer.full;\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockStoreData);\n\n    assertApi('getUrl').wasCalled();\n    assertApi('getReferrerUrl').wasCalled();\n    assertApi('queryPermission').wasNotCalled();\n    assertApi('setCookie').wasNotCalled();\n    assertApi('logToConsole').wasNotCalled();\n    assertApi('createQueue').wasNotCalled();\n\n    assertApi('gtmOnFailure').wasNotCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Write URL cookie if trigger parameters in URL\n  code: |-\n    mock('getUrl', component => {\n      if (component === 'query') return workingUrl.params;\n      if (component === 'host') return workingUrl.host;\n      return workingUrl.full;\n    });\n\n    mock('getReferrerUrl', component => {\n      return component === 'host' ? workingUrl.host : mockReferrer.full;\n    });\n\n    mock('setCookie', (name, value, options) => {\n      if (name === mockStoreData.referrerCookieName) fail('Referrer cookie was set');\n      if (name !== mockStoreData.urlCookieName) fail('Cookie name not set');\n      if (value !== workingUrl.full) fail('Cookie set with wrong URL');\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockStoreData);\n\n    assertApi('getUrl').wasCalled();\n    assertApi('getReferrerUrl').wasCalled();\n    assertApi('queryPermission').wasCalled();\n    assertApi('setCookie').wasCalled();\n    assertApi('logToConsole').wasNotCalled();\n    assertApi('createQueue').wasNotCalled();\n\n    assertApi('gtmOnFailure').wasNotCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Fail if invalid permissions to write URL cookie\n  code: |-\n    mock('getUrl', component => {\n      if (component === 'query') return workingUrl.params;\n      if (component === 'host') return workingUrl.host;\n      return workingUrl.full;\n    });\n\n    mock('getReferrerUrl', component => {\n      return component === 'host' ? workingUrl.host : mockReferrer.full;\n    });\n\n    mock('queryPermission', (permission, cookieName) => {\n      if (cookieName === mockStoreData.urlCookieName) return false;\n      if (cookieName === mockStoreData.referrerCookieName) fail('Query permission called for referrer cookie');\n    });\n\n    mock('logToConsole', false);\n\n    // Call runCode to run the template's code.\n    runCode(mockStoreData);\n\n    assertApi('getUrl').wasCalled();\n    assertApi('getReferrerUrl').wasCalled();\n    assertApi('queryPermission').wasCalled();\n    assertApi('setCookie').wasNotCalled();\n    assertApi('logToConsole').wasCalled();\n    assertApi('createQueue').wasNotCalled();\n\n    assertApi('gtmOnFailure').wasCalled();\n    assertApi('gtmOnSuccess').wasNotCalled();\n- name: Write referrer cookie if referrer host does not contain current host\n  code: |-\n    mock('getUrl', component => {\n      if (component === 'query') return '?invalidparam=true';\n      if (component === 'host') return workingUrl.host;\n      return workingUrl.full;\n    });\n\n    mock('getReferrerUrl', component => {\n      return component === 'host' ? mockReferrer.host : mockReferrer.full;\n    });\n\n    mock('setCookie', (name, value, options) => {\n      if (name !== mockStoreData.referrerCookieName) fail('Cookie name not set');\n      if (name == mockStoreData.urlCookieName) fail('URL cookie set');\n      if (value !== mockReferrer.full) fail('Cookie set with wrong URL');\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockStoreData);\n\n    assertApi('getUrl').wasCalled();\n    assertApi('getReferrerUrl').wasCalled();\n    assertApi('queryPermission').wasCalled();\n    assertApi('setCookie').wasCalled();\n    assertApi('logToConsole').wasNotCalled();\n    assertApi('createQueue').wasNotCalled();\n\n    assertApi('gtmOnFailure').wasNotCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Fail if invalid permissions to write referrer cookie\n  code: |-\n    mock('getUrl', component => {\n      if (component === 'query') return '?invalidparams=true';\n      if (component === 'host') return workingUrl.host;\n      return workingUrl.full;\n    });\n\n    mock('getReferrerUrl', component => {\n      return component === 'host' ? mockReferrer.host : mockReferrer.full;\n    });\n\n    mock('queryPermission', (permission, cookieName) => {\n      if (cookieName === mockStoreData.urlCookieName) fail('Query permission called for URL cookie');\n      if (cookieName === mockStoreData.referrerCookieName) return false;\n    });\n\n    mock('logToConsole', false);\n\n    // Call runCode to run the template's code.\n    runCode(mockStoreData);\n\n    assertApi('getUrl').wasCalled();\n    assertApi('getReferrerUrl').wasCalled();\n    assertApi('queryPermission').wasCalled();\n    assertApi('setCookie').wasNotCalled();\n    assertApi('logToConsole').wasCalled();\n    assertApi('createQueue').wasNotCalled();\n\n    assertApi('gtmOnFailure').wasCalled();\n    assertApi('gtmOnSuccess').wasNotCalled();\n- name: Push original location to dataLayer\n  code: |-\n    mock('getUrl', workingUrl.full);\n\n    mock('createQueue', name => {\n      if (name !== mockOriginalData.dataLayerName) fail('Tried to create queue with invalid name');\n      return (obj) => {\n        if (obj.event !== 'originalLocation') fail('Tried to push invalid event name');\n        if (obj[mockOriginalData.dataLayerKey] !== workingUrl.full) fail('Tried to push invalid URL');\n      };\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockOriginalData);\n\n    assertApi('getUrl').wasCalled();\n    assertApi('getReferrerUrl').wasNotCalled();\n    assertApi('queryPermission').wasCalled();\n    assertApi('setCookie').wasNotCalled();\n    assertApi('logToConsole').wasNotCalled();\n    assertApi('createQueue').wasCalled();\n\n    assertApi('gtmOnFailure').wasNotCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Fail if invalid permissions to write to dataLayer\n  code: |-\n    mock('queryPermission', (permission, cookieName) => {\n      if (permission === 'set_cookies') fail('Permission call for set_cookies made');\n      return false;\n    });\n\n    mock('logToConsole', false);\n\n    // Call runCode to run the template's code.\n    runCode(mockOriginalData);\n\n    assertApi('getUrl').wasNotCalled();\n    assertApi('getReferrerUrl').wasNotCalled();\n    assertApi('queryPermission').wasCalled();\n    assertApi('setCookie').wasNotCalled();\n    assertApi('logToConsole').wasCalled();\n    assertApi('createQueue').wasNotCalled();\n\n    assertApi('gtmOnFailure').wasCalled();\n    assertApi('gtmOnSuccess').wasNotCalled();\nsetup: \"const mockStoreData = {\\n  storeInCookieOption: true,\\n  triggerParameters:\\\n  \\ 'utm_source,utm_medium,utm_campaign,utm_term,utm_content,utm_id,gclid',\\n  urlCookieName:\\\n  \\ '__gtm_campaign_url',\\n  referrerCookieName: '__gtm_referrer'\\n};\\n\\nconst mockOriginalData\\\n  \\ = {\\n  originalLocationOption: true,\\n  dataLayerName: 'dataLayer',\\n  dataLayerKey:\\\n  \\ 'originalLocation'\\n};\\n  \\nconst workingUrl = {\\n  params: '?utm_source=test&utm_medium=test',\\n\\\n  \\  host: 'www.example.com',\\n  full: 'https://www.example.com/path/?utm_source=test&utm_medium=test#home'\\n\\\n  };\\n\\nconst mockReferrer = {\\n  host: 'www.otherdomain.com',\\n  full: 'https://www.otherdomain.com/path/'\\n\\\n  };\"\n\n\n___NOTES___\n\nCreated on 30/11/2019, 11:26:05\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "gtm-templates-simo-ahava",
                    "repository": "persist-campaign-data",
                    "version": "65d7ef3fae4bde0ad4d829506bb85e5771922925",
                    "signature": "23dc5626da5910d43124815c0f6fb6907467673e697f80738b7727ce67bf3e4e"
                }
            },
            {
                "accountId": "6335554172",
                "containerId": "241502212",
                "templateId": "86",
                "name": "Facebook Pixel",
                "fingerprint": "1769090938937",
                "templateData": "___TERMS_OF_SERVICE___\n\nBy creating or modifying this file you agree to Google Tag Manager's Community\nTemplate Gallery Developer Terms of Service available at\nhttps://developers.google.com/tag-manager/gallery-tos (or such other URL as\nGoogle may provide), as modified from time to time.\n\n\n___INFO___\n\n{\n  \"displayName\": \"Facebook Pixel\",\n  \"__wm\": \"VGVtcGxhdGUtQXV0aG9yX0ZhY2Vib29rLVNpbW8tQWhhdmE\\u003d\",\n  \"description\": \"This is an unofficial Google Tag Manager template for the Facebook Pixel.\",\n  \"securityGroups\": [],\n  \"categories\": [\n    \"ADVERTISING\",\n    \"ANALYTICS\"\n  ],\n  \"id\": \"cvt_temp_public_id\",\n  \"type\": \"TAG\",\n  \"version\": 1,\n  \"brand\": {\n    \"displayName\": \"facebookarchive\",\n    \"id\": \"github.com_facebookarchive\",\n    \"thumbnail\": \"data:image/png;base64,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\"\n  },\n  \"containerContexts\": [\n    \"WEB\"\n  ]\n}\n\n\n___TEMPLATE_PARAMETERS___\n\n[\n  {\n    \"alwaysInSummary\": true,\n    \"valueValidators\": [\n      {\n        \"errorMessage\": \"You must provide a Pixel ID\",\n        \"type\": \"NON_EMPTY\"\n      },\n      {\n        \"args\": [\n          \"^[0-9,]+$\"\n        ],\n        \"errorMessage\": \"Invalid Pixel ID format\",\n        \"type\": \"REGEX\"\n      }\n    ],\n    \"displayName\": \"Facebook Pixel ID(s)\",\n    \"simpleValueType\": true,\n    \"name\": \"pixelId\",\n    \"type\": \"TEXT\",\n    \"valueHint\": \"e.g. 12345678910\"\n  },\n  {\n    \"type\": \"CHECKBOX\",\n    \"name\": \"enhancedEcommerce\",\n    \"checkboxText\": \"Enhanced Ecommerce dataLayer Integration\",\n    \"simpleValueType\": true,\n    \"help\": \"If you check this, then the Facebook pixel will populate \\u003cstrong\\u003eEvent Name\\u003c/strong\\u003e and \\u003cstrong\\u003eObject Properties\\u003c/strong\\u003e automatically from the last \\u003ca href\\u003d\\\"https://developers.google.com/tag-manager/enhanced-ecommerce\\\"\\u003eecommerce\\u003c/a\\u003e object pushed into the dataLayer array.\"\n  },\n  {\n    \"type\": \"RADIO\",\n    \"name\": \"eventName\",\n    \"displayName\": \"Event Name\",\n    \"radioItems\": [\n      {\n        \"value\": \"standard\",\n        \"displayValue\": \"Standard\",\n        \"subParams\": [\n          {\n            \"type\": \"SELECT\",\n            \"name\": \"standardEventName\",\n            \"macrosInSelect\": false,\n            \"selectItems\": [\n              {\n                \"displayValue\": \"PageView\",\n                \"value\": \"PageView\"\n              },\n              {\n                \"displayValue\": \"AddPaymentInfo\",\n                \"value\": \"AddPaymentInfo\"\n              },\n              {\n                \"displayValue\": \"AddToCart\",\n                \"value\": \"AddToCart\"\n              },\n              {\n                \"displayValue\": \"AddToWishlist\",\n                \"value\": \"AddToWishlist\"\n              },\n              {\n                \"displayValue\": \"CompleteRegistration\",\n                \"value\": \"CompleteRegistration\"\n              },\n              {\n                \"displayValue\": \"Contact\",\n                \"value\": \"Contact\"\n              },\n              {\n                \"displayValue\": \"CustomizeProduct\",\n                \"value\": \"CustomizeProduct\"\n              },\n              {\n                \"displayValue\": \"Donate\",\n                \"value\": \"Donate\"\n              },\n              {\n                \"displayValue\": \"FindLocation\",\n                \"value\": \"FindLocation\"\n              },\n              {\n                \"displayValue\": \"InitiateCheckout\",\n                \"value\": \"InitiateCheckout\"\n              },\n              {\n                \"displayValue\": \"Lead\",\n                \"value\": \"Lead\"\n              },\n              {\n                \"displayValue\": \"Purchase\",\n                \"value\": \"Purchase\"\n              },\n              {\n                \"displayValue\": \"Schedule\",\n                \"value\": \"Schedule\"\n              },\n              {\n                \"displayValue\": \"Search\",\n                \"value\": \"Search\"\n              },\n              {\n                \"displayValue\": \"StartTrial\",\n                \"value\": \"StartTrial\"\n              },\n              {\n                \"displayValue\": \"SubmitApplication\",\n                \"value\": \"SubmitApplication\"\n              },\n              {\n                \"displayValue\": \"Subscribe\",\n                \"value\": \"Subscribe\"\n              },\n              {\n                \"displayValue\": \"ViewContent\",\n                \"value\": \"ViewContent\"\n              }\n            ],\n            \"simpleValueType\": true,\n            \"defaultValue\": \"PageView\"\n          }\n        ]\n      },\n      {\n        \"value\": \"custom\",\n        \"displayValue\": \"Custom\",\n        \"subParams\": [\n          {\n            \"type\": \"TEXT\",\n            \"name\": \"customEventName\",\n            \"displayName\": \"\",\n            \"simpleValueType\": true\n          }\n        ]\n      },\n      {\n        \"value\": \"variable\",\n        \"displayValue\": \"Variable\",\n        \"subParams\": [\n          {\n            \"type\": \"SELECT\",\n            \"name\": \"variableEventName\",\n            \"macrosInSelect\": true,\n            \"selectItems\": [],\n            \"simpleValueType\": true\n          }\n        ]\n      }\n    ],\n    \"simpleValueType\": true,\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"enhancedEcommerce\",\n        \"paramValue\": true,\n        \"type\": \"NOT_EQUALS\"\n      }\n    ]\n  },\n  {\n    \"type\": \"RADIO\",\n    \"name\": \"eecEventName\",\n    \"displayName\": \"Event Name\",\n    \"radioItems\": [\n      {\n        \"value\": \"eec\",\n        \"displayValue\": \"Set automatically from dataLayer\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"help\": \"The Enhanced Ecommerce integration populates the Event Name automatically depending on what type of \\u003cstrong\\u003eecommerce\\u003c/strong\\u003e object was last pushed into dataLayer (\\\"detail\\\" -\\u003e \\\"ViewContent\\\", \\\"add\\\" -\\u003e \\\"AddToCart\\\", \\\"checkout\\\" -\\u003e \\\"InitiateCheckout\\\", \\\"purchase\\\" -\\u003e \\\"Purchase\\\").\",\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"enhancedEcommerce\",\n        \"paramValue\": true,\n        \"type\": \"EQUALS\"\n      }\n    ]\n  },\n  {\n    \"type\": \"SELECT\",\n    \"name\": \"consent\",\n    \"displayName\": \"Consent Granted (GDPR)\",\n    \"macrosInSelect\": true,\n    \"selectItems\": [\n      {\n        \"value\": true,\n        \"displayValue\": \"True\"\n      },\n      {\n        \"value\": false,\n        \"displayValue\": \"False\"\n      }\n    ],\n    \"simpleValueType\": true,\n    \"help\": \"If you set Consent Granted to \\u003cstrong\\u003efalse\\u003c/strong\\u003e, the pixel will not send any hits until a tag is fired where Consent Granted is set to \\u003cstrong\\u003etrue\\u003c/strong\\u003e. See \\u003ca href\\u003d\\\"https://developers.facebook.com/docs/facebook-pixel/implementation/gdpr/\\\"\\u003ethis article\\u003c/a\\u003e for more information.\"\n  },\n  {\n    \"simpleValueType\": true,\n    \"name\": \"advancedMatching\",\n    \"checkboxText\": \"Enable Advanced Matching\",\n    \"type\": \"CHECKBOX\"\n  },\n  {\n    \"type\": \"GROUP\",\n    \"name\": \"dataProcessingOptionsGroup\",\n    \"displayName\": \"Data Processing Options\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"subParams\": [\n      {\n        \"type\": \"LABEL\",\n        \"name\": \"dpoInfo\",\n        \"displayName\": \"Data Processing Options force this Facebook event to comply to regional regulations with regard to the processing and selling of user data. Read \\u003ca href\\u003d\\\"https://developers.facebook.com/docs/marketing-apis/data-processing-options\\\"\\u003ethis\\u003c/a\\u003e for more information about how to configure this section.\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"dpoLDU\",\n        \"checkboxText\": \"Limited Data Use (LDU)\",\n        \"simpleValueType\": true\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dpoCountry\",\n        \"displayName\": \"Country\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 0,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"dpoLDU\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueValidators\": [\n          {\n            \"type\": \"NUMBER\"\n          }\n        ]\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"dpoState\",\n        \"displayName\": \"State\",\n        \"simpleValueType\": true,\n        \"defaultValue\": 0,\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"dpoLDU\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ],\n        \"valueValidators\": [\n          {\n            \"type\": \"NUMBER\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"enablingConditions\": [\n      {\n        \"paramName\": \"advancedMatching\",\n        \"type\": \"EQUALS\",\n        \"paramValue\": true\n      }\n    ],\n    \"displayName\": \"Customer Information Data Parameters\",\n    \"name\": \"advancedMatchingGroup\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"type\": \"GROUP\",\n    \"subParams\": [\n      {\n        \"displayName\": \"\",\n        \"name\": \"advancedMatchingList\",\n        \"simpleTableColumns\": [\n          {\n            \"selectItems\": [\n              {\n                \"displayValue\": \"City\",\n                \"value\": \"ct\"\n              },\n              {\n                \"displayValue\": \"Country\",\n                \"value\": \"cn\"\n              },\n              {\n                \"displayValue\": \"Date of Birth\",\n                \"value\": \"db\"\n              },\n              {\n                \"displayValue\": \"Email\",\n                \"value\": \"em\"\n              },\n              {\n                \"displayValue\": \"External ID\",\n                \"value\": \"external_id\"\n              },\n              {\n                \"displayValue\": \"First Name\",\n                \"value\": \"fn\"\n              },\n              {\n                \"displayValue\": \"Gender\",\n                \"value\": \"ge\"\n              },\n              {\n                \"displayValue\": \"Last Name\",\n                \"value\": \"ln\"\n              },\n              {\n                \"displayValue\": \"Phone\",\n                \"value\": \"ph\"\n              },\n              {\n                \"displayValue\": \"State\",\n                \"value\": \"st\"\n              },\n              {\n                \"displayValue\": \"Zip Code\",\n                \"value\": \"zp\"\n              }\n            ],\n            \"defaultValue\": \"\",\n            \"displayName\": \"Parameter name\",\n            \"name\": \"name\",\n            \"isUnique\": true,\n            \"type\": \"SELECT\"\n          },\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Parameter value\",\n            \"name\": \"value\",\n            \"type\": \"TEXT\"\n          }\n        ],\n        \"type\": \"SIMPLE_TABLE\",\n        \"newRowButtonText\": \"Add parameter\",\n        \"valueValidators\": [\n          {\n            \"type\": \"NON_EMPTY\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    \"displayName\": \"Object Properties\",\n    \"name\": \"objectPropertiesGroup\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"type\": \"GROUP\",\n    \"subParams\": [\n      {\n        \"type\": \"LABEL\",\n        \"name\": \"enhancedEcommerceObject\",\n        \"displayName\": \"\\u003cstrong\\u003eWarning!\\u003c/strong\\u003e Object properties are populated automatically based on the most recent \\u003cstrong\\u003eecommerce\\u003c/strong\\u003e object pushed into dataLayer. If you add properties here that are already set by the integration (content_type, contents, num_items, value, currency), then the properties you add here will override those set automatically by the integration!\",\n        \"enablingConditions\": [\n          {\n            \"paramName\": \"enhancedEcommerce\",\n            \"paramValue\": true,\n            \"type\": \"EQUALS\"\n          }\n        ]\n      },\n      {\n        \"type\": \"SELECT\",\n        \"name\": \"objectPropertiesFromVariable\",\n        \"displayName\": \"Load Properties From Variable\",\n        \"macrosInSelect\": true,\n        \"selectItems\": [\n          {\n            \"value\": false,\n            \"displayValue\": \"False\"\n          }\n        ],\n        \"simpleValueType\": true,\n        \"help\": \"You can use a variable that returns a JavaScript object with the properties you want to use. This object will be merged with any additional properties you add via the table below. Any conflicts will be resolved in favor of the properties you add to the table.\"\n      },\n      {\n        \"name\": \"objectPropertyList\",\n        \"simpleTableColumns\": [\n          {\n            \"valueValidators\": [],\n            \"defaultValue\": \"\",\n            \"displayName\": \"Property Name\",\n            \"name\": \"name\",\n            \"isUnique\": true,\n            \"type\": \"TEXT\"\n          },\n          {\n            \"defaultValue\": \"\",\n            \"displayName\": \"Property Value\",\n            \"name\": \"value\",\n            \"type\": \"TEXT\"\n          }\n        ],\n        \"type\": \"SIMPLE_TABLE\",\n        \"newRowButtonText\": \"Add property\"\n      }\n    ]\n  },\n  {\n    \"displayName\": \"More Settings\",\n    \"name\": \"moreSettingsGroup\",\n    \"groupStyle\": \"ZIPPY_CLOSED\",\n    \"type\": \"GROUP\",\n    \"subParams\": [\n      {\n        \"help\": \"Facebook collects some metadata (e.g. structured data) and user interactions (e.g. clicks) automatically. Check this box to disable this automatic configuration of the pixel.\",\n        \"simpleValueType\": true,\n        \"name\": \"disableAutoConfig\",\n        \"checkboxText\": \"Disable Automatic Configuration\",\n        \"type\": \"CHECKBOX\"\n      },\n      {\n        \"type\": \"CHECKBOX\",\n        \"name\": \"disablePushState\",\n        \"checkboxText\": \"Disable History Event Tracking\",\n        \"simpleValueType\": true,\n        \"help\": \"The Facebook Pixel tracks history events (pushState and replaceState) automatically as PageViews. Check this box to prevent the pixel from tracking such events automatically.\"\n      },\n      {\n        \"type\": \"TEXT\",\n        \"name\": \"eventId\",\n        \"displayName\": \"Event ID\",\n        \"simpleValueType\": true,\n        \"help\": \"Set the Event ID parameter in case you are tracking the same event server-side as well. The Event ID can be used to deduplicate the same event if sent from multiple sources. See more \\u003ca href\\u003d\\\"https://developers.facebook.com/docs/marketing-api/conversions-api/deduplicate-pixel-and-server-events/\\\"\\u003ehere\\u003c/a\\u003e.\"\n      }\n    ]\n  }\n]\n\n\n___SANDBOXED_JS_FOR_WEB_TEMPLATE___\n\nconst createQueue = require('createQueue');\nconst callInWindow = require('callInWindow');\nconst aliasInWindow = require('aliasInWindow');\nconst copyFromWindow = require('copyFromWindow');\nconst setInWindow = require('setInWindow');\nconst injectScript = require('injectScript');\nconst makeTableMap = require('makeTableMap');\nconst makeNumber = require('makeNumber');\nconst getType = require('getType');\nconst copyFromDataLayer = require('copyFromDataLayer');\nconst math = require('Math');\nconst log = require('logToConsole');\n\nconst initIds = copyFromWindow('_fbq_gtm_ids') || [];\nconst pixelIds = data.pixelId;\nconst standardEventNames = ['AddPaymentInfo', 'AddToCart', 'AddToWishlist', 'CompleteRegistration', 'Contact', 'CustomizeProduct', 'Donate', 'FindLocation', 'InitiateCheckout', 'Lead', 'PageView', 'Purchase', 'Schedule', 'Search', 'StartTrial', 'SubmitApplication', 'Subscribe', 'ViewContent'];\nconst ecommerce = copyFromDataLayer('ecommerce', 1);\n\n// Helper methods\nconst fail = msg => {\n  log(msg);\n  data.gtmOnFailure();\n};\n\nconst mergeObj = (obj, obj2) => {\n  for (let key in obj2) {\n    if (obj2.hasOwnProperty(key)) {\n      obj[key] = obj2[key];\n    }\n  }\n  return obj;\n};\n\nconst parseEecObj = prod => {\n  return {\n    id: prod.id,\n    quantity: prod.quantity\n  };\n};\n\n// Initialize EEC integration\nlet eventName, action, eecObjectProps;\nif (data.enhancedEcommerce) {\n  if (!ecommerce) return fail('Facebook Pixel: No valid \"ecommerce\" object found in dataLayer');\n  if (ecommerce.detail) { eventName = 'ViewContent'; action = 'detail'; }\n  else if (ecommerce.add) { eventName = 'AddToCart'; action = 'add'; }\n  else if (ecommerce.checkout) { eventName = 'InitiateCheckout'; action = 'checkout'; }\n  else if (ecommerce.purchase) { eventName = 'Purchase'; action = 'purchase'; }\n  else return fail('Facebook Pixel: Most recently pushed \"ecommerce\" object must be one of types \"detail\", \"add\", \"checkout\" or \"purchase\".');\n  \n  if (!ecommerce[action].products || getType(ecommerce[action].products) !== 'array') return fail('Facebook pixel: Most recently pushed \"ecommerce\" object did not have a valid \"products\" array.');\n  eecObjectProps = {\n    content_type: 'product',\n    contents: ecommerce[action].products.map(parseEecObj),\n    value: ecommerce[action].products.reduce((acc, cur) => {\n      const curVal = math.round(makeNumber(cur.price || 0) * (cur.quantity || 1) * 100) / 100;\n      return acc + curVal;\n    }, 0.0),\n    currency: ecommerce.currencyCode || 'USD'\n  };\n  if (['InitiateCheckout', 'Purchase'].indexOf(eventName) > -1) eecObjectProps.num_items = ecommerce[action].products.reduce((acc,cur) => {\n    return acc + makeNumber(cur.quantity || 1);\n  }, 0);\n}\n\n// Build the fbq() command arguments\nconst cidParams = data.advancedMatchingList && data.advancedMatchingList.length ? makeTableMap(data.advancedMatchingList, 'name', 'value') : {};\nconst objectProps = data.objectPropertyList && data.objectPropertyList.length ? makeTableMap(data.objectPropertyList, 'name', 'value') : {};\nconst objectPropsFromVar = getType(data.objectPropertiesFromVariable) === 'object' ? data.objectPropertiesFromVariable : {};\nconst mergedObjectProps = mergeObj(objectPropsFromVar, objectProps);\nconst finalObjectProps = mergeObj(eecObjectProps || {}, mergedObjectProps);\neventName = eventName || (data.eventName === 'custom' ? data.customEventName : (data.eventName === 'variable' ? data.variableEventName : data.standardEventName));\n\nconst command = standardEventNames.indexOf(eventName) === -1 ? 'trackSingleCustom' : 'trackSingle';\nconst consent = data.consent === false ? 'revoke' : 'grant';\n\n// Utility function to use either fbq.queue[]\n// (if the FB SDK hasn't loaded yet), or fbq.callMethod()\n// if the SDK has loaded.\nconst getFbq = () => {\n  // Return the existing 'fbq' global method if available\n  let fbq = copyFromWindow('fbq');\n  if (fbq) {\n    return fbq;\n  }\n  \n  // Initialize the 'fbq' global method to either use\n  // fbq.callMethod or fbq.queue)\n  setInWindow('fbq', function() {    \n    const callMethod = copyFromWindow('fbq.callMethod.apply');\n    if (callMethod) {           \n      callInWindow('fbq.callMethod.apply', null, arguments); \n    } else {       \n      callInWindow('fbq.queue.push', arguments);\n    }\n  });\n  aliasInWindow('_fbq', 'fbq');\n  \n  // Create the fbq.queue\n  createQueue('fbq.queue');\n    \n  // Return the global 'fbq' method, created above\n  return copyFromWindow('fbq');\n};\n\n// Get reference to the global method\nconst fbq = getFbq();\n\nfbq('consent', consent);\n\n // Set Data Processing Options\nif (data.dpoLDU) {\n  fbq('dataProcessingOptions', ['LDU'], makeNumber(data.dpoCountry), makeNumber(data.dpoState));\n}\n\n// Handle multiple, comma-separated pixel IDs,\n// and initialize each ID if not done already.\npixelIds.split(',').forEach(pixelId => {\n  if (initIds.indexOf(pixelId) === -1) {\n    \n    // If the user has chosen to disable automatic configuration\n    if (data.disableAutoConfig) {\n      fbq('set', 'autoConfig', false, pixelId);\n    }\n    \n    // If the user has chosen to disable pushState and replaceState tracking\n    if (data.disablePushState) {\n      setInWindow('fbq.disablePushState', true);\n    }\n   \t\n    \n    // Initialize pixel and store in global array\n    fbq('init', pixelId, cidParams);\n\n    // Monitoring agent string for Tag Setup\n    fbq('set','agent','tmSimo-GTM-WebTemplate', pixelId);\n\n    initIds.push(pixelId);\n    setInWindow('_fbq_gtm_ids', initIds, true);\n    \n  }\n\n  // Call the fbq() method with the parameters defined earlier\n  if (data.eventId) {\n    fbq(command, pixelId, eventName, finalObjectProps, {eventID: data.eventId});\n  } else {\n    fbq(command, pixelId, eventName, finalObjectProps);\n  }\n});\n\ninjectScript('https://connect.facebook.net/en_US/fbevents.js', data.gtmOnSuccess, data.gtmOnFailure, 'fbPixel');\n\n\n___WEB_PERMISSIONS___\n\n[\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"access_globals\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keys\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"_fbq_gtm\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"_fbq\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"_fbq_gtm_ids\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.callMethod.apply\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.queue.push\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.queue\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              },\n              {\n                \"type\": 3,\n                \"mapKey\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"key\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"read\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"write\"\n                  },\n                  {\n                    \"type\": 1,\n                    \"string\": \"execute\"\n                  }\n                ],\n                \"mapValue\": [\n                  {\n                    \"type\": 1,\n                    \"string\": \"fbq.disablePushState\"\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": true\n                  },\n                  {\n                    \"type\": 8,\n                    \"boolean\": false\n                  }\n                ]\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"inject_script\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"urls\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"https://connect.facebook.net/en_US/fbevents.js\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"logging\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"environments\",\n          \"value\": {\n            \"type\": 1,\n            \"string\": \"debug\"\n          }\n        }\n      ]\n    },\n    \"isRequired\": true\n  },\n  {\n    \"instance\": {\n      \"key\": {\n        \"publicId\": \"read_data_layer\",\n        \"versionId\": \"1\"\n      },\n      \"param\": [\n        {\n          \"key\": \"keyPatterns\",\n          \"value\": {\n            \"type\": 2,\n            \"listItem\": [\n              {\n                \"type\": 1,\n                \"string\": \"ecommerce\"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    \"clientAnnotations\": {\n      \"isEditedByUser\": true\n    },\n    \"isRequired\": true\n  }\n]\n\n\n___TESTS___\n\nscenarios:\n- name: Library is injected\n  code: |-\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('injectScript').wasCalledWith(scriptUrl, success, failure, 'fbPixel');\n    assertApi('gtmOnSuccess').wasCalled();\n- name: fbq does not exist - method created\n  code: |-\n    let fbq;\n\n    mock('copyFromWindow', key => {\n      if (key === 'fbq') return fbq;\n    });\n\n    mock('createQueue', key => {});\n\n    mock('setInWindow', (key, val) => {\n      if (key === 'fbq') fbq = val;\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('aliasInWindow').wasCalledWith('_fbq', 'fbq');\n    assertApi('setInWindow').wasCalled();\n    assertApi('gtmOnSuccess').wasCalled();\n- name: fbq exists - method copied\n  code: |-\n    mock('setInWindow', key => {\n      if (key === 'fbq') fail('setInWindow called with fbq even though variable exists');\n    });\n\n    mock('createQueue', key => {});\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n- name: makeTableMap called\n  code: |-\n    mockData.advancedMatching = true;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('makeTableMap').wasCalledWith(mockData.advancedMatchingList, 'name', 'value');\n    assertApi('makeTableMap').wasCalledWith(mockData.objectPropertyList, 'name', 'value');\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Consent set\n  code: |-\n    mock('copyFromWindow', key => {\n      if (key === 'fbq') return function() {\n        if (arguments[0] === 'consent') {\n          assertThat(arguments[1], 'Consent set incorrectly').isEqualTo('grant');\n        }\n      };\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n- name: DPO LDU set\n  code: |-\n    mockData.dpoLDU = true;\n    mockData.dpoCountry = '0';\n    mockData.dpoState = '0';\n\n    mock('copyFromWindow', key => {\n      if (key === 'fbq') return function() {\n        if (arguments[0] === 'consent') {\n          assertThat(arguments[1], 'Consent set incorrectly').isEqualTo('grant');\n        }\n        if (arguments[0] === 'dataProcessingOptions') {\n          assertThat(arguments[1], 'LDU array value not set').isEqualTo(['LDU']);\n          assertThat(arguments[2], 'LDU country not set').isEqualTo(0);\n          assertThat(arguments[3], 'LDU state not set').isEqualTo(0);\n        }\n      };\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n- name: DPO LDU not set\n  code: |-\n    mock('copyFromWindow', key => {\n      if (key === 'fbq') return function() {\n        if (arguments[0] === 'consent') {\n          assertThat(arguments[1], 'Consent set incorrectly').isEqualTo('grant');\n        }\n        if (arguments[0] === 'dataProcessingOptions') {\n          fail('dataProcessingOptions called even though DPO was not set');\n        }\n      };\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Pixel IDs set - do not initialize\n  code: |-\n    mock('copyFromWindow', key => {\n      if (key === '_fbq_gtm_ids') return ['12345', '23456'];\n      if (key === 'fbq') return function() {\n        if (arguments[0] === 'init') fail('init called even though pixel IDs already initialized');\n      };\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('gtmOnSuccess').wasCalled();\n- name: Pixel IDs not set - run init process\n  code: \"let index = 0;\\nlet count = 0;\\nlet _fbq_gtm_ids;\\n\\nmockData.advancedMatching\\\n    \\ = true;\\nmockData.disableAutoConfig = true;\\nmockData.disablePushState = true;\\n\\\n    \\nmock('setInWindow', (key, val) => {\\n  if (key === 'fbq.disablePushState') count\\\n    \\ += 1;\\n  if (key === '_fbq_gtm_ids') _fbq_gtm_ids = val;\\n});\\n\\nconst initObj\\\n    \\ = {\\n  ct: 'Helsinki',\\n  cn: 'Finland',\\n  external_id: 'UserId'\\n};\\n\\nmock('copyFromWindow',\\\n    \\ key => {\\n  if (key === 'fbq') return function() {\\n    if (arguments[0] ===\\\n    \\ 'set' && arguments[1] === 'autoConfig' && arguments[2] === false) {\\n      assertThat(arguments[3],\\\n    \\ 'autoConfig called with incorrect pixelId').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\    }\\n    if (arguments[0] === 'set' && arguments[1] === 'agent') {\\n      assertThat(arguments[2],\\\n    \\ 'agent set with invalid value').isEqualTo('tmSimo-GTM-WebTemplate');\\n     \\\n    \\ assertThat(arguments[3], 'agent set with invalid pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      index += 1;\\n    }\\n    if (arguments[0] === 'init') {\\n      assertThat(arguments[1],\\\n    \\ 'init called with incorrect pixelId').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'init called with incorrect initObj').isEqualTo(initObj);\\n\\\n    \\    } \\n  };\\n});\\n\\n// Call runCode to run the template's code.\\nrunCode(mockData);\\n\\\n    \\nassertThat(_fbq_gtm_ids, '_fbq_gtm_ids has incorrect contents').isEqualTo(mockData.pixelId.split(','));\\n\\\n    assertThat(index, 'init called incorrect number of times: ' + index).isEqualTo(2);\\n\\\n    assertThat(count, 'fbq.disablePushState called incorrect number of times: ' +\\\n    \\ count).isEqualTo(2);\\n\\n// Verify that the tag finished successfully.\\nassertApi('gtmOnSuccess').wasCalled();\"\n- name: Send standard event\n  code: \"const eventParams = {\\n  prop1: 'val1',\\n  prop2: 'val2'\\n};\\n\\nlet index\\\n    \\ = 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return function()\\\n    \\ {\\n    if (arguments[0] === 'trackSingle') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo(mockData.standardEventName);\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(eventParams);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Send custom event\n  code: \"mockData.eventName = 'custom';\\n\\nconst eventParams = {\\n  prop1: 'val1',\\n\\\n    \\  prop2: 'val2'\\n};\\n\\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if\\\n    \\ (key === 'fbq') return function() {\\n    if (arguments[0] === 'trackSingleCustom')\\\n    \\ {\\n      assertThat(arguments[1], 'trackSingleCustom called with incorrect pixel\\\n    \\ ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n      assertThat(arguments[2],\\\n    \\ 'trackSingleCustom called with incorrect event name').isEqualTo(mockData.customEventName);\\n\\\n    \\      assertThat(arguments[3], 'trackSingleCustom called with incorrect event\\\n    \\ parameters').isEqualTo(eventParams);\\n      index += 1;\\n    }\\n  };\\n});\\n\\\n    \\     \\n// Call runCode to run the template's code.\\nrunCode(mockData);\\n\\n//\\\n    \\ Verify that the tag finished successfully.\\nassertThat(index, 'trackSingleCustom\\\n    \\ called incorrect number of times').isEqualTo(2);\\nassertApi('gtmOnSuccess').wasCalled();\"\n- name: Send variable event with standard name\n  code: \"mockData.eventName = 'variable';\\nmockData.variableEventName = 'PageView';\\n\\\n    \\nconst eventParams = {\\n  prop1: 'val1',\\n  prop2: 'val2'\\n};\\n\\nlet index =\\\n    \\ 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return function()\\\n    \\ {\\n    if (arguments[0] === 'trackSingle') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo(mockData.variableEventName);\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(eventParams);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Send variable event with custom name\n  code: \"mockData.eventName = 'variable';\\nmockData.variableEventName = 'custom';\\n\\\n    \\nconst eventParams = {\\n  prop1: 'val1',\\n  prop2: 'val2'\\n};\\n\\nlet index =\\\n    \\ 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return function()\\\n    \\ {\\n    if (arguments[0] === 'trackSingleCustom') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingleCustom called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingleCustom called with incorrect event\\\n    \\ name').isEqualTo(mockData.variableEventName);\\n      assertThat(arguments[3],\\\n    \\ 'trackSingleCustom called with incorrect event parameters').isEqualTo(eventParams);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingleCustom called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Send event parameters from a variable\n  code: \"mockData.objectPropertiesFromVariable = {\\n  prop1: 'val1',\\n  prop2: 'val2'\\n\\\n    };\\n\\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return\\\n    \\ function() {\\n    if (arguments[0] === 'trackSingle') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo(mockData.standardEventName);\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(mockData.objectPropertiesFromVariable);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Enhanced Ecommerce integration fails with invalid object\n  code: |-\n    mockData.enhancedEcommerce = true;\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('logToConsole').wasCalledWith('Facebook Pixel: No valid \"ecommerce\" object found in dataLayer');\n    assertApi('gtmOnFailure').wasCalled();\n    assertApi('gtmOnSuccess').wasNotCalled();\n- name: Enhanced Ecommerce integration fails with invalid action\n  code: |-\n    mockData.enhancedEcommerce = true;\n\n    mock('copyFromDataLayer', key => {\n      if (key === 'ecommerce') return {\n        invalid: true\n      };\n    });\n\n    // Call runCode to run the template's code.\n    runCode(mockData);\n\n    // Verify that the tag finished successfully.\n    assertApi('logToConsole').wasCalledWith('Facebook Pixel: Most recently pushed \"ecommerce\" object must be one of types \"detail\", \"add\", \"checkout\" or \"purchase\".');\n    assertApi('gtmOnFailure').wasCalled();\n    assertApi('gtmOnSuccess').wasNotCalled();\n- name: Enhanced Ecommerce ViewContent works\n  code: \"mockData.enhancedEcommerce = true;\\nmockData.objectPropertyList = {};\\n\\n\\\n    mock('copyFromDataLayer', key => {\\n  if (key === 'ecommerce') return {\\n    currencyCode:\\\n    \\ 'EUR',\\n    detail: {\\n      products: mockEec.gtm.products\\n    }\\n  };\\n});\\n\\\n    \\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return\\\n    \\ function() {\\n    if (arguments[0] === 'trackSingle') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo('ViewContent');\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(mockEec.fb);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Enhanced Ecommerce AddToCart works\n  code: \"mockData.enhancedEcommerce = true;\\nmockData.objectPropertyList = {};\\n\\n\\\n    mock('copyFromDataLayer', key => {\\n  if (key === 'ecommerce') return {\\n    currencyCode:\\\n    \\ 'EUR',\\n    add: {\\n      products: mockEec.gtm.products\\n    }\\n  };\\n});\\n\\\n    \\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return\\\n    \\ function() {\\n    if (arguments[0] === 'trackSingle') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo('AddToCart');\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(mockEec.fb);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Enhanced Ecommerce InitiateCheckout works\n  code: \"mockData.enhancedEcommerce = true;\\nmockEec.fb.num_items = 3;\\nmockData.objectPropertyList\\\n    \\ = {};\\n\\nmock('copyFromDataLayer', key => {\\n  if (key === 'ecommerce') return\\\n    \\ {\\n    currencyCode: 'EUR',\\n    checkout: {\\n      products: mockEec.gtm.products\\n\\\n    \\    }\\n  };\\n});\\n\\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if (key\\\n    \\ === 'fbq') return function() {\\n    if (arguments[0] === 'trackSingle') {\\n\\\n    \\      assertThat(arguments[1], 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo('InitiateCheckout');\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(mockEec.fb);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Enhanced Ecommerce Purchase works\n  code: \"mockData.enhancedEcommerce = true;\\nmockEec.fb.num_items = 3;\\nmockData.objectPropertyList\\\n    \\ = {};\\n\\nmock('copyFromDataLayer', key => {\\n  if (key === 'ecommerce') return\\\n    \\ {\\n    currencyCode: 'EUR',\\n    purchase: {\\n      products: mockEec.gtm.products\\n\\\n    \\    }\\n  };\\n});\\n\\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if (key\\\n    \\ === 'fbq') return function() {\\n    if (arguments[0] === 'trackSingle') {\\n\\\n    \\      assertThat(arguments[1], 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo('Purchase');\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(mockEec.fb);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Object merge with variable and list works\n  code: \"mockData.objectPropertiesFromVariable = {\\n  prop1: 'var1',\\n  prop2: 'var2',\\n\\\n    \\  prop3: 'var3'\\n};\\n\\nconst expected = {\\n  prop1: 'val1',\\n  prop2: 'val2',\\n\\\n    \\  prop3: 'var3'\\n};\\n\\nlet index = 0;\\nmock('copyFromWindow', key => {\\n  if\\\n    \\ (key === 'fbq') return function() {\\n    if (arguments[0] === 'trackSingle')\\\n    \\ {\\n      assertThat(arguments[1], 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo('PageView');\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(expected);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Object merge with variable, list and eec works\n  code: \"mockData.enhancedEcommerce = true;\\nmockData.objectPropertiesFromVariable\\\n    \\ = {\\n  content_type: 'product_group'\\n};\\nmockData.objectPropertyList = [{\\n\\\n    \\  name: 'currency',\\n  value: 'USD'\\n}];\\nmockEec.fb.num_items = 3;\\nmockEec.fb.content_type\\\n    \\ = 'product_group';\\nmockEec.fb.currency = 'USD';\\n\\nmock('copyFromDataLayer',\\\n    \\ key => {\\n  if (key === 'ecommerce') return {\\n    currencyCode: 'EUR',\\n  \\\n    \\  purchase: {\\n      products: mockEec.gtm.products\\n    }\\n  };\\n});\\n\\nlet\\\n    \\ index = 0;\\nmock('copyFromWindow', key => {\\n  if (key === 'fbq') return function()\\\n    \\ {\\n    if (arguments[0] === 'trackSingle') {\\n      assertThat(arguments[1],\\\n    \\ 'trackSingle called with incorrect pixel ID').isEqualTo(mockData.pixelId.split(',')[index]);\\n\\\n    \\      assertThat(arguments[2], 'trackSingle called with incorrect event name').isEqualTo('Purchase');\\n\\\n    \\      assertThat(arguments[3], 'trackSingle called with incorrect event parameters').isEqualTo(mockEec.fb);\\n\\\n    \\      index += 1;\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertThat(index, 'trackSingle called incorrect number of times').isEqualTo(2);\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\n- name: Send event ID\n  code: \"mockData.eventId = 'eventId';\\n\\nmock('copyFromWindow', key => {\\n  if (key\\\n    \\ === 'fbq') return function() {\\n    if (arguments[0] === 'trackSingle') {\\n\\\n    \\      assertThat(arguments[4], 'eventID not included in hit').isEqualTo({eventID:\\\n    \\ mockData.eventId});\\n    }\\n  };\\n});\\n     \\n// Call runCode to run the template's\\\n    \\ code.\\nrunCode(mockData);\\n\\n// Verify that the tag finished successfully.\\n\\\n    assertApi('gtmOnSuccess').wasCalled();\"\nsetup: \"const mockData = {\\n  pixelId: '12345,23456',\\n  eventName: 'standard',\\n\\\n  \\  standardEventName: 'PageView',\\n  customEventName: 'custom',\\n  variableEventName:\\\n  \\ 'standard',\\n  consent: true,\\n  advancedMatching: false,\\n  advancedMatchingList:\\\n  \\ [{name: 'ct', value: 'Helsinki'},{name: 'cn', value: 'Finland'},{name: 'external_id',\\\n  \\ value: 'UserId'}],\\n  objectPropertiesFromVariable: false,\\n  objectPropertyList:\\\n  \\ [{name: 'prop1', value: 'val1'},{name: 'prop2', value: 'val2'}],\\n  disableAutoConfig:\\\n  \\ false,\\n  disablePushState: false,\\n  enhancedEcommerce: false,\\n  eventId: ''\\n\\\n  };\\n\\nconst mockEec = {\\n  gtm: {  \\n    products: [{\\n      id: 'i1',\\n      name:\\\n  \\ 'n1',\\n      category: 'c1',\\n      price: '1.00',\\n      quantity: 1\\n    },{\\n\\\n  \\      id: 'i2',\\n      name: 'n2',\\n      category: 'c2',\\n      price: '2.00',\\n\\\n  \\      quantity: 2\\n    }]\\n  },\\n  fb: {\\n    content_type: 'product',\\n    contents:\\\n  \\ [{\\n      id: 'i1',\\n      quantity: 1\\n    },{\\n      id: 'i2',\\n      quantity:\\\n  \\ 2\\n    }],\\n    currency: 'EUR',\\n    value: 5.00\\n  }\\n};\\n\\nconst scriptUrl\\\n  \\ = 'https://connect.facebook.net/en_US/fbevents.js';\\n\\n// Create injectScript\\\n  \\ mock\\nlet success, failure;\\nmock('injectScript', (url, onsuccess, onfailure)\\\n  \\ => {\\n  success = onsuccess;\\n  failure = onfailure;\\n  onsuccess();\\n});\\n\\n\\\n  mock('copyFromWindow', key => {\\n  if (key === 'fbq') return () => {};\\n});\"\n\n\n___NOTES___\n\nCreated on 18/05/2019, 21:57:16\n\n\n",
                "galleryReference": {
                    "host": "github.com",
                    "owner": "facebookarchive",
                    "repository": "GoogleTagManager-WebTemplate-For-FacebookPixel",
                    "version": "11c004614f6b8f7cc999caabef521086116ce302",
                    "signature": "de30f66e675f24ef8640cea7175b615c94807fa8f027929f94c3d0b45a520d86"
                }
            }
        ]
    }
}